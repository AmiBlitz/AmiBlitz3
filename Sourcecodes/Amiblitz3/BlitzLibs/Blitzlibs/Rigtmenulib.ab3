; XTRA
; Embedded .xtra Header
; 
; General Info
; -------------------------------------------------------
; ExePath         = "Development:AmiBlitz3/BlitzLibs/Decompiled/thirdpartylibs"
; ExeFile         = "riGTMenuLib_new.obj"
; CreateIcon      = 0
; Residents       = "libnums.res,libmacs.res,libjsrs.res,LVO.res"
; 
; Compiler
; -------------------------------------------------------
; StringBuffer    = 10240
; MakeSmallest    = 1
; FuncOptimize    = 1
; Version         = 0.0.0
; NumberOfBuilds  = 10
; 
; Debugger
; -------------------------------------------------------
; CliArgs         = ""
; StackSize       = 8191
; RuntimeDebug    = 0
; DebugInfo       = 0
; CreateDbgFile   = 0
; OverflowCheck   = 0
; AssemblerCheck  = 0
; InterruptCheck  = 1
; AutoRun         = 1
; 
; Editor
; -------------------------------------------------------
; CursorLine      = 1
; CursorColumn    = 1
; LabelSearch     = ""
; LabelRemark     = 0
; LabelAll        = 0
; LabelCase       = 0
; LabelPosition   = 0
; 
; Blitz Objects
; -------------------------------------------------------
; Max File        = 5
; Max GadgetList  = 5
; Max Shape       = 100
; Max Bank        = 5
; Max MenuList    = 5
; Max GTList      = 20
; Max BitMap      = 10
; Max Screen      = 5
; Max IntuiFont   = 5
; Max Window      = 20
; Max Palette     = 4
; Max BlitzFont   = 4
; Max IconInfo    = 1
; Max MUIObject   = 50
; Max AsyncReq    = 4
; Max Req-Lib     = 5
; Max GTMenuList  = 5
; Max Console     = 5
; Max TCPSock     = 5
; Max Tape        = 5
; Max TagList     = 5
; Max Database    = 16
; Max Sound       = 10
; Max MedModule   = 8
; Max Buffer      = 10
; Max Queue       = 10
; Max Sprite      = 20
; Max Module      = 5
; Max Slice       = 10
; Max Page        = 4
; Max CopList     = 10
; Max PTModule    = 5
; Max Anim        = 10
; Max NChunky     = 50
; Max Chunky      = 20
; Max Stencil     = 5
; Max XBSound     = 10
; /XTRA
ABSEXECBASE EQU $4
#rigtmenulib = $25
!libheader {#rigtmenulib,init,0,finit,errors}

!dumtoke{"GTMenuList","List of GT Menus",_toke}

 Dc.l $03030000,$00000001,$02000025,$1380009e ;058
 Dc.l $10020000  ;068
 Dc.l LAB_008E  ;06c: 00000e88
 Dc.l do_CreateMenuStrip  ;070: 000006be
 Ds.l 1   ;074
 Dc.l $ffff0000  ;078
 Ds.l 1   ;07c
 Dc.b "CreateMenuStrip",0
 Dc.b "GTMenuList#",0

!astatement
!args{#word}
!libs{#rigtmenulib,#ia3,#windowslib,#ua1,#intuitionlib,#la6,#screenslib,#ua0}
!subs{do_SetMenu,LAB_008F,0}
!name{"GTSetMenu","GTMenuList#"}
; Dc.l $00010000,$00000001,$02000025,$1380008a ;09c 
; Dc.l $110200ff,$1600009e,$10020000 ;0ac
; Dc.l LAB_008F  ;0b8: 00000e92
; Dc.l do_SetMenu  ;0bc: 00000884
; Ds.l 1   ;0c0
; Dc.l $ffff0000  ;0c4
; Ds.l 1   ;0c8
; Dc.b "GTSetMenu",0
; Dc.b "GTMenuList#",0

 Dc.l $00010000  ;0e2
 Ds.l 1   ;0e6
 Dc.l $008a1202,$00ff1600 ;0ea
 Ds.l 1   ;0f2
 Ds.w 1   ;0f6
 Dc.l do_UnsetMenu  ;0f8: 000008ba
 Ds.l 1   ;0fc
 Dc.l $ffff0000  ;100
 Ds.l 1   ;104
 Dc.b "GTUnSetMenu",0
 Dc.b "- removes the gtmenulist from the current window",0,0

 Dc.l $00010000,$00000003,$02020700,$00251380 ;146
 Ds.l 1   ;156
 Ds.w 1   ;15a
 Dc.l LAB_0026  ;15c: 000008ea
 Ds.l 1   ;160
 Dc.l $ffff0000  ;164
 Ds.l 1   ;168
 ;Dc.l $47544d65,$6e755469,$746c6500,$47544d65 ;16c
 ;Dc.l $6e754c69,$7374232c,$6d656e75,$2c746974 ;17c
 ;Dc.l $6c652400
 Dc.b "GTMenuTitle",0
 Dc.b "GTMenuList#,menu,title$",0

 Dc.l $00010000,$00000004
 Dc.l $02020202 ;18c
 Dc.l $00251380  ;19c
 Ds.l 1   ;1a0
 Ds.w 1   ;1a4
 Dc.l LAB_002C  ;1a6: 00000948
 Ds.l 1   ;1aa
 Dc.l $00050202,$02020700,$00251380 ;1ae
 Ds.l 1   ;1ba
 Ds.w 1   ;1be
 Dc.l LAB_002D  ;1c0: 0000094a
 Ds.l 1   ;1c4
 Dc.l $00060202,$02020707,$00251380 ;1c8
 Ds.l 1   ;1d4
 Ds.w 1   ;1d8
 Dc.l LAB_002E  ;1da: 0000094c
 Ds.l 1   ;1de
 Dc.l $00070202,$02020707,$03000025,$13800000 ;1e2
 Ds.l 1   ;1f2
 Dc.l LAB_002F  ;1f6: 0000094e
 Ds.l 1   ;1fa
 Dc.l $00080202,$02020707,$03030025,$13800000 ;1fe
 Ds.l 1   ;20e
 Dc.l LAB_002B  ;212: 0000093c
 Ds.l 1   ;216
 Dc.l $ffff0000  ;21a
 Ds.l 1   ;21e
 Dc.b "GTMenuItem",0
 Dc.b "GTMenuList#,flags,menu,item[,itemtext$[,shortcut$[,mutualexcl"
 Dc.b "ude[,UserData]]",0

 Dc.l $00010000,$00000002,$02020025,$13800000 ;27a
 Ds.l 1   ;28a
 Dc.l LAB_0063  ;28e: 00000c7c
 Ds.l 1   ;292
 Dc.l $00030202,$02000025,$13800000 ;296
 Dc.l LAB_0092  ;2a2: 00000eaa
 Dc.l LAB_0066  ;2a6: 00000c90
 Ds.l 1   ;2aa
 Dc.l $00040202,$02020025,$13800000 ;2ae
 Dc.l LAB_0094  ;2ba: 00000ec2
 Dc.l LAB_0068  ;2be: 00000c9c
 Ds.l 1   ;2c2
 Dc.l $00050202,$02020200,$00251380 ;2c6
 Ds.w 1   ;2d2
 Dc.l LAB_0096  ;2d4: 00000ee0
 Dc.l LAB_006B  ;2d8: 00000cb2
 Ds.l 1   ;2dc
 Dc.l $ffff0000  ;2e0
 Ds.l 1   ;2e4
 Dc.b "GTMenuState",0
 Dc.b "GTMenuList#[,Menu[,Item[,Subitem]]],On|Off",0,0

 Dc.l $00010000,$00000005,$02020202,$02000025 ;320
 Dc.l $13800000  ;330
 Ds.l 1   ;334
 Dc.l LAB_003B  ;338: 00000a20
 Ds.l 1   ;33c
 Dc.l $00060202,$02020207,$00251380 ;340
 Ds.l 1   ;34c
 Ds.w 1   ;350
 Dc.l LAB_003C  ;352: 00000a22
 Ds.l 1   ;356
 Dc.l $00070202,$02020207,$07000025,$13800000 ;35a
 Ds.l 1   ;36a
 Dc.l LAB_003D  ;36e: 00000a24
 Ds.l 1   ;372
 Dc.l $00080202,$02020207,$07030025,$13800000 ;376
 Ds.l 1   ;386
 Dc.l LAB_003A  ;38a: 00000a0e
 Ds.l 1   ;38e
 Dc.l $00090202,$02020207,$07030300,$00251380 ;392
 Ds.l 1   ;3a2
 Ds.w 1   ;3a6
 Dc.l LAB_0039  ;3a8: 000009fa
 Ds.l 1   ;3ac
 Dc.l $ffff0000  ;3b0
 Ds.l 1   ;3b4
 Dc.b "GTSubItem",0
 Dc.b "GTMenuList#,flags,menu,item,subitem[,itemtext$[,shortcut$[,mu"
 Dc.b "tualexclude[,UserData]]]]",0,0

 Dc.l $02020000,$00000003,$02020200,$00251280 ;41a
 Ds.w 1   ;42a
 Dc.l LAB_0093  ;42c: 00000eb8
 Dc.l LAB_006F  ;430: 00000cd2
 Ds.l 1   ;434
 Dc.l $00040202,$02020025,$12800000 ;438
 Dc.l LAB_0095  ;444: 00000ed6
 Dc.l LAB_0071  ;448: 00000ce6
 Ds.l 1   ;44c
 Dc.l $ffff0000  ;450
 Ds.l 1   ;454
 Dc.b "GTMenuChecked",0
 Dc.b "(GTMenuList#,Menu,Item[,Subitem])",0

 Dc.l $00010000,$00000004,$02020202,$00251280 ;488
 Ds.w 1   ;498
 Dc.l LAB_0093  ;49a: 00000eb8
 Dc.l LAB_0075  ;49e: 00000d0c
 Ds.l 1   ;4a2
 Dc.l $00050202,$02020200,$00251280 ;4a6
 Ds.w 1   ;4b2
 Dc.l LAB_0095  ;4b4: 00000ed6
 Dc.l LAB_0078  ;4b8: 00000d22
 Ds.l 1   ;4bc
 Dc.l $ffff0000  ;4c0
 Ds.l 1   ;4c4
 Dc.b "GTSetMenuChecked",0
 Dc.b "GTMenuList#,Menu,Item[,Subitem],Off|On",0

 Dc.l $00010000,$00000002,$02020025,$13800000 ;500
 Ds.l 1   ;510
 Dc.l LAB_0048  ;514: 00000ae0
 Ds.l 1   ;518
 Dc.l $00030202,$02000025,$13800000 ;51c
 Ds.l 1   ;528
 Dc.l LAB_004A  ;52c: 00000b16
 Ds.l 1   ;530
 Dc.l $00040202,$02020025,$13800000 ;534
 Ds.l 1   ;540
 Dc.l LAB_004B  ;544: 00000b2c
 Ds.l 1   ;548
 Dc.l $ffff0000  ;54c
 Ds.l 1   ;550
 Dc.b "GTFreeMenu",0
 Dc.b "GTMenuList#,Menu[,Item[,Subitem]]"

 Dc.l $00000302  ;580
 Ds.l 1   ;584
 Dc.l $00030202,$02000025,$12800000 ;588
 Dc.l LAB_0093  ;594: 00000eb8
 Dc.l LAB_005A  ;598: 00000c28
 Ds.l 1   ;59c
 Dc.l $00040202,$02020025,$12800000 ;5a0
 Dc.l LAB_0097  ;5ac: 00000ef4
 Dc.l LAB_005B  ;5b0: 00000c2a
 Ds.l 1   ;5b4
 Dc.l $ffff0000  ;5b8
 Ds.l 1   ;5bc
 Dc.b "GTGetUserData",0
 Dc.b "(GTMenuList#,Menu,Item[,Subitem])",0

init: !nullsub{codeinit,0,0}
finit:!nullsub{codefinit,0,0}

_load:!nullsub{0,0,0}
_save:!nullsub{0,0,0}
_use:!nullsub{0,0,0}
_free:!nullsub{do_freemenus,0,0}

!libfin{_toke,_load,_save,_use,_free,5,4}

; ==============================================================================================
.codeinit:
  LEA gadtoolsname(PC),A1
  MOVEQ #0,D0
  MOVEA.l ABSEXECBASE,A6
  JSR _OpenLibrary(A6)
  MOVE.l D0,gadtoolsbase
RTS

.codefinit:
 TST.l gadtoolsbase: BNE.w LAB_000A
   MOVEA.l gadtoolsbase,A1
   MOVEA.l ABSEXECBASE,A6
   JSR _CloseLibrary(A6)
   CLR.l gadtoolsbase
 LAB_000A:
RTS

do_CreateMenuStrip:
  TST.l gadtoolsbase : BEQ.w LAB_000D  ;6c4: 67000068
    MOVEA.l gadtoolsbase,A6  ;6c8: 2c7900000d62
    TST.l (A3) : BEQ.w LAB_000C  ;6d0: 67000012
      MOVEM.l D1/A0/A3,-(A7)  ;6d4: 48e74090
      MOVEA.l (A3),A0   ;6d8: 2053
      JSR -54(A6)   ;6da: 4eaeffca
      MOVEM.l (A7)+,D1/A0/A3  ;6de: 4cdf0902
      CLR.l (A3)   ;6e2: 4293
    LAB_000C:
    BSR.w LAB_0011  ;6e4: 61000058
    TST.l D1 : BEQ.w LAB_000D  ;6ea: 67000042
      MOVEM.l D1/A0/A3,-(A7)  ;6ee: 48e74090
      MOVEA.l D1,A0   ;6f2: 2041
      LEA LAB_0024(PC),A1  ;6f4: 43fa01d4
      JSR -48(A6)   ;6f8: 4eaeffd0
      MOVEM.l (A7)+,D1/A0/A3  ;6fc: 4cdf0902
      MOVE.l D0,(A3)   ;700: 2680
      MOVEA.l (A0),A0   ;702: 2050
      SUBA.l A1,A1   ;704: 93c9
      JSR -126(A6)  ;706: 4eaeff82
      MOVE.l D0,LAB_000E  ;70a: 23c000000732
      MOVEA.l (A3),A0   ;710: 2053
      MOVEA.l D0,A1   ;712: 2240
      LEA LAB_0025(PC),A2  ;714: 45fa01c4
      JSR -66(A6)   ;718: 4eaeffbe
      MOVEA.l LAB_000E,A0  ;71c: 207900000732
      JSR -132(A6)  ;722: 4eaeff7c
      BSR.w LAB_0019  ;726: 610000ee
      MOVEQ #-1,D0   ;72a: 70ff
      RTS    ;72c: 4e75
  LAB_000D:
  MOVEQ #0,D0   ;72e: 7000
RTS    ;730: 4e75
LAB_000E:
 ORI.b #$00,D0   ;732: 00000000
LAB_000F:
 ORI.b #$00,D0   ;736: 00000000
LAB_0010:
 ORI.b #$00,D0   ;73a: 00000000
LAB_0011:
 MOVEM.l A0/A3,-(A7)  ;73e: 48e70090
 MOVEA.l 4(A3),A0  ;742: 206b0004
 MOVEQ #0,D0   ;746: 7000
 MOVE.w 8(A3),D0  ;748: 302b0008
 MOVE.l #$00010001,D1  ;74c: 223c00010001
 ADDQ.l #1,D0   ;752: 5280
 MULU #$0014,D0  ;754: c0fc0014
 MOVE.l D0,LAB_0010  ;758: 23c00000073a
 ;JSR SECSTRT_0-2147434494 ;75e: 4eb98000c002
 ALibJsr #globalalloc
 MOVE.l D0,LAB_000F  ;764: 23c000000736
 MOVEA.l D0,A1   ;76a: 2240
LAB_0012:
 MOVE.b #$01,(A1)  ;76c: 12bc0001
 ADDQ.w #2,A1   ;770: 5449
 MOVE.l 4(A0),(A1)  ;772: 22a80004
 LEA 18(A1),A1  ;776: 43e90012
 TST.l 8(A0)   ;77a: 4aa80008
 BEQ.w LAB_0017  ;77e: 6700007a
 MOVEA.l 8(A0),A2  ;782: 24680008
LAB_0013:
 MOVE.b #$02,(A1)  ;786: 12bc0002
 ADDQ.w #2,A1   ;78a: 5449
 MOVE.l 4(A2),(A1)  ;78c: 22aa0004
 MOVE.l 14(A2),4(A1)  ;790: 236a000e0004
 MOVE.w 12(A2),8(A1)  ;796: 336a000c0008
 MOVE.l 22(A2),10(A1)  ;79c: 236a0016000a
 MOVE.l 26(A2),14(A1)  ;7a2: 236a001a000e
 LEA 18(A1),A1  ;7a8: 43e90012
 TST.l 18(A2)   ;7ac: 4aaa0012
 BEQ.w LAB_0016  ;7b0: 6700003c
 MOVE.l A2,-(A7)  ;7b4: 2f0a
 MOVEA.l 18(A2),A2  ;7b6: 246a0012
LAB_0014:
 MOVE.b #$03,(A1)  ;7ba: 12bc0003
 ADDQ.w #2,A1   ;7be: 5449
 MOVE.l 4(A2),(A1)  ;7c0: 22aa0004
 MOVE.l 14(A2),4(A1)  ;7c4: 236a000e0004
 MOVE.w 12(A2),8(A1)  ;7ca: 336a000c0008
 MOVE.l 22(A2),10(A1)  ;7d0: 236a0016000a
 MOVE.l 26(A2),14(A1)  ;7d6: 236a001a000e
 LEA 18(A1),A1  ;7dc: 43e90012
 TST.l (A2)   ;7e0: 4a92
 BEQ.w LAB_0015  ;7e2: 67000008
 MOVEA.l (A2),A2   ;7e6: 2452
 BRA.w LAB_0014  ;7e8: 6000ffd0
LAB_0015:
 MOVEA.l (A7)+,A2  ;7ec: 245f
LAB_0016:
 TST.l (A2)   ;7ee: 4a92
 BEQ.w LAB_0017  ;7f0: 67000008
 MOVEA.l (A2),A2   ;7f4: 2452
 BRA.w LAB_0013  ;7f6: 6000ff8e
LAB_0017:
 MOVE.l (A0),D0   ;7fa: 2010
 BEQ.w LAB_0018  ;7fc: 67000008
 MOVEA.l D0,A0   ;800: 2040
 BRA.w LAB_0012  ;802: 6000ff68
LAB_0018:
 MOVE.b #$00,(A1)  ;806: 12bc0000
 MOVE.l LAB_000F,D1  ;80a: 223900000736
 MOVEM.l (A7)+,A0/A3  ;810: 4cdf0900
 RTS    ;814: 4e75
LAB_0019:
 MOVEA.l LAB_000F,A1  ;816: 227900000736
 MOVE.l LAB_0010,D0  ;81c: 20390000073a
 ;Dc.w $4eb9   ;822
 ;Dc.l SECSTRT_0-2147434493 ;824: 8000c003
 ALibJsr #globalfree
 RTS    ;828: 4e75

.do_freemenus:
  MOVE.l (A3),D0 : BEQ.w LAB_001B
    MOVEA.l D0,A0
    MOVEA.l gadtoolsbase,A6
    JSR _FreeMenus(A6)
  LAB_001B:
 
  MOVE.l 4(A3),D0 : BEQ.w LAB_001E
    MOVEA.l D0,A0
    LAB_001C:
      MOVE.l (A0),-(A7)
      MOVEA.l 8(A0),A2
      MOVEA.l A0,A1  
      MOVEQ #12,D1   
      ALibJsr #globalfree

      CMPA.l #$00000000,A2 : BEQ.w LAB_001D
        MOVEA.l A2,A0
        MOVE.l #$0001869f,D0
        BSR.w LAB_0051
      LAB_001D:
      MOVEA.l (A7)+,A0
    CMPA.l #$00000000,A0 : BNE.w LAB_001C
  LAB_001E:
 
  CLR.l (A3)
  CLR.l 4(A3)
  CLR.l 8(A3)
RTS

.do_SetMenu:
  TST.l (A3) : BNE.w LAB_0020
    MOVEM.l A0-A1/A3/A6,-(A7) ;88a: 48e700d2
    BSR.w do_CreateMenuStrip  ;88e: 6100fe2e
    MOVEM.l (A7)+,A0-A1/A3/A6 ;892: 4cdf4b00
    TST.l (A3) : BNE.w LAB_0020
      RTS
  LAB_0020:
 
  MOVEA.l A1,A0   
  MOVEA.l (A0),A0 
  MOVE.l 28(A0),D0 : BEQ.w LAB_0021  
    MOVE.l A0,-(A7) 
    JSR _ClearMenuStrip(A6) ; a0: window pointer
    MOVEA.l (A7)+,A0
  LAB_0021:
  
  MOVEA.l (A3),A1
  JSR _SetMenuStrip(A6) ; a0: window, a1:menu
RTS

.do_UnsetMenu:
  MOVEA.l (A2),A0
  TST.l 28(A0) : BEQ.w LAB_0023
    JSR _FreeMenus(A6)
  LAB_0023:
RTS

LAB_0024:
 Dc.w $8008   ;8ca
 Dc.w $003e   ;8cc
 Dc.w $ffff   ;8ce
 Dc.w $ffff   ;8d0
 ORI.b #$00,D0   ;8d2: 00000000
 ORI.b #$00,D0   ;8d6: 00000000
LAB_0025:
 Dc.w $8008   ;8da
 ORI.w #$ffff,D3  ;8dc: 0043ffff
 Dc.w $ffff   ;8e0
 ORI.b #$00,D0   ;8e2: 00000000
 ORI.b #$00,D0   ;8e6: 00000000
LAB_0026:
 TST.l gadtoolsbase  ;8ea: 4ab900000d62
 BNE.w LAB_0027  ;8f0: 66000004
 RTS    ;8f4: 4e75
LAB_0027:
 LEA 4(A3),A0  ;8f6: 41eb0004
 SUBQ.w #1,D1   ;8fa: 5341
 BMI.w LAB_0029  ;8fc: 6b00000e
LAB_0028:
 MOVE.l (A0),D0   ;900: 2010
 BEQ.w LAB_002A  ;902: 67000036
 MOVEA.l D0,A0   ;906: 2040
 DBF D1,LAB_0028  ;908: 51c9fff6
LAB_0029:
 MOVEQ #12,D0   ;90c: 700c
 MOVEQ #1,D1   ;90e: 7201
 ALibJsr #globalalloc
 TST.l D0   ;916: 4a80
 BEQ.w LAB_002A  ;918: 67000020
 MOVEA.l D0,A1   ;91c: 2240
 MOVE.l (A0),(A1)  ;91e: 2290
 MOVE.l D0,(A0)   ;920: 2080
 MOVE.l D2,D0   ;922: 2002
 MOVE.l -(A2),D1  ;924: 2222
 ALibJsr #allocstring
 MOVE.l D0,4(A1)  ;92c: 23400004
 CLR.l 8(A1)   ;930: 42a90008
 ADDI.w #$0001,8(A3)  ;934: 066b00010008
LAB_002A:
 RTS    ;93a: 4e75
LAB_002B:
 MOVE.l -16(A2),LAB_0080+2 ;93c: 23eafff000000d5e
 BRA.w LAB_0030  ;944: 60000014
LAB_002C:
 MOVEQ #-1,D4   ;948: 78ff
LAB_002D:
 MOVEQ #0,D5   ;94a: 7a00
LAB_002E:
 MOVEQ #0,D6   ;94c: 7c00
LAB_002F:
 MOVE.l D6,LAB_007E+2  ;94e: 23c600000d5a
 CLR.l LAB_0080+2  ;954: 42b900000d5e
LAB_0030:
 TST.l gadtoolsbase  ;95a: 4ab900000d62
 BNE.w LAB_0031  ;960: 66000004
 RTS    ;964: 4e75
LAB_0031:
 MOVE.w D1,LAB_007E  ;966: 33c100000d58
 LEA 4(A3),A0  ;96c: 41eb0004
LAB_0032:
 MOVE.l (A0),D0   ;970: 2010
 BEQ.w LAB_0038  ;972: 67000084
 MOVEA.l D0,A0   ;976: 2040
 DBF D2,LAB_0032  ;978: 51cafff6
 LEA 8(A0),A0  ;97c: 41e80008
 SUBQ.w #1,D3   ;980: 5343
 BMI.w LAB_0034  ;982: 6b00000e
LAB_0033:
 MOVE.l (A0),D0   ;986: 2010
 BEQ.w LAB_0038  ;988: 6700006e
 MOVEA.l D0,A0   ;98c: 2040
 DBF D3,LAB_0033  ;98e: 51cbfff6
LAB_0034:
 MOVEQ #30,D0   ;992: 701e
 MOVE.l #$00010001,D1  ;994: 223c00010001
 ALibJsr #globalalloc
 TST.l D0   ;9a0: 4a80
 BEQ.w LAB_0038  ;9a2: 67000054
 MOVEA.l D0,A1   ;9a6: 2240
 MOVE.l (A0),(A1)  ;9a8: 2290
 MOVE.l D0,(A0)   ;9aa: 2080
 TST.l D4   ;9ac: 4a84
 BPL.w LAB_0035  ;9ae: 6a000008
 MOVEQ #-1,D0   ;9b2: 70ff
 BRA.w LAB_0036  ;9b4: 6000000c
LAB_0035:
 MOVE.l D4,D0   ;9b8: 2004
 MOVE.l -(A2),D1  ;9ba: 2222
 ALibJsr #allocstring
LAB_0036:
 MOVE.l D0,4(A1)  ;9c2: 23400004
 CLR.l 8(A1)   ;9c6: 42a90008
 MOVE.w LAB_007E,12(A1)  ;9ca: 337900000d58000c
 TST.w D5   ;9d2: 4a45
 BEQ.w LAB_0037  ;9d4: 67000010
 MOVE.l D5,D0   ;9d8: 2005
 MOVE.l -(A2),D1  ;9da: 2222
 ALibJsr #allocstring
 MOVE.l D0,14(A1)  ;9e2: 2340000e
LAB_0037:
 MOVE.l LAB_007E+2(PC),22(A1) ;9e6: 237a03720016
 MOVE.l LAB_0080+2(PC),26(A1) ;9ec: 237a0370001a
 ADDI.w #$0001,8(A3)  ;9f2: 066b00010008
LAB_0038:
 RTS    ;9f8: 4e75
LAB_0039:
 MOVE.l -20(A2),LAB_0080+2 ;9fa: 23eaffec00000d5e
 MOVE.l -16(A2),LAB_007E+2 ;a02: 23eafff000000d5a
 BRA.w LAB_003E  ;a0a: 60000024
LAB_003A:
 CLR.l LAB_0080+2  ;a0e: 42b900000d5e
 MOVE.l -16(A2),LAB_007E+2 ;a14: 23eafff000000d5a
 BRA.w LAB_003E  ;a1c: 60000012
LAB_003B:
 MOVEQ #-1,D5   ;a20: 7aff
LAB_003C:
 MOVEQ #0,D6   ;a22: 7c00
LAB_003D:
 CLR.l LAB_007E+2  ;a24: 42b900000d5a
 CLR.l LAB_0080+2  ;a2a: 42b900000d5e
LAB_003E:
 TST.l gadtoolsbase  ;a30: 4ab900000d62
 BNE.w LAB_003F  ;a36: 66000004
 RTS    ;a3a: 4e75
LAB_003F:
 MOVE.w D1,LAB_007E  ;a3c: 33c100000d58
 LEA 4(A3),A0  ;a42: 41eb0004
LAB_0040:
 MOVE.l (A0),D0   ;a46: 2010
 BEQ.w LAB_0047  ;a48: 67000094
 MOVEA.l D0,A0   ;a4c: 2040
 DBF D2,LAB_0040  ;a4e: 51cafff6
 LEA 8(A0),A0  ;a52: 41e80008
LAB_0041:
 MOVE.l (A0),D0   ;a56: 2010
 BEQ.w LAB_0047  ;a58: 67000084
 MOVEA.l D0,A0   ;a5c: 2040
 DBF D3,LAB_0041  ;a5e: 51cbfff6
 LEA 18(A0),A0  ;a62: 41e80012
 SUBQ.w #1,D4   ;a66: 5344
 BMI.w LAB_0043  ;a68: 6b00000e
LAB_0042:
 MOVE.l (A0),D0   ;a6c: 2010
 BEQ.w LAB_0047  ;a6e: 6700006e
 MOVEA.l D0,A0   ;a72: 2040
 DBF D4,LAB_0042  ;a74: 51ccfff6
LAB_0043:
 MOVEQ #30,D0   ;a78: 701e
 MOVE.l #$00010001,D1  ;a7a: 223c00010001
 ALibJsr #globalalloc
 TST.l D0   ;a86: 4a80
 BEQ.w LAB_0047  ;a88: 67000054
 MOVEA.l D0,A1   ;a8c: 2240
 MOVE.l (A0),(A1)  ;a8e: 2290
 MOVE.l D0,(A0)   ;a90: 2080
 TST.l D5   ;a92: 4a85
 BPL.w LAB_0044  ;a94: 6a000008
 MOVEQ #-1,D0   ;a98: 70ff
 BRA.w LAB_0045  ;a9a: 6000000c
LAB_0044:
 MOVE.l D5,D0   ;a9e: 2005
 MOVE.l -(A2),D1  ;aa0: 2222
 ALibJsr #allocstring
LAB_0045:
 MOVE.l D0,4(A1)  ;aa8: 23400004
 CLR.l 8(A1)   ;aac: 42a90008
 MOVE.w LAB_007E,12(A1)  ;ab0: 337900000d58000c
 TST.w D6   ;ab8: 4a46
 BEQ.w LAB_0046  ;aba: 67000010
 MOVE.l D6,D0   ;abe: 2006
 MOVE.l -(A2),D1  ;ac0: 2222
 ALibJsr #allocstring
 MOVE.l D0,14(A1)  ;ac8: 2340000e
LAB_0046:
 MOVE.l LAB_007E+2(PC),22(A1) ;acc: 237a028c0016
 MOVE.l LAB_0080+2(PC),26(A1) ;ad2: 237a028a001a
 ADDI.w #$0001,8(A3)  ;ad8: 066b00010008
LAB_0047:
RTS    ;ade: 4e75

LAB_0048:
 MOVEQ #-1,D2   ;ae0: 74ff
 MOVEQ #-1,D3   ;ae2: 76ff
 BSR.w LAB_004C  ;ae4: 6100005a
 TST.l D0   ;ae8: 4a80
 BEQ.w LAB_000D  ;aea: 6700fc42
 MOVE.l (A0),(A1)  ;aee: 2290
 MOVEA.l 8(A0),A2  ;af0: 24680008
 MOVEA.l A0,A1   ;af4: 2248
 MOVEQ #12,D1   ;af6: 720c
 ALibJsr #globalfree
 CMPA.l #$00000000,A2  ;afe: b5fc00000000
 BEQ.w LAB_0049  ;b04: 6700000e
 MOVEA.l A2,A0   ;b08: 204a
 MOVE.l #$0001869f,D0  ;b0a: 203c0001869f
 BSR.w LAB_0051  ;b10: 61000086
LAB_0049:
 RTS    ;b14: 4e75
LAB_004A:
 MOVEQ #-1,D3   ;b16: 76ff
 BSR.w LAB_004C  ;b18: 61000026
 TST.l D0   ;b1c: 4a80
 BEQ.w LAB_000D  ;b1e: 6700fc0e
 MOVE.l (A0),(A1)  ;b22: 2290
 MOVEQ #1,D0   ;b24: 7001
 BSR.w LAB_0051  ;b26: 61000070
 RTS    ;b2a: 4e75
LAB_004B:
 BSR.w LAB_004C  ;b2c: 61000012
 TST.l D0   ;b30: 4a80
 BEQ.w LAB_000D  ;b32: 6700fbfa
 MOVE.l (A0),(A1)  ;b36: 2290
 MOVEQ #1,D0   ;b38: 7001
 BSR.w LAB_0051  ;b3a: 6100005c
 RTS    ;b3e: 4e75
LAB_004C:
 TST.l gadtoolsbase  ;b40: 4ab900000d62
 BEQ.w LAB_000D  ;b46: 6700fbe6
 TST.l 4(A3)   ;b4a: 4aab0004
 BEQ.w LAB_000D  ;b4e: 6700fbde
 LEA 4(A3),A0  ;b52: 41eb0004
LAB_004D:
 MOVEA.l A0,A1   ;b56: 2248
 MOVE.l (A0),D0   ;b58: 2010
 BEQ.w LAB_000D  ;b5a: 6700fbd2
 MOVEA.l D0,A0   ;b5e: 2040
 DBF D1,LAB_004D  ;b60: 51c9fff4
 TST.l D2   ;b64: 4a82
 BMI.w LAB_0050  ;b66: 6b00002c
 LEA 8(A0),A0  ;b6a: 41e80008
LAB_004E:
 MOVEA.l A0,A1   ;b6e: 2248
 MOVE.l (A0),D0   ;b70: 2010
 BEQ.w LAB_000D  ;b72: 6700fbba
 MOVEA.l D0,A0   ;b76: 2040
 DBF D2,LAB_004E  ;b78: 51cafff4
 TST.l D3   ;b7c: 4a83
 BMI.w LAB_0050  ;b7e: 6b000014
 LEA 18(A0),A0  ;b82: 41e80012
LAB_004F:
 MOVEA.l A0,A1   ;b86: 2248
 MOVE.l (A0),D0   ;b88: 2010
 BEQ.w LAB_000D  ;b8a: 6700fba2
 MOVEA.l D0,A0   ;b8e: 2040
 DBF D3,LAB_004F  ;b90: 51cbfff4
LAB_0050:
 MOVEQ #-1,D0   ;b94: 70ff
 RTS    ;b96: 4e75

LAB_0051:
  MOVEM.l D7/A2,-(A7)
  MOVEA.l A0,A2
  MOVE.l D0,D7
  SUBQ.l #1,D7
  LAB_0052:
    MOVE.l 4(A2),D0 : BMI.w LAB_0053
    BEQ.w LAB_0053
      ALibJsr #freestring
    LAB_0053:
    
    MOVE.l 14(A2),D0 : BEQ.w LAB_0054
      ALibJsr #freestring
    LAB_0054:
    
    TST.l 18(A2) : BEQ.w LAB_0058
      MOVE.l A2,-(A7)
      MOVEA.l 18(A2),A2
      LAB_0055:
    MOVE.l 4(A2),D0 : BMI.w LAB_0056
    BEQ.w LAB_0056
     ALibJsr #freestring
    LAB_0056:
    MOVE.l 14(A2),D0 : BEQ.w LAB_0057
     ALibJsr #freestring
    LAB_0057:
    MOVEA.l A2,A1
    MOVEA.l (A2),A2
    MOVEQ #30,D1
    ALibJsr #globalfree
      CMPA.l #$00000000,A2 : BNE.w LAB_0055
      MOVEA.l (A7)+,A2
    LAB_0058:
    MOVEA.l A2,A1
    MOVEA.l (A2),A2
    MOVEQ #30,D1
    ALibJsr #globalfree
    CMPA.l #$00000000,A2 : BEQ.w LAB_0059
  DBF D7,LAB_0052
  LAB_0059:
 MOVEM.l (A7)+,D7/A2
RTS

LAB_005A:
 MOVEQ #-1,D3   ;c28: 76ff
LAB_005B:
 MOVEA.l (A2),A2   ;c2a: 2452
 DBF D1,LAB_005B  ;c2c: 51c9fffc
 LEA 18(A2),A2  ;c30: 45ea0012
LAB_005C:
 MOVEA.l (A2),A2   ;c34: 2452
 DBF D2,LAB_005C  ;c36: 51cafffc
 TST.w D3   ;c3a: 4a43
 BMI.w LAB_005E  ;c3c: 6b00000c
 LEA 28(A2),A2  ;c40: 45ea001c
LAB_005D:
 MOVEA.l (A2),A2   ;c44: 2452
 DBF D3,LAB_005D  ;c46: 51cbfffc
LAB_005E:
 MOVE.l 34(A2),D0  ;c4a: 202a0022
 RTS    ;c4e: 4e75
LAB_005F:
 TST.w D7   ;c50: 4a47
 BEQ.w LAB_0060  ;c52: 6700000a
 BSET #0,13(A3)  ;c56: 08eb0000000d
 RTS    ;c5c: 4e75
LAB_0060:
 BCLR #0,13(A3)  ;c5e: 08ab0000000d
 RTS    ;c64: 4e75
LAB_0061:
 TST.w D7   ;c66: 4a47
 BEQ.w LAB_0062  ;c68: 6700000a
 BSET #4,13(A3)  ;c6c: 08eb0004000d
 RTS    ;c72: 4e75
LAB_0062:
 BCLR #4,13(A3)  ;c74: 08ab0004000d
 RTS    ;c7a: 4e75
LAB_0063:
 MOVE.w D1,D7   ;c7c: 3e01
LAB_0064:
 MOVE.l (A3),D0   ;c7e: 2013
 BEQ.w LAB_0065  ;c80: 6700000c
 MOVEA.l D0,A3   ;c84: 2640
 BSR.w LAB_005F  ;c86: 6100ffc8
 BRA.w LAB_0064  ;c8a: 6000fff2
LAB_0065:
 RTS    ;c8e: 4e75
LAB_0066:
 MOVE.w D2,D7   ;c90: 3e02
LAB_0067:
 MOVEA.l (A3),A3   ;c92: 2653
 DBF D1,LAB_0067  ;c94: 51c9fffc
 BRA.w LAB_005F  ;c98: 6000ffb6
LAB_0068:
 MOVE.w D3,D7   ;c9c: 3e03
LAB_0069:
 MOVEA.l (A3),A3   ;c9e: 2653
 DBF D1,LAB_0069  ;ca0: 51c9fffc
 LEA 18(A3),A3  ;ca4: 47eb0012
LAB_006A:
 MOVEA.l (A3),A3   ;ca8: 2653
 DBF D2,LAB_006A  ;caa: 51cafffc
 BRA.w LAB_0061  ;cae: 6000ffb6
LAB_006B:
 MOVE.w D4,D7   ;cb2: 3e04
LAB_006C:
 MOVEA.l (A3),A3   ;cb4: 2653
 DBF D1,LAB_006C  ;cb6: 51c9fffc
 LEA 18(A3),A3  ;cba: 47eb0012
LAB_006D:
 MOVEA.l (A3),A3   ;cbe: 2653
 DBF D2,LAB_006D  ;cc0: 51cafffc
 LEA 28(A3),A3  ;cc4: 47eb001c
LAB_006E:
 MOVEA.l (A3),A3   ;cc8: 2653
 DBF D3,LAB_006E  ;cca: 51cbfffc
 BRA.w LAB_0061  ;cce: 6000ff96
LAB_006F:
 MOVEA.l (A2),A2   ;cd2: 2452
 DBF D1,LAB_006F  ;cd4: 51c9fffc
 LEA 18(A2),A2  ;cd8: 45ea0012
LAB_0070:
 MOVEA.l (A2),A2   ;cdc: 2452
 DBF D2,LAB_0070  ;cde: 51cafffc
 BRA.w LAB_0074  ;ce2: 6000001c
LAB_0071:
 MOVEA.l (A2),A2   ;ce6: 2452
 DBF D1,LAB_0071  ;ce8: 51c9fffc
 LEA 18(A2),A2  ;cec: 45ea0012
LAB_0072:
 MOVEA.l (A2),A2   ;cf0: 2452
 DBF D2,LAB_0072  ;cf2: 51cafffc
 LEA 28(A2),A2  ;cf6: 45ea001c
LAB_0073:
 MOVEA.l (A2),A2   ;cfa: 2452
 DBF D3,LAB_0073  ;cfc: 51cbfffc
LAB_0074:
 BTST #0,12(A2)  ;d00: 082a0000000c
 SNE D0   ;d06: 56c0
 EXT.w D0   ;d08: 4880
 RTS    ;d0a: 4e75
LAB_0075:
 MOVE.w D3,D0   ;d0c: 3003
LAB_0076:
 MOVEA.l (A2),A2   ;d0e: 2452
 DBF D1,LAB_0076  ;d10: 51c9fffc
 LEA 18(A2),A2  ;d14: 45ea0012
LAB_0077:
 MOVEA.l (A2),A2   ;d18: 2452
 DBF D2,LAB_0077  ;d1a: 51cafffc
 BRA.w LAB_007C  ;d1e: 6000001e
LAB_0078:
 MOVE.w D4,D0   ;d22: 3004
LAB_0079:
 MOVEA.l (A2),A2   ;d24: 2452
 DBF D1,LAB_0079  ;d26: 51c9fffc
 LEA 18(A2),A2  ;d2a: 45ea0012
LAB_007A:
 MOVEA.l (A2),A2   ;d2e: 2452
 DBF D2,LAB_007A  ;d30: 51cafffc
 LEA 28(A2),A2  ;d34: 45ea001c
LAB_007B:
 MOVEA.l (A2),A2   ;d38: 2452
 DBF D3,LAB_007B  ;d3a: 51cbfffc
LAB_007C:
 TST.w D0   ;d3e: 4a40
 BEQ.w LAB_007D  ;d40: 6700000a
 BSET #0,12(A2)  ;d44: 08ea0000000c
 RTS    ;d4a: 4e75
LAB_007D:
 BCLR #0,12(A2)  ;d4c: 08aa0000000c
RTS    ;d52: 4e75

Dc.l $00000000
LAB_007E: Dc.w $0000
       Dc.w $0000
LAB_0080: Dc.l $00000000
          Dc.w $0000
gadtoolsbase:  Dc.l $00000000

gadtoolsname: Dc.b "gadtools.library",0,0
;========================== errorchecking

errors: MOVE.l #LAB_0087,D0 : TRAP #0
LAB_0084: MOVE.l #LAB_0088,D0 : TRAP #0
LAB_0085:
 MOVE.l #LAB_0089,D0 : TRAP #0
 MOVE.l #LAB_008A,D0 : TRAP #0
 MOVE.l #LAB_008B,D0 : TRAP #0
 MOVE.l #LAB_008C,D0 : TRAP #0
LAB_0086: MOVE.l #LAB_008D,D0 : TRAP #0
LAB_0087: Dc.b "Illegal Menu number",0
LAB_0088: Dc.b "Illegal Menu Item number",0
LAB_0089: Dc.b "Illegal Menu Sub Item number",0
LAB_008A: Dc.b "Uninitialized Shape",0
LAB_008B: Dc.b "Uninitialized Window",0
LAB_008C: Dc.b "Uninitialized GTMenuList - call CreateMenuStrip first!",0
LAB_008D: Dc.b "GTMenu has no data to build GTMenuList from!",0,0

LAB_008E:
 TST.l 4(A3)   ;e88: 4aab0004
 BEQ.w LAB_0086  ;e8c: 6700ff1a
 RTS    ;e90: 4e75
LAB_008F:
 TST.l 4(A3)   ;e92: 4aab0004
 BEQ.w LAB_0086  ;e96: 6700ff10
 RTS    ;e9a: 4e75
LAB_0090:
 MOVE.l (A0),D7   ;e9c: 2e10
 BEQ.w LAB_0091  ;e9e: 67000008
 MOVEA.l D7,A0   ;ea2: 2047
 DBF D0,LAB_0090  ;ea4: 51c8fff6
LAB_0091:
 RTS    ;ea8: 4e75
LAB_0092:
 MOVEA.l A3,A0   ;eaa: 204b
 MOVE.w D1,D0   ;eac: 3001
 BSR.w LAB_0090  ;eae: 6100ffec
 BEQ.w errors  ;eb2: 6700fec4
 RTS    ;eb6: 4e75
LAB_0093:
 EXG A2,A3   ;eb8: c54b
 BSR.w LAB_0094  ;eba: 61000006
 EXG A2,A3   ;ebe: c54b
 RTS    ;ec0: 4e75
LAB_0094:
 BSR.w LAB_0092  ;ec2: 6100ffe6
 LEA 18(A0),A0  ;ec6: 41e80012
 MOVE.w D2,D0   ;eca: 3002
 BSR.w LAB_0090  ;ecc: 6100ffce
 BEQ.w LAB_0084  ;ed0: 6700feae
 RTS    ;ed4: 4e75
LAB_0095:
 EXG A2,A3   ;ed6: c54b
 BSR.w LAB_0096  ;ed8: 61000006
 EXG A2,A3   ;edc: c54b
 RTS    ;ede: 4e75
LAB_0096:
 BSR.w LAB_0094  ;ee0: 6100ffe0
 LEA 28(A0),A0  ;ee4: 41e8001c
 MOVE.w D3,D0   ;ee8: 3003
 BSR.w LAB_0090  ;eea: 6100ffb0
 BEQ.w LAB_0085  ;eee: 6700fe98
 RTS    ;ef2: 4e75
LAB_0097:
 CMPI.w #$ffff,D3  ;ef4: 0c43ffff
 BEQ.w LAB_0093  ;ef8: 6700ffbe
 EXG A2,A3   ;efc: c54b
 BSR.w LAB_0096  ;efe: 6100ffe0
 EXG A2,A3   ;f02: c54b
 RTS    ;f04: 4e75
 MOVEQ #0,D0   ;f06: 7000
 RTS    ;f08: 4e75
