; XTRA
; Embedded .xtra Header
; 
; General Info
; -------------------------------------------------------
; ExePath         = "Blitz3:BlitzLibs/Decompiled/thirdpartylibs"
; ExeFile         = "Rimisclib_new.obj"
; CreateIcon      = 0
; Residents       = "libmacs.res,LVO.res,libjsrs.res"
; 
; Compiler
; -------------------------------------------------------
; StringBuffer    = 100000
; MakeSmallest    = 1
; FuncOptimize    = 1
; Version         = 0.0.0
; NumberOfBuilds  = 26
; 
; Debugger
; -------------------------------------------------------
; CliArgs         = ""
; StackSize       = 8191
; RuntimeDebug    = 0
; DebugInfo       = 0
; CreateDbgFile   = 0
; OverflowCheck   = 0
; AssemblerCheck  = 0
; InterruptCheck  = 0
; AutoRun         = 0
; 
; Editor
; -------------------------------------------------------
; CursorLine      = 269
; CursorColumn    = 1
; LabelSearch     = "init"
; LabelRemark     = 0
; LabelAll        = 1
; LabelCase       = 0
; LabelPosition   = 0
; 
; Blitz Objects
; -------------------------------------------------------
; Max File        = 5
; Max GadgetList  = 5
; Max Shape       = 100
; Max Bank        = 5
; Max MenuList    = 15
; Max GTList      = 15
; Max Palette     = 4
; Max BitMap      = 10
; Max Screen      = 5
; Max IntuiFont   = 5
; Max Window      = 15
; Max BlitzFont   = 4
; Max IconInfo    = 1
; Max MUIObject   = 50
; Max AsyncReq    = 4
; Max Req-Lib     = 5
; Max GTMenuList  = 5
; Max Console     = 5
; Max TCPSock     = 5
; Max Tape        = 5
; Max TagList     = 5
; Max Database    = 16
; Max Sound       = 10
; Max MedModule   = 8
; Max Buffer      = 10
; Max Queue       = 10
; Max Sprite      = 20
; Max Module      = 5
; Max Slice       = 10
; Max Page        = 4
; Max CopList     = 10
; Max PTModule    = 5
; Max Anim        = 10
; Max NChunky     = 2
; Max Chunky      = 20
; Max Stencil     = 5
; Max XBSound     = 10
; /XTRA
; IRA V2.11 (08.02.25) (c)1993-1995 Tim Ruehsen
; (c)2009-2025 Frank Wille, (c)2014-2019 Nicolas Bastien

#ABSEXECBASE = $4
#CIAA_PRA = $BFE001
#CIAA_TDLO = $BFE801
#CIAA_TDMD = $BFE901
#CIAA_TDHI = $BFEA01
#rimisclib = $2f
!libheader{#rimisclib,init,0,finit,0}

Ds.l 15

!astatement
!args
!libs
!subs{do_TimerReset,0,0}
!name{"TimerReset",""}

!afunction{#byte}
!args{#long}
!libs
!subs{do_PortSigBit,0,0}
!name{"PortSigBit","msgport"}

!afunction{#long}
!args
!libs
!subs{do_WorkbenchHere+1,0,0}
!name{"WorkbenchHere",""}

!acommand{#long}
!args{#string,#string,#string}
!libs
!subs{do_EZRequest4+1,0,0}
!args{#string,#string}
!libs
!subs{do_EZRequest3+1,0,0}
!args{#string}
!libs
!subs{do_EZRequest2+1,0,0}
!repargs{3,#byte,#string,#string,#string,#double|#push}
!libs
!subs{do_EZRequest1+1,0,0}
!name{"EZRequest","[title$,]body$[,gadget$] | title$,body$,gadget$[,var..]"}

!afunction{#string}
!args{#string}
!libs
!subs{do_Flip,0,0}
!name{"Flip$","(String$)"} 
; Dc.l $07020000,$00000001,$07000000 ;0194
; Ds.l 1   ;01a0
; Dc.l do_Flip  ;01a4: 00001376
; Ds.l 1   ;01a8
; Dc.l $ffff0000  ;01ac
; Ds.l 1   ;01b0
; Dc.b "Flip$",0
; Dc.b "(String$)",0
 
!astatement
!args{#long}
!libs
!subs{do_InitArgParse,0,0}
!name{"InitArgParse","parameter$ ;stringlen max of 1010 chars allowed"} 
; Dc.l $00010000,$00000001,$03000000 ;01c4
; Ds.l 1   ;01d0
; Dc.l do_InitArgParse  ;01d4: 00000dbc
; Ds.l 1   ;01d8
; Dc.l $ffff0000  ;01dc
; Ds.l 1   ;01e0
; Dc.b "InitArgParse",0
; Dc.b "parameter$ ;stringlen max of 1010 chars allowed",0,0
 
!afunction{#string}
!args
!libs
!subs{do_NextArg,0,0}
!name{"NextArg$","- get next parameter"}
 
!astatement
!args{#long}
!libs{#windowslib,#ia0} ;$8a
!subs{do_EZOutput2,0,0}
!args
!libs
!subs{do_EZOutput1,0,0}
!name{"EZOutput","[win#]"}

!acommand{#long}
!repargs{0,#byte,#double|#push}
!libs
!subs{do_EZRequestArgs+1,0,0}
!name{"EZRequestArgs","args.."}
 
!astatement
!args{#string}
!libs
!subs{do_EZSeparator+1,0,0}
!name{"EZSeparator","char"}

!astatement
!args
!libs
!subs{do_ClickWait,0,0}
!name{"ClickWait",""}

!afunction{#string}
!args
!libs
!subs{do_ProgPath+1,0,0}
!name{"ProgPath$",""}

!afunction{#string}
!args
!libs
!subs{do_ProgDir+1,0,0}
!name{"ProgDir$",""}

!afunction{#string}
!args
!libs
!subs{do_ProgName+1,0,0}
!name{"ProgName$",""}

!afunction{#long}
!args
!libs
!subs{do_FromIDE,0,0}
!name{"FromIDE",""}

!afunction{#string}
!args{#long}
!libs
!subs{do_LtoS,0,0}
!name{"LtoS","(longword) -- convert LONG to STRING"}

!afunction{#string}
!args{#word}
!libs
!subs{do_ASCRaw,0,0}
!name{"ASCRaw","(rawkey)"}

!afunction{#word}
!args{#string}
!libs
!subs{do_RawASC,0,0}
!name{"RawASC","(char)"}

!acommand{#word}
!args
!libs
!subs{do_OpenFontPrefs+1,0,0}
!name{"OpenFontPrefs","[filename$]"}

!astatement
!args
!libs
!subs{do_CloseFontPrefs+1,0,0}
!name{"CloseFontPrefs",""}

!afunction{#word}
!args{#word}
!libs
!subs{do_DefaultFontHeight,0,0}
!name{"DefaultFontHeight","fonttype  (0=Icon,1=System,2=Screen)"}

!afunction{#string}
!args{#word}
!libs
!subs{do_DefaultFontName,0,0}
!name{"DefaultFontName","fonttype  (0=Icon,1=System,2=Screen)"}

!afunction{#string}
!args{#word}
!libs
!subs{do_NextArgChar1,0,0}
!args{#word,#string,#string}
!libs
!subs{do_NextArgChar,0,0}
!name{"NextArgChar$","char[,disablestr,enablestr] - get next parameter up until char"}

!afunction{#long}
!args{#string,#string}
!libs
!subs{do_BInstr,0,0}
!name{"BInstr","(String$,Findstring$)"}
 
init: !nullsub{_libinit,0,0,#doslib,#la6}
finit: !nullsub{_libfinit,0,0}

!libfin

; ================================================================================================
.do_OpenFontPrefs:
  LEA str_FontPrefsFile(PC),A0  ;0686: 41fa0158
  MOVE.l A0,D0   ;068a: 2008
  MOVE.l D0,D7   ;068c: 2e00
  MOVEA.l ABSEXECBASE,A6  ;068e: 2c7900000004
  MOVE.l #$00004000,D0  ;0694: 203c00004000
  MOVE.l #$00000000,D1  ;069a: 223c00000000
  JSR _AllocMem(A6)  ;06a0: 4eaeff3a
  MOVE.l D0,fontPrefsMem  ;06a4: 23c0000007dc

  MOVEA.l _dosbase,A6  ;06aa: 2c790000175c
  MOVE.l D7,D1   ;06b0: 2207
  MOVE.l #$000003ed,D2  ;06b2: 243c000003ed
  JSR _Open(A6)   ;06b8: 4eaeffe2
  MOVE.l D0,fontPrefsFileHandle  ;06bc: 23c0000007d8
  MOVE.l D0,D1   ;06c2: 2200
  BEQ.w do_CloseFontPrefs  ;06c4: 6700005c

  MOVE.l fontPrefsMem,D2
  MOVE.l #$00004000,D3
  JSR _Read(A6)
  MOVE.l fontPrefsFileHandle,D1
  JSR _Close(A6)
  MOVEA.l fontPrefsMem,A0
  CMPI.l #$464f524d,(A0)+   ;"FORM"
  BNE.w do_CloseFontPrefs

  ADDQ.l #4,A0
  CMPI.l #$50524546,(A0)+   ;"PREF"
  BNE.w do_CloseFontPrefs

  CMPI.l #$50524844,(A0)+   ;"PRHD"
  BNE.w do_CloseFontPrefs

  ADDA.l (A0),A0
  ADDQ.l #4,A0
  CMPI.l #$464f4e54,(A0)+   ;"FONT"
  BNE.w do_CloseFontPrefs

  ADDQ.l #4,A0
  MOVE.l A0,ptr_FontSection
  MOVEQ #-1,D0
RTS

.do_CloseFontPrefs:
  TST.l fontPrefsMem  ;0722: 4ab9000007dc
  BEQ.w return_zero  ;0728: 67000f34

  MOVEA.l ABSEXECBASE,A6  ;072c: 2c7900000004
  MOVEA.l fontPrefsMem,A1  ;0732: 2279000007dc
  MOVE.l #$00004000,D0  ;0738: 203c00004000
  JSR _FreeMem(A6)  ;073e: 4eaeff2e
  MOVEQ #0,D0   ;0742: 7000
  CLR.l fontPrefsMem  ;0744: 42b9000007dc
  CLR.l ptr_FontSection  ;074a: 42b9000007d4
RTS    ;0750: 4e75

.do_DefaultFontHeight:
  TST.l ptr_FontSection  ;0752: 4ab9000007d4
  BEQ.w return_zero  ;0758: 67000f04

  MOVEA.l fontPrefsMem,A1  ;075c: 2279000007dc
  ADDA.l #$00004000,A1  ;0762: d3fc00004000
  MOVEA.l ptr_FontSection,A0  ;0768: 2079000007d4
  LAB_0007:
    CMPA.l A0,A1   ;076e: b3c8
    BLT.w return_zero  ;0770: 6d000eec
      MOVE.w 14(A0),D1  ;0774: 3228000e
      CMP.w D0,D1   ;0778: b240
      BEQ.w LAB_0008  ;077a: 6700000c
      ADDA.l #$000000a4,A0  ;077e: d1fc000000a4
  BRA.w LAB_0007  ;0784: 6000ffe8
  LAB_0008:
  MOVE.w 24(A0),D0  ;0788: 30280018
RTS    ;078c: 4e75

.do_DefaultFontName:
  TST.l ptr_FontSection  ;078e: 4ab9000007d4
  BEQ.w return_zero  ;0794: 67000ec8

  MOVEA.l fontPrefsMem,A1  ;0798: 2279000007dc
  ADDA.l #$00004000,A1  ;079e: d3fc00004000
  MOVEA.l ptr_FontSection,A0  ;07a4: 2079000007d4
  LAB_000A:
    CMPA.l A0,A1   ;07aa: b3c8
    BLT.w return_zero  ;07ac: 6d000eb0
      MOVE.w 14(A0),D1  ;07b0: 3228000e
      CMP.w D0,D1   ;07b4: b240
      BEQ.w LAB_000B  ;07b6: 6700000c
        ADDA.l #$000000a4,A0  ;07ba: d1fc000000a4
  BRA.w LAB_000A  ;07c0: 6000ffe8
  LAB_000B:
  LEA 28(A0),A0  ;07c4: 41e8001c
  MOVEQ #-1,D0   ;07c8: 70ff
  LAB_000C:
    ADDQ.l #1,D0   ;07ca: 5280
    MOVE.b (A0)+,(A3)+  ;07cc: 16d8
  BNE.w LAB_000C  ;07ce: 6600fffa
RTS    ;07d2: 4e75

ptr_FontSection: Ds.l 1   ;07d4
fontPrefsFileHandle: Ds.l 1   ;07d8
fontPrefsMem: Ds.l 1   ;07dc
str_FontPrefsFile: Dc.b "ENV:SYS/Font.Prefs",0,0

.do_ASCRaw:
  LEA rawTable(PC),A0  ;07f4: 41fa0028
  MOVE.b 0(A0,D0.W),(A3)+ ;07f8: 16f00000
  MOVE.b #$00,(A3)  ;07fc: 16bc0000
  MOVEQ #1,D0   ;0800: 7001
RTS    ;0802: 4e75

.do_RawASC:
  LEA rawTable(PC),A0  ;0804: 41fa0018
  MOVEA.l D0,A1   ;0808: 2240
  MOVE.b (A1),D1   ;080a: 1211
  MOVEQ #0,D0   ;080c: 7000
  LAB_0013:
    CMP.b 0(A0,D0.W),D1  ;080e: b2300000
    BEQ.w LAB_0014  ;0812: 67000008
      ADDQ.w #1,D0   ;0816: 5240
  BRA.w LAB_0013  ;0818: 6000fff4
  LAB_0014:
RTS    ;081c: 4e75

rawTable:
 Dc.l $27313233,$34353637,$3839302d,$3d5c0030 ;081e
 Dc.l $71776572,$74797569,$6f705b5d,$00313233 ;082e
 Dc.l $61736466,$67686a6b,$6c3b2300,$00343536 ;083e
 Dc.l $007a7863,$76626e6d,$2c2e2f00,$2e373839 ;084e
 Dc.l $2000090d,$001b0800,$00002d00,$1c1d1e1f ;085e
 Dc.l $81828384,$85868788,$898a2829,$2f2a2b8b ;086e
 Ds.l 4   ;087e
 Ds.w 1   ;088e

.do_LtoS:
  MOVEQ #3,D2   ;0890: 7403
  LAB_0017:
    ROL.l #8,D0   ;0892: e198
    CMPI.b #$20,D0   ;0894: 0c000020
    BGE.w LAB_0018  ;0898: 6c000006
      MOVE.b #$80,D0   ;089c: 103c0080 
    LAB_0018:
    MOVE.b D0,(A3)+  ;08a0: 16c0
  DBF D2,LAB_0017  ;08a2: 51caffee
  MOVEQ #4,D0   ;08a6: 7004
RTS    ;08a8: 4e75

.do_FromIDE:
  MOVEA.l ABSEXECBASE,A0  ;08aa: 207900000004
  MOVEA.l 276(A0),A0  ;08b0: 20680114
  MOVEA.l 10(A0),A0  ;08b4: 2068000a
  MOVEQ #5,D0   ;08b8: 7004
  LEA str_taskname(PC),A1  ;08ba: 43fa001a
  LAB_001A:
    CMPM.l (A1)+,(A0)+  ;08be: b189
    BNE.w return_zero  ;08c0: 66000d9c
  DBF D0,LAB_001A  ;08c4: 51c8fff8  
  MOVE.b (A0)+,D0  ;08c8: 1018
  CMPI.b #$73,D0   ;08ca: 0c000063
  BNE.w return_zero  ;08ce: 66000d8e

  MOVEQ #-1,D0   ;08d2: 70ff
RTS    ;08d4: 4e75
str_taskname: Dc.b "AmiBlitz3 Program Process",0

_libinit:
  MOVEA.l ABSEXECBASE,A6  ;08ec: 2c7900000004
  
  LEA str_doslib(PC),A1  ;08f2: 43fa0e7e
  MOVE.l #$00000000,D0  ;08f6: 203c00000000
  JSR _OpenLibrary(A6)  ;08fc: 4eaefdd8
  MOVE.l D0,_dosbase  ;0900: 23c00000175c
 
  LEA str_intuitionlib(PC),A1  ;0906: 43fa0e58
  MOVE.l #$00000000,D0  ;090a: 203c00000000
  JSR _OpenLibrary(A6)  ;0910: 4eaefdd8
  MOVE.l D0,_intuibase  ;0914: 23c000001758
 
  CLR.l fontPrefsMem  ;091a: 42b9000007dc
  CLR.l ptr_FontSection  ;0920: 42b9000007d4
RTS    ;0926: 4e75

_libfinit:
  TST.l _intuibase  ;0928: 4ab900001758
  BEQ.w LAB_001E  ;092e: 67000012
     MOVEA.l _intuibase,A1  ;0932: 227900001758
     MOVEA.l ABSEXECBASE,A6  ;0938: 2c7900000004
     JSR _CloseLibrary(A6)  ;093e: 4eaefe62
  LAB_001E:
  MOVEA.l ABSEXECBASE,A6  ;0942: 2c7900000004
  MOVEA.l _dosbase,A1  ;0948: 22790000175c
  JSR _CloseLibrary(A6)  ;094e: 4eaefe62
  BSR.w do_CloseFontPrefs  ;0952: 6100fdce
RTS    ;0956: 4e75

.do_ProgPath:
  MOVEA.l _dosbase,A6  ;0958: 2c790000175c
  JSR _GetProgramDir(A6)  ;095e: 4eaefda8
  TST.l D0   ;0962: 4a80
  BNE.w LAB_0021  ;0964: 66000016
    MOVE.l #LAB_0034,D1  ;0968: 223c00000c84
    MOVE.l #$000000ff,D2  ;096e: 243c000000ff
    JSR _GetCurrentDirName(A6)  ;0974: 4eaefdcc
    BRA.w LAB_0022  ;0978: 60000014
  LAB_0021:
    MOVE.l D0,D1   ;097c: 2200
    MOVE.l #LAB_0034,D2  ;097e: 243c00000c84
    MOVE.l #$000000ff,D3  ;0984: 263c000000ff
    JSR _NameFromLock(A6)  ;098a: 4eaefe6e
  LAB_0022:

  MOVE.l #LAB_0032,D1  ;098e: 223c00000a80
  MOVE.b #$00,LAB_0032  ;0994: 13fc000000000a80
  MOVE.l #$000000ff,D2  ;099c: 243c000000ff
  JSR _GetProgramName(A6)  ;09a2: 4eaefdc0
  TST.b LAB_0032  ;09a6: 4a3900000a80
  BNE.w LAB_0024  ;09ac: 66000024
  MOVEA.l ABSEXECBASE,A0  ;09b0: 207900000004
  MOVEA.l 276(A0),A0  ;09b6: 20680114
  MOVEA.l 10(A0),A0  ;09ba: 2068000a
  LEA LAB_0033(PC),A1  ;09be: 43fa01c2
 LAB_0023:
  MOVE.b (A0)+,(A1)+  ;09c2: 12d8
  BNE.w LAB_0023  ;09c4: 6600fffc
  LEA LAB_0034(PC),A0  ;09c8: 41fa02ba
  MOVEQ #-1,D0   ;09cc: 70ff
  BRA.w LAB_0029  ;09ce: 6000003c
 LAB_0024:
  LEA LAB_0032(PC),A1  ;09d2: 43fa00ac
  LEA LAB_0033(PC),A0  ;09d6: 41fa01aa
 LAB_0025:
  MOVE.b (A1)+,D0  ;09da: 1019
  BNE.w LAB_0025  ;09dc: 6600fffc
  SUBQ.w #1,A1   ;09e0: 5349
 LAB_0026:
  MOVE.b -(A1),D0  ;09e2: 1021
  BEQ.w LAB_0027  ;09e4: 67000016
  CMPI.b #$3a,D0   ;09e8: 0c00003a
  BEQ.w LAB_0027  ;09ec: 6700000e
  CMPI.b #$2f,D0   ;09f0: 0c00002f
  BEQ.w LAB_0027  ;09f4: 67000006
  BRA.w LAB_0026  ;09f8: 6000ffe8
 LAB_0027:
  ADDQ.w #1,A1   ;09fc: 5249
 LAB_0028:
  MOVE.b (A1)+,D0  ;09fe: 1019
  MOVE.b D0,(A0)+  ;0a00: 10c0
  BNE.w LAB_0028  ;0a02: 6600fffa
  LEA LAB_0034(PC),A0  ;0a06: 41fa027c
  MOVEQ #-1,D0   ;0a0a: 70ff
 LAB_0029:
  ADDQ.l #1,D0   ;0a0c: 5280
  MOVE.b (A0)+,(A3)+  ;0a0e: 16d8
  BNE.w LAB_0029  ;0a10: 6600fffa
  SUBQ.l #1,A3   ;0a14: 538b
  SUBQ.l #1,D0   ;0a16: 5380
  CMPI.b #$3a,-1(A3)  ;0a18: 0c2b003affff
  BEQ.w LAB_002A  ;0a1e: 67000008
  ADDQ.l #1,D0   ;0a22: 5280
  MOVE.b #$2f,(A3)+  ;0a24: 16fc002f
 LAB_002A:
  LEA LAB_0033(PC),A0  ;0a28: 41fa0158
 LAB_002B:
  ADDQ.l #1,D0   ;0a2c: 5280
  MOVE.b (A0)+,D1  ;0a2e: 1218
  MOVE.b D1,(A3)+  ;0a30: 16c1
  TST.b D1   ;0a32: 4a01
  BNE.w LAB_002B  ;0a34: 6600fff6
RTS    ;0a38: 4e75

.do_ProgDir:
  TST.b LAB_0034  ;0a3a: 4a3900000c84
  BNE.w LAB_002D  ;0a40: 6600000a
    MOVE.l A3,-(A7)  ;0a44: 2f0b
    BSR.w do_ProgPath  ;0a46: 6100ff10
    MOVEA.l (A7)+,A3  ;0a4a: 265f
  LAB_002D:
  LEA LAB_0034(PC),A0  ;0a4c: 41fa0236
  MOVEQ #-1,D0   ;0a50: 70ff
  LAB_002E:
    ADDQ.l #1,D0   ;0a52: 5280
    MOVE.b (A0)+,(A3)+  ;0a54: 16d8
  BNE.w LAB_002E  ;0a56: 6600fffa
RTS    ;0a5a: 4e75

.do_ProgName:
  TST.b LAB_0033  ;0a5c: 4a3900000b82
  BNE.w LAB_0030  ;0a62: 6600000a
    MOVE.l A3,-(A7)  ;0a66: 2f0b
    BSR.w do_ProgPath  ;0a68: 6100feee
    MOVEA.l (A7)+,A3  ;0a6c: 265f
  LAB_0030:
  LEA LAB_0033(PC),A0  ;0a6e: 41fa0112
  MOVEQ #-1,D0   ;0a72: 70ff
  LAB_0031:
    ADDQ.l #1,D0   ;0a74: 5280
    MOVE.b (A0)+,(A3)+  ;0a76: 16d8
  BNE.w LAB_0031  ;0a78: 6600fffa
RTS

Ds.w 1
LAB_0032: Ds.l 64

Ds.w 1
LAB_0033: Ds.l 64

Ds.w 1
LAB_0034: Ds.l 66

.do_ClickWait:
    MOVE.b CIAA_PRA,D0  ;0d8c: 103900bfe001
    BTST #6,D0   ;0d92: 08000006
  BNE.w do_ClickWait  ;0d96: 6600fff4

  MOVE.w #$31df,D0  ;0d9a: 303c31df
  LAB_0036:
  DBF D0,LAB_0036  ;0d9e: 51c8fffe

  LAB_0037:
    MOVE.b CIAA_PRA,D0  ;0da2: 103900bfe001
    BTST #6,D0   ;0da8: 08000006
  BEQ.w LAB_0037  ;0dac: 6700fff4
RTS    ;0db0: 4e75

.do_EZSeparator:
  MOVEA.l D0,A0   ;0db2: 2040
  MOVE.b (A0)+,LAB_0090  ;0db4: 13d80000177f
RTS    ;0dba: 4e75

.do_InitArgParse:
  LEA LAB_003E(PC),A1  ;0dbc: 43fa003c
  MOVEA.l D0,A0   ;0dc0: 2040
  MOVE.l #$000003f2,D0  ;0dc2: 203c000003f2
  LAB_003A:
    SUBQ.l #1,D0   ;0dc8: 5380
    BEQ.w LAB_003B  ;0dca: 67000008
      MOVE.b (A0)+,(A1)+  ;0dce: 12d8
  BNE.w LAB_003A  ;0dd0: 6600fff6
  LAB_003B:
  CLR.b (A1)+   ;0dd4: 4219
  CLR.b (A1)+   ;0dd6: 4219
  CLR.b (A1)+   ;0dd8: 4219
  CLR.b (A1)+   ;0dda: 4219
  MOVE.l #LAB_003E,LAB_003C ;0ddc: 23fc00000dfa00000df2
  MOVE.l #LAB_003E,LAB_003D ;0de6: 23fc00000dfa00000df6
RTS    ;0df0: 4e75

LAB_003C: Ds.l 1   ;0df2
LAB_003D: Ds.l 1   ;0df6
LAB_003E: Ds.l 256   ;0dfa

.do_NextArgChar1:
  MOVE.b D0,D1   ;11fa: 1200
  MOVEQ #0,D0   ;11fc: 7000
  MOVEA.l LAB_003D(PC),A0  ;11fe: 207afbf6
  LAB_0040:
  MOVE.b (A0)+,D2  ;1202: 1418
  ;BEQ.S LAB_0041  ;1204: 670a
  Dc.w $670a
  CMP.b D2,D1   ;1206: b202
  ;BEQ.S LAB_0042  ;1208: 6708
  Dc.w $6708
  MOVE.b D2,(A3)+  ;120a: 16c2
  ADDQ.l #1,D0   ;120c: 5280
  ;BRA.S LAB_0040  ;120e: 60f2
  Dc.w $60f2
  LAB_0041:
  SUBQ.l #1,A0   ;1210: 5388
  LAB_0042:
  MOVE.l A0,LAB_003D  ;1212: 23c800000df6
RTS    ;1218: 4e75

.do_NextArgChar:
 MOVE.l A2,-(A7)  ;121a: 2f0a
 MOVE.l A3,-(A7)  ;121c: 2f0b
 MOVE.l D1,-(A7)  ;121e: 2f01
 MOVEA.l D1,A1   ;1220: 2241
 MOVEA.l D2,A2   ;1222: 2442
 MOVE.b D0,D1   ;1224: 1200
 MOVEQ #0,D0   ;1226: 7000
 CLR.b LAB_0086  ;1228: 4239000016aa
 MOVE.l #$00000000,LAB_0087 ;122e: 23fc00000000000016ac
 MOVEA.l LAB_003D(PC),A0  ;1238: 207afbbc
LAB_0044:
 MOVEM.l A1-A2,-(A7)  ;123c: 48e70060
 MOVE.b (A0)+,D2  ;1240: 1418
 BEQ.w LAB_004A  ;1242: 67000080
LAB_0045:
 TST.b (A1)   ;1246: 4a11
 BEQ.w LAB_0047  ;1248: 67000030
 CMP.b (A1)+,D2  ;124c: b419
 BNE.w LAB_0045  ;124e: 6600fff6
 CMPI.b #$22,D2   ;1252: 0c020022
 BNE.w LAB_0046  ;1256: 6600000e
 BCHG #0,LAB_0086  ;125a: 08790000000016aa
 BRA.w LAB_0048  ;1262: 6000003a
LAB_0046:
 TST.b LAB_0086  ;1266: 4a39000016aa
 BNE.w LAB_0047  ;126c: 6600000c
 ADDQ.w #1,LAB_0087  ;1270: 5279000016ac
 BRA.w LAB_0048  ;1276: 60000026
LAB_0047:
 TST.b (A2)   ;127a: 4a12
 BEQ.w LAB_0048  ;127c: 67000020
 CMP.b (A2)+,D2  ;1280: b41a
 BNE.w LAB_0047  ;1282: 6600fff6
 CMPI.b #$22,D2   ;1286: 0c020022
 BEQ.w LAB_0048  ;128a: 67000012
 TST.b LAB_0086  ;128e: 4a39000016aa
 BNE.w LAB_0048  ;1294: 66000008
 SUBQ.w #1,LAB_0087  ;1298: 5379000016ac
LAB_0048:
 TST.b LAB_0086  ;129e: 4a39000016aa
 BNE.w LAB_0049  ;12a4: 66000012
 TST.l LAB_0087  ;12a8: 4ab9000016ac
 BNE.w LAB_0049  ;12ae: 66000008
 CMP.b D2,D1   ;12b2: b202
 BEQ.w LAB_004B  ;12b4: 67000010
LAB_0049:
 MOVE.b D2,(A3)+  ;12b8: 16c2
 MOVEM.l (A7)+,A1-A2  ;12ba: 4cdf0600
 ADDQ.l #1,D0   ;12be: 5280
 BRA.w LAB_0044  ;12c0: 6000ff7a
LAB_004A:
 SUBQ.l #1,A0   ;12c4: 5388
LAB_004B:
 MOVEM.l (A7)+,A1-A2  ;12c6: 4cdf0600
 MOVEA.l (A7)+,A3  ;12ca: 265f
 MOVEA.l (A7)+,A1  ;12cc: 225f
 MOVE.l D0,D1   ;12ce: 2200
 TST.l D0   ;12d0: 4a80
 BEQ.w LAB_004D  ;12d2: 6700000a
LAB_004C:
 MOVE.b (A1)+,(A3)+  ;12d6: 16d9
 SUBQ.l #1,D1   ;12d8: 5381
 BNE.w LAB_004C  ;12da: 6600fffa
LAB_004D:
 MOVE.l A0,LAB_003D  ;12de: 23c800000df6
 ;MOVEA.l (A7)+,A2  ;12e4: 4cdf0400 MOVEM.l (a7)+,a2
 Dc.l $4cdf0400
RTS    ;12e8: 4e75

do_NextArg:
 MOVEQ #0,D0   ;12ea: 7000
 TST.l LAB_003D  ;12ec: 4ab900000df6
 BNE.w LAB_004F  ;12f2: 66000004
RTS    ;12f6: 4e75

LAB_004F:
 MOVEA.l LAB_003D,A0  ;12f8: 207900000df6
 MOVE.l A3,D2   ;12fe: 240b
 MOVEQ #0,D7   ;1300: 7e00
LAB_0050:
 MOVE.b (A0),D1   ;1302: 1210
 BEQ.w LAB_0057  ;1304: 67000066
 CMPI.b #$20,D1   ;1308: 0c010020
 BNE.w LAB_0051  ;130c: 66000006
 ADDQ.l #1,A0   ;1310: 5288
 ;BRA.S LAB_0050  ;1312: 60ee
 Dc.w $60ee
LAB_0051:
 MOVE.b (A0)+,D0  ;1314: 1018
 BEQ.w LAB_0056  ;1316: 67000046
 CMPI.b #$22,D0   ;131a: 0c000022
 BEQ.w LAB_0052  ;131e: 67000010
 CMPI.b #$20,D0   ;1322: 0c000020
 BEQ.w LAB_0056  ;1326: 67000036
 MOVE.b D0,(A3)+  ;132a: 16c0
 BRA.w LAB_0051  ;132c: 6000ffe6
LAB_0052:
 ADDQ.l #1,D7   ;1330: 5287
LAB_0053:
 MOVE.b (A0)+,D0  ;1332: 1018
 BEQ.w LAB_0056  ;1334: 67000028
 CMPI.b #$22,D0   ;1338: 0c000022
 BEQ.w LAB_0054  ;133c: 67000008
 MOVE.b D0,(A3)+  ;1340: 16c0
 BRA.w LAB_0053  ;1342: 6000ffee
LAB_0054:
 ADDQ.l #1,D7   ;1346: 5287
 BTST #0,D7   ;1348: 08070000
 BNE.w LAB_0055  ;134c: 6600000a
 CMPI.b #$22,(A0)  ;1350: 0c100022
 BNE.w LAB_0056  ;1354: 66000008
LAB_0055:
 MOVE.b (A0)+,(A3)+  ;1358: 16d8
 BRA.w LAB_0053  ;135a: 6000ffd6
LAB_0056:
 MOVE.l A3,D3   ;135e: 260b
 SUB.l D2,D3   ;1360: 9682
 MOVE.l D3,D0   ;1362: 2003
 MOVE.l A0,LAB_003D  ;1364: 23c800000df6
RTS    ;136a: 4e75

LAB_0057:
 MOVEQ #0,D0   ;136c: 7000
 CLR.l LAB_003D  ;136e: 42b900000df6
RTS    ;1374: 4e75

.do_Flip:
  MOVEA.l A3,A0   ;1376: 204b
  MOVEA.l A3,A1   ;1378: 224b
  MOVE.l -(A2),D0  ;137a: 2022
  MOVE.l D0,D1   ;137c: 2200
  SUBA.l D1,A0   ;137e: 91c1
  SUBQ.l #1,A0   ;1380: 5388
  SUBQ.l #2,A3   ;1382: 558b
  LSR.l #1,D1   ;1384: e289
  SUBQ.l #1,D1   ;1386: 5381
  LAB_0059:
    MOVE.b (A0),D2   ;1388: 1410
    MOVE.b (A3),(A0)+  ;138a: 10d3
    MOVE.b D2,(A3)   ;138c: 1682
    SUBQ.l #1,A3   ;138e: 538b
  DBF D1,LAB_0059  ;1390: 51c9fff6
  MOVEA.l A1,A3   ;1394: 2649
RTS    ;1396: 4e75

.do_EZOutput1:
  MOVE.l #$00000000,LAB_007E ;1398: 23fc0000000000001650
RTS    ;13a2: 4e75

.do_EZOutput2:
  MOVE.l (A0),LAB_007E  ;13a4: 23d000001650
RTS    ;13aa: 4e75

.do_EZRequestArgs:
 ANDI.l #$0000ffff,D7  ;13ac: 02870000ffff
 MOVE.l D7,LAB_0089  ;13b2: 23c700001750
 SUBQ.l #1,D7   ;13b8: 5387
 MOVEQ #0,D0   ;13ba: 7000
 LEA LAB_0088(PC),A1  ;13bc: 43fa02f2
 MOVE.l A1,LAB_0072  ;13c0: 23c9000015ac
 LEA LAB_0075(PC),A0  ;13c6: 41fa01f0
 MOVE.l A0,LAB_0074  ;13ca: 23c8000015b4
 MOVE.b #$00,LAB_008F  ;13d0: 13fc00000000177e
LAB_005D:
 TST.b LAB_008F  ;13d8: 4a390000177e
 BEQ.w LAB_005E  ;13de: 67000008
 MOVE.b LAB_0090,(A1)+  ;13e2: 12f90000177f
LAB_005E:
 Dc.w $13fc   ;13e8
 Dc.w $ffff   ;13ea
 Dc.l LAB_008F  ;13ec: 0000177e
 MOVE.w -(A2),D0  ;13f0: 3022
 CMPI.w #$0007,D0  ;13f2: 0c400007
 BEQ.w LAB_005F  ;13f6: 6700001c
 CMPI.w #$0003,D0  ;13fa: 0c400003
 BNE.w LAB_0060  ;13fe: 66000024
 MOVE.l -(A2),(A0)+  ;1402: 20e2
 MOVE.w #$256c,(A1)+  ;1404: 32fc256c
 MOVE.b #$64,(A1)+  ;1408: 12fc0064
 DBF D7,LAB_005D  ;140c: 51cfffca
 BRA.w LAB_0063  ;1410: 6000005a
LAB_005F:
 MOVE.w #$2573,(A1)+  ;1414: 32fc2573
 SUBQ.l #4,A2   ;1418: 598a
 MOVE.l -(A2),(A0)+  ;141a: 20e2
 DBF D7,LAB_005D  ;141c: 51cfffba
 BRA.w LAB_0063  ;1420: 6000004a
LAB_0060:
 CMPI.w #$0002,D0  ;1424: 0c400002
 BEQ.w LAB_0062  ;1428: 67000038
 CMPI.w #$0001,D0  ;142c: 0c400001
 BEQ.w LAB_0062  ;1430: 67000030
 CMPI.w #$0004,D0  ;1434: 0c400004
 BEQ.w LAB_0061  ;1438: 6700000c
 MOVE.l -(A2),D0  ;143c: 2022
 ;Dc.w $4eb9   ;143e
 ;Dc.l SECSTRT_0-2147429631 ;1440: 8000d301
 ALibJsr $d301
 MOVE.l D0,(A2)+  ;1444: 24c0
LAB_0061:
 MOVE.l -(A2),D6  ;1446: 2c22
 SWAP D6   ;1448: 4846
 ANDI.l #$0000ffff,D6  ;144a: 02860000ffff
 MOVE.w #$256c,(A1)+  ;1450: 32fc256c
 Dc.w $12fc   ;1454
 MOVE.l -(A4),8390(A2)  ;1456: 256420c6
 DBF D7,LAB_005D  ;145a: 51cfff7c
 BRA.w LAB_0063  ;145e: 6000000c
LAB_0062:
 MOVE.w -(A2),(A0)+  ;1462: 30e2
 MOVE.w #$2564,(A1)+  ;1464: 32fc2564
 DBF D7,LAB_005D  ;1468: 51cfff6e
LAB_0063:
 LEA LAB_008A(PC),A0  ;146c: 41fa02e6
 MOVE.l A0,LAB_0073  ;1470: 23c8000015b0
 MOVE.l #$00000000,LAB_0071 ;1476: 23fc00000000000015a8
 BRA.w LAB_006D  ;1480: 600000de

.do_EZRequest1:
 SUBA.l #$0000000c,A2  ;1484: 95fc0000000c
 MOVE.l D0,LAB_0071  ;148a: 23c0000015a8
 MOVE.l D1,LAB_0072  ;1490: 23c1000015ac
 MOVE.l D2,LAB_0073  ;1496: 23c2000015b0
 LEA LAB_0075(PC),A0  ;149c: 41fa011a
 MOVE.l A0,LAB_0074  ;14a0: 23c8000015b4
 SUBQ.w #1,D7   ;14a6: 5347
 BSR.w LAB_0065  ;14a8: 61000006
 BRA.w LAB_006D  ;14ac: 600000b2
LAB_0065:
 MOVE.w -(A2),D0  ;14b0: 3022
 CMPI.w #$0007,D0  ;14b2: 0c400007
 BEQ.w LAB_0066  ;14b6: 67000012
 CMPI.w #$0003,D0  ;14ba: 0c400003
 BNE.w LAB_0067  ;14be: 66000014
 MOVE.l -(A2),(A0)+  ;14c2: 20e2
 DBF D7,LAB_0065  ;14c4: 51cfffea
RTS    ;14c8: 4e75

LAB_0066:
 SUBQ.l #4,A2   ;14ca: 598a
 MOVE.l -(A2),(A0)+  ;14cc: 20e2
 DBF D7,LAB_0065  ;14ce: 51cfffe0
RTS    ;14d2: 4e75

LAB_0067:
 CMPI.w #$0002,D0  ;14d4: 0c400002
 BEQ.w LAB_0069  ;14d8: 6700002e
 CMPI.w #$0001,D0  ;14dc: 0c400001
 BEQ.w LAB_0069  ;14e0: 67000026
 CMPI.w #$0004,D0  ;14e4: 0c400004
 BEQ.w LAB_0068  ;14e8: 6700000c
 MOVE.l -(A2),D0  ;14ec: 2022
 ;Dc.w $4eb9   ;14ee
 ;Dc.l SECSTRT_0-2147429631 ;14f0: 8000d301
 ALibJsr $d301
 MOVE.l D0,(A2)+  ;14f4: 24c0
LAB_0068:
 MOVE.l -(A2),D6  ;14f6: 2c22
 SWAP D6   ;14f8: 4846
 ANDI.l #$0000ffff,D6  ;14fa: 02860000ffff
 MOVE.l D6,(A0)+  ;1500: 20c6
 DBF D7,LAB_0065  ;1502: 51cfffac
RTS    ;1506: 4e75

LAB_0069:
 MOVE.w -(A2),(A0)+  ;1508: 30e2
 DBF D7,LAB_0065  ;150a: 51cfffa4
RTS    ;150e: 4e75

.do_EZRequest2:
 LEA LAB_008A(PC),A0  ;1510: 41fa0242
 MOVE.l A0,D1   ;1514: 2208
 MOVE.l #$00000000,LAB_0074 ;1516: 23fc00000000000015b4
do_EZRequest3:
 MOVE.l D1,LAB_0073  ;1520: 23c1000015b0
 MOVE.l D0,LAB_0072  ;1526: 23c0000015ac
 MOVE.l #$00000000,LAB_0071 ;152c: 23fc00000000000015a8
 MOVE.l #$00000000,LAB_0074 ;1536: 23fc00000000000015b4
 BRA.w LAB_006D  ;1540: 6000001e
do_EZRequest4:
 MOVE.l D0,LAB_0071  ;1544: 23c0000015a8
 MOVE.l D1,LAB_0072  ;154a: 23c1000015ac
 MOVE.l D2,LAB_0073  ;1550: 23c2000015b0
 MOVE.l #$00000000,LAB_0074 ;1556: 23fc00000000000015b4
LAB_006D:
 MOVEA.l _intuibase,A6  ;1560: 2c7900001758
 MOVEA.l LAB_0072,A0  ;1566: 2079000015ac
LAB_006E:
 MOVE.b (A0)+,D0  ;156c: 1018
 BEQ.w LAB_006F  ;156e: 67000014
 CMPI.b #$7c,D0   ;1572: 0c00007c
 BNE.w LAB_006E  ;1576: 6600fff4
 MOVE.b #$0a,-1(A0)  ;157a: 117c000affff
 BRA.w LAB_006E  ;1580: 6000ffea
LAB_006F:
 MOVEA.l LAB_007E,A0  ;1584: 207900001650
 LEA LAB_0070(PC),A1  ;158a: 43fa0014
 MOVEA.l #$00000000,A2  ;158e: 247c00000000
 MOVEA.l LAB_0074,A3  ;1594: 2679000015b4
 JSR -588(A6)  ;159a: 4eaefdb4
RTS    ;159e: 4e75

LAB_0070: Dc.l $00000014  ;15a0
Ds.l 1   ;15a4
LAB_0071: Ds.l 1   ;15a8
LAB_0072: Ds.l 1   ;15ac
LAB_0073: Ds.l 1   ;15b0
LAB_0074: Ds.l 1   ;15b4
LAB_0075: Ds.l 16   ;15b8

.do_WorkbenchHere:
  MOVEA.l _intuibase,A0  ;15f8: 207900001758
  MOVEA.l D0,A0   ;15fe: 2040
  MOVEA.l 60(A0),A0  ;1600: 2068003c
  MOVE.l A0,LAB_007D  ;1604: 23c80000164c
  LAB_0077:
  LEA str_workbench(PC),A2  ;160a: 45fa0036
  MOVEA.l 22(A0),A1  ;160e: 22680016
  LAB_0078:
    MOVE.b (A1)+,D0  ;1612: 1019
    BEQ.w LAB_007A  ;1614: 6700001e
  CMP.b (A2),D0   ;1618: b012
  BNE.w LAB_0078  ;161a: 6600fff6
  ADDQ.l #1,A2   ;161e: 528a
  LAB_0079:
  TST.b (A2)   ;1620: 4a12
  BEQ.w LAB_007B  ;1622: 6700001a
  TST.b (A1)   ;1626: 4a11
  BEQ.w LAB_0077  ;1628: 6700ffe0
  MOVE.b (A2)+,D0  ;162c: 101a
  CMP.b (A1)+,D0  ;162e: b019
  BEQ.w LAB_0079  ;1630: 6700ffee
  LAB_007A:
  MOVEA.l (A0),A0   ;1634: 2050
  BRA.w LAB_0077  ;1636: 6000ffd2
  MOVEQ #0,D0   ;163a: 7000
RTS    ;163c: 4e75

LAB_007B:
 MOVEQ #-1,D0   ;163e: 70ff
RTS    ;1640: 4e75

str_workbench: Dc.b "Workbench",0
LAB_007D: Ds.l 1   ;164c
LAB_007E: Ds.l 1   ;1650

.do_PortSigBit:
  MOVEA.l D0,A0   ;1654: 2040
  MOVEQ #0,D0   ;1656: 7000
  MOVE.b 15(A0),D0  ;1658: 1028000f
RTS    ;165c: 4e75

.return_zero:
  MOVEQ #0,D0   ;165e: 7000
RTS    ;1660: 4e75

do_TimerReset:
  MOVE.b #$00,CIAA_TDHI  ;1662: 13fc000000bfea01
  MOVE.b #$00,CIAA_TDMD  ;166a: 13fc000000bfe901
  MOVE.b #$00,CIAA_TDLO  ;1672: 13fc000000bfe801
RTS    ;167a: 4e75

.do_BInstr:
 MOVE.l -(A2),D7  ;167c: 2e22
 MOVEA.l D0,A0   ;167e: 2040
 MOVE.l D0,D6   ;1680: 2c00
 MOVEA.l D1,A1   ;1682: 2241
 ADDA.l D7,A0   ;1684: d1c7
LAB_0083:
 SUBQ.l #1,A0   ;1686: 5388
 CMP.l A0,D6   ;1688: bc88
 ;BGT.S LAB_0085  ;168a: 6e1a
 Dc.w $6e1a
 MOVEA.l A0,A2   ;168c: 2448
 MOVEA.l A1,A3   ;168e: 2649
LAB_0084:
 TST.b (A2)   ;1690: 4a12
 ;BEQ.S LAB_0083  ;1692: 67f2
 Dc.w $67f2
 MOVE.b (A2)+,D0  ;1694: 101a
 CMP.b (A3)+,D0  ;1696: b01b
 ;BNE.S LAB_0083  ;1698: 66ec
 Dc.w $66ec
 TST.b (A3)   ;169a: 4a13
 ;BNE.S LAB_0084  ;169c: 66f2
 Dc.w $66f2
 SUBA.l D6,A0   ;169e: 91c6
 MOVE.l A0,D0   ;16a0: 2008
 ADDQ.l #1,D0   ;16a2: 5280
 RTS    ;16a4: 4e75
LAB_0085:
 MOVEQ #0,D0   ;16a6: 7000
RTS    ;16a8: 4e75

LAB_0086: Ds.w 1   ;16aa
LAB_0087: Ds.l 1   ;16ac
LAB_0088: Ds.l 40   ;16b0
LAB_0089: Ds.l 1   ;1750
LAB_008A: Dc.l $4f6b0000  ;1754
_intuibase: Ds.l 1   ;1758
_dosbase: Ds.l 1   ;175c
str_intuitionlib: Dc.b "intuition.library",0
str_doslib: Dc.b "dos.library",0
LAB_008F: Ds.b 1   ;177e
LAB_0090: Dc.b $7c   ;177f
