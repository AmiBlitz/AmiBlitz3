; XTRA
; Embedded .xtra Header
; 
; General Info
; -------------------------------------------------------
; ExePath         = "Development:AmiBlitz3/BlitzLibs/Decompiled/baselibs"
; ExeFile         = "windowslib_ab38version.obj"
; CreateIcon      = 0
; Residents       = "libmacs.res,LVO.res,amigaLibs.res,libjsrs.res"
; 
; Compiler
; -------------------------------------------------------
; StringBuffer    = 100000
; MakeSmallest    = 1
; FuncOptimize    = 1
; Version         = 0.0.0
; NumberOfBuilds  = 15
; 
; Debugger
; -------------------------------------------------------
; CliArgs         = ""
; StackSize       = 8192
; RuntimeDebug    = 0
; DebugInfo       = 0
; CreateDbgFile   = 0
; OverflowCheck   = 0
; AssemblerCheck  = 0
; InterruptCheck  = 0
; AutoRun         = 0
; 
; Editor
; -------------------------------------------------------
; CursorLine      = 1
; CursorColumn    = 48
; LabelSearch     = ""
; LabelRemark     = 0
; LabelAll        = 0
; LabelCase       = 0
; LabelPosition   = 0
; 
; Blitz Objects
; -------------------------------------------------------
; Max File        = 100
; Max GadgetList  = 100
; Max Shape       = 200
; Max Bank        = 1
; Max MenuList    = 100
; Max GTList      = 100
; Max Palette     = 4
; Max BitMap      = 10
; Max Screen      = 5
; Max IntuiFont   = 10
; Max BlitzFont   = 1
; Max Window      = 100
; Max IconInfo    = 1
; Max MUIObject   = 50
; Max AsyncReq    = 4
; Max Req-Lib     = 5
; Max GTMenuList  = 100
; Max Console     = 5
; Max TCPSock     = 5
; Max Tape        = 5
; Max TagList     = 5
; Max Database    = 16
; Max Sound       = 10
; Max MedModule   = 8
; Max Buffer      = 10
; Max Queue       = 10
; Max Sprite      = 20
; Max Module      = 5
; Max Slice       = 10
; Max Page        = 4
; Max CopList     = 10
; Max PTModule    = 5
; Max Anim        = 10
; Max NChunky     = 50
; Max Chunky      = 20
; Max Stencil     = 5
; Max XBSound     = 10
; /XTRA
; IRA V2.10 (04.12.23) (c)1993-1995 Tim Ruehsen
; (c)2009-2015 Frank Wille, (c)2014-2019 Nicolas Bastien

EXT_0000 EQU $0
ABSEXECBASE EQU $4

!libheader{#windowslib,init,#long,finit,errors}  ;now returns address of port!
 
!acommand{#long}
!args{#word,#word|#push,#word|#push,#word|#push,#word|#push,#long,#string,#word,#word}
!libs{#windowslib,#ia3,#screenslib,#ua1,#windowslib,$0604,#intuitionlib,#la6}
!subs{dowindow2+1,0,0}
!args{#word,#word|#push,#word|#push,#word|#push,#word|#push,#long,#string,#word,#word,#word}
!libs{#windowslib,#ia3,#screenslib,#ua1,#gadgetslib,$1085,#windowslib,$0604,#intuitionlib,#la6}
!subs{dowindow+1,0,0}   ;*****
!name{"Window","Window#,X,Y,Width,Height,Flags,Title$,Dpen,Bpen[,GadgetList#]",_toke}

!acommand{3}
!args
!libs
!subs{dowaitevent+1,0,0}
!name{"WaitEvent",""}   ;*****

!afunction{3} ;return IDCMP
!args
!libs
!subs{doevent+1,0,0}
!name{"Event",""}   ;*****

!afunction{2}
!args
!libs
!subs{dogadgethit,0,0}
!name{"GadgetHit",""}   ;*****

!afunction{2}
!args
!libs
!subs{doeventwindow,0,0}
!name{"EventWindow",""}

!astatement
!args{3}
!libs
!subs{dowindowidcmp,idcmpchk,0}
!name{"DefaultIDCMP","IDCMP_Flags"} ;*****

!afunction{2}
!args
!libs
!subs{domenuhit,0,0}
!name{"MenuHit",""} ;*****

!afunction{2}
!args
!libs
!subs{doitemhit,0,0}
!name{"ItemHit",""} ;*****
 
!afunction{2}
!args
!libs
!subs{dosubhit,0,0}
!name{"SubHit",""}  ;*****

!acommand{#long}
!args{2}
!libs{#windowslib,#ua1,#intuifontlib,$1080,#graphicslib,#la6}
!subs{dowfont+1,wfontchk,0}
!args{2,3}
!libs{#windowslib,#ua1,#intuifontlib,$1080,#graphicslib,#la6}
!subs{dowfont2+1,wfontchk,0}
!name{"WindowFont","IntuiFont# [,SoftStyle] ;work as function too with return ifont Addr"}    ;*****

!astatement
!args{2,2,2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowplot+1,wchk,0}
!name{"WPlot","X,Y,Colour"} ;*****

!astatement
!args{2,2,2,2,2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowbox+1,wchk,0}
!name{"WBox","X1,Y1,X2,Y2,Colour"}    ;*****

!astatement
!args{2,2,2,2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowcircle+1,wchk,0}
!name{"WCircle","X,Y,Radius,Colour"}    ;*****

!astatement
!args{2,2,2,2,2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowellipse+1,wchk,0}  ;*****
!name{"WEllipse","X,Y,X Radius,Y Radius,Colour"}

!astatement
!args
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowcls+1,wchk,0}
!args{2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowcls2+1,wchk,0}
!name{"WCls","[Colour]"}    ;*****

!astatement
!args{2,2}
!libs{#windowslib,#ua1}
!subs{dowlocate,wchk,0}
!name{"WLocate","Cursor x,Cursor y"}

!astatement
!args{2}
!libs{#windowslib,#ia3}
!subs{doinwindow,0,0}
!name{"WindowInput","Window#"}

!astatement
!args{2}
!libs{#windowslib,#ia3}
!subs{dooutwindow,0,0}
!name{"WindowOutput","Window#"}
 
!afunction{3}
!args
!libs
!subs{doqual,0,0}
!name{"Qualifier",""}   ;*****
 
!afunction{2}
!args
!libs
!subs{dorawkey,0,0}
!name{"RawKey",""}  ;*****

!astatement
!args{2}
!libs
!subs{docursor,0,0} ;*****
!name{"Cursor","Thickness : <0 - block, >=0 - underline thickness"}

!afunction{2}
!args
!libs
!subs{doeditat,0,0}
!name{"Editat",""}  ;*****

!astatement
!args
!libs
!subs{doeditfrom,0,0}
!args{2}
!libs
!subs{doeditfrom2,0,0}
!name{"EditFrom","[Characterpos]"}  ;***** 

!afunction{2}
!args
!libs
!subs{doeditexit,0,0}
!name{"EditExit",""}    ;***** 

!astatement
!args{2,2,2,2,2,2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowscroll+1,wchk,0}
!args{2,2,2,2,2,2,2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowscroll2+1,wchk,0}
!name{"WScroll","X1,Y1,X2,Y2,Delta X,Delta Y[,colour]"}  ;*****

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowmousex,wchk,0}
!name{"WMouseX",""} ;*****
 
!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowmousey,wchk,0}
!name{"WMouseY",""} ;*****

!astatement
!args{2}
!libs
!subs{dosetpens,0,0}
!args{2,2}
!libs
!subs{dosetpens2,0,0}   ;*****
!name{"WColour","Foreground Colour[,Background Colour]"}

!astatement
!args{2}
!libs
!subs{dosetjam,0,0}
!name{"WJam","Jammode"} ;*****

!astatement
!repargs{0,2,2,2,2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowline+1,wlinechk,0} ;*****
!name{"Wline","X1,Y1,X2,Y3[,Xn,Yn...],Colour"}

!astatement
!args{2}
!libs{#windowslib,$1180,#intuitionlib,#la6}
!subs{doactivate+1,wchk,0}
!name{"Activate","Window#"} ;***** 
 
!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowindowx,wchk,0}
!name{"WindowX",""} ;*****
 
!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowindowy,wchk,0}
!name{"WindowY",""} ;*****
 
!afunction{2}
!args
!libs
!subs{buttons+1,0,0}
!name{"MButtons",""}    ;*****

!astatement
!args{2}
!libs{#windowslib,$1201,#windowslib,$0203,#intuitionlib,#la6}
!subs{domenusok+1,0,0}
!name{"Menus","On|Off"} ;*****

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowcursx,wchk,0}
!name{"WCursX",""}  ;***** 

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowcursy,wchk,0}
!name{"WCursY",""}  ;*****

!astatement
!args{2}
!libs{#shapeslib,#ia2,#windowslib,$1302,#intuitionlib,#la6}
!subs{dowpointer+1,wpointerchk,0}
!name{"WPointer","Shape#"}  ;*****

!astatement
!args
!libs{#windowslib,$1201,#windowslib,$0203,#intuitionlib,#la6}
!subs{domenuson+1,0,0}
!name{"MenusOn",""}

!astatement
!args
!libs{#windowslib,$1201,#windowslib,$0203,#intuitionlib,#la6}
!subs{domenusoff+1,0,0}
!name{"MenusOff",""}

!astatement
!args{2,2}
!libs{#windowslib,#ua0,#intuitionlib,#la6}
!subs{dowmove,wmovechk,0}
!name{"WMove","X,Y"}    ;*****

!astatement
!args{2,2}
!libs{#windowslib,#ua0,#intuitionlib,#la6}
!subs{dowsize,wsizechk,0}
!name{"WSize","Width,Height"}   ;*****

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowindowwidth,wchk,0}
!name{"WindowWidth",""} ;*****

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowindowheight,wchk,0}
!name{"WindowHeight",""}    ;*****

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dogzzwidth,wchk,0}
!name{"InnerWidth",""}  ;*****
 
!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dogzzheight,wchk,0}
!name{"InnerHeight",""} ;*****

!astatement
!args
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{doinnercls+1,wchk,0}
!args{2}
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{doinnercls2+1,wchk,0}
!name{"InnerCls","[Colour]"}    ;***** 

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowtopoff,wchk,0}
!name{"WTopOff",""} ;*****
 
!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowleftoff,wchk,0}
!name{"WLeftOff",""}    ;*****
 
!astatement
!args{2}
!libs
!subs{doslimits2,0,0}
!args{2,2,2,2}
!libs
!subs{doslimits,0,0}    ;*****
!name{"SizeLimits","Min Width,Min Height,Max Width,Max Height"}
 
!afunction{2}
!args
!libs
!subs{doemousex,0,0}
!name{"EMouseX",""}

!afunction{2}
!args
!libs
!subs{doemousey,0,0}
!name{"EMouseY",""}

!astatement
!args{3}
!libs
!subs{doaddidcmp,0,0}
!name{"AddIDCMP","IDCMP_Flags"} 
 
!astatement
!args{3}
!libs
!subs{dosubidcmp,0,0}
!name{"SubIDCMP","IDCMP_Flags"}
 
!astatement
!args
!libs
!subs{doflushevents,0,0}
!args{3}
!libs
!subs{doflushevents2,0,0}
!name{"FlushEvents","[IDCMP_Flag]"}
 
!astatement
!args
!libs{#windowslib,#ua1}
!subs{docatchdoserrs,wchk,0}
!name{"CatchDosErrs",""}

!afunction{3}
!args
!libs{#windowslib,#ua1}
!subs{dowrport,wchk,0}
!args{2}
!libs{#windowslib,$1180}
!subs{dowrport,wchk,0}
!name{"RastPort","[(Window#)]"}

!astatement
!args {#long,#long}
!libs
!subs{dosetevfilter,0,0}
!name{"SetEventFilter","preprocess,postprocess"} 

!astatement
!args{#string}
!libs{#windowslib,#ua1,#intuitionlib,#la6}
!subs{dowtitle2,wchk,0}
!args{#string,#string}
!libs{#windowslib,#ua1,#intuitionlib,#la6}
!subs{dowtitle,wchk,0}
!name{"WTitle","windowtitle$[,screentitle$]"} ;*****

!astatement
!args{2}
!libs{#windowslib,#ia3,#intuitionlib,#la6}
!subs{freewindow,0,0}
!name{"CloseWindow","Window#"}     ;*****
 
!astatement
!args
!libs{#windowslib,#ua1,#graphicslib,#la6}
!subs{dowprintscroll,wchk,0}
!name{"WPrintScroll",""}  ;*****

!astatement
!args{2,2,2}
!libs{#windowslib,#ua0,#shapeslib,#ia2,#graphicslib,#la6}
!subs{dowblit,wblitchk,0}
!name{"WBlit","Shape#,x,y"}  ;*****

!astatement
!args{2,2}
!libs{#windowslib,$1081,#bitmaplib,$1180,#graphicslib,#la6}
!subs{dobtow1,wbtowchk,0}
!args{2,2,2,2,2,2,2,2}
!libs{#windowslib,$1081,#bitmaplib,$1180,#graphicslib,#la6}
!subs{dobtow2,wbtowchk,0}
!name{"BitMaptoWindow","Bitmap#,Window#[,srcx,srcy,destx,desty,wid,height]"}  ;*****
 
!afunction{#long} ;return event code
!args
!libs
!subs{doeventcode+1,0,0}
!name{"EventCode",""}   ;*****
  
!afunction{#word} ;return event code
!args
!libs
!subs{doeventqualifier+1,0,0}
!name{"EventQualifier",""}   ;*****
 
!astatement
!args{#word,#word}
!libs{#windowslib,#ua1,#layerslib,#la6}
!subs{_showsuper,0,0}
!name{"PositionSuperBitMap","x,y"}

!astatement
!args
!libs{#windowslib,#ua0,#graphicslib,#la6}
!subs{_windowtobitmap,0,0}
!name{"GetSuperBitMap",""}
 
!astatement
!args
!libs{#windowslib,#ua0,#graphicslib,#la6}
!subs{_bitmaptowindow,0,0}
!name{"PutSuperBitMap",""}

!acommand {#long}
!args{#word,#long,#string}
!libs{#windowslib,#ia3,#screenslib,#ua1,#windowslib,$0604,#intuitionlib,#la6}
!subs{dowindowtags1+1,0,0}
!args{#word,#long,#string,#long}
!libs{#windowslib,#ia3,#screenslib,#ua1,#windowslib,$0604,#intuitionlib,#la6}
!subs{dowindowtags3+1,0,0}
!repargs{3,2,#word,#long,#string,#long|#push,#long|#push}
!libs{#windowslib,#ia3,#screenslib,#ua1,#windowslib,$0604,#intuitionlib,#la6}
!subs{dowindowtags2+1,0,0}
!name{"WindowTags","Window#,Flags,Title$ [,&TagList] or [[,Tag,Data]...]"}

!astatement
!args {#byte,#long}
!libs
!subs{dosetsigbit+1,0,0}
!name{"AddWaitEvent","bitnumber,returncode.l"}
 
!astatement
!args {#byte,#long}
!libs
!subs{doclrsigbit+1,0,0}
!name{"DelWaitEvent","bitnumber"}

!afunction{#long} ;return event iAddress
!args
!libs
!subs{doiAddress+1,0,0}
!name{"EventiAddress","Return Intui IAddress "}   ;*****

!afunction{#long}
!args
!libs
!subs{dowaitsigbits+1,0,0}
!name{"WaitEventSigBits","return the sig recieved from WaitEvent"}   ;***** 
 
!afunction{#long}
!args
!libs
!subs{doeventseconds+1,0,0}
!name{"EventSeconds",""}   ;*****
 
!afunction{#long}
!args
!libs
!subs{doeventmicrons+1,0,0}
!name{"EventMicros",""}   ;*****
 
!astatement
!args {#long}
!libs
!subs{dowaiteventmask+1,0,0}
!name{"WaitEventMask","Signalmask ; sets the signalmask for waitevent" }

!afunction{#long}
!args
!libs
!subs{doblitzmsgport+1,0,0}
!name{"BlitzMsgPort","Return the adress of the Eventx Messageport"}   ;***** 

!afunction{#long}
!args
!libs
!subs{dodoubleclick+1,0,0}
!name{"EventDoubleclick","Return true if a doubleclick occur"}   ;*****

!astatement
!args {#long}
!libs
!subs{dobackfillhook0,0,0}
!args{#long,#long}
!libs
!subs{dobackfillhook,0,0}
!name{"WindowBackFillHook","Adress of the function[,Hook number (max 19)]"}   ;***** 

!afunction{3} ;return IDCMP
!args
!libs
!subs{doeventtest,0,0}
!name{"EventTest","read the next event but do not remove from list"}   ;*****

!afunction{2}
!args
!libs
!subs{dorealrawkey,0,0}
!name{"EventRawKey","give real rawkey and keyoff "}  ;give real rawkey and keyoff*****

!afunction{2}
!args{7,2}
!libs{#windowslib,#ua1}
!subs{dotextfit,0,0}
!name{"TextFit","(string,xwith);give the number of chars that fit in this pixel width"}
 
!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dofontheight,0,0}
!name{"WinFontHeight","give fontsize of a window "}
 
!astatement
!args {#long}
!libs
!subs{dormbtrap,0,0}
!name{"SetMenuVerifyHandler","Address of the Handler for verify if a menu should show no menu *msg\Code=#MENUCANCEL"}   ;*****

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{doeventvanillakey,0,0}
!name{"EventVanillaKey","return the translatet rawkey event "} 

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowbottomsize,wchk,0}
!name{"WBottomSize","return the size of the bottom border"} ;*****

!afunction{2}
!args
!libs{#windowslib,#ua1}
!subs{dowrightsize,wchk,0}
!name{"WRightSize","return the size of the right border"} ;*****

; *******************************++ Library entry points:

init: !nullsub{codeinit,0,0,#graphicslib,#la0,#intuitionlib,#la1}
finit:!nullsub{codefinit,0,0}

_load:!nullsub{0,0,0}
_save:!nullsub{0,0,0}
_use:!nullsub{dousewindow,0,0}
_free:!nullsub{freewindow,0,0,#intuitionlib,#la6}

!libfin{_toke,_load,_save,_use,_free,20,5}

;   A Window :
;   00.l : pointer to Window Structure
;   04.w : Text cursor X Position
;   06.w : Text cursor Y position
;   08.l : pointer data
;   12.l : pointer length
;   16.w : super bitmap x
;   20.w : super bitmap y

;***************** Code Below *******************
.doeventvanillakey:
  MOVEQ #0,D0
  MOVE.w LAB_0139+2,D0
RTS

trapaddress: Dc.l 0
.dormbtrap:
  MOVE.l D0,trapaddress
RTS

.dotextfit:
  MOVEA.l D0,A3   ;17b2: 2640
  MOVE.l D1,D2   ;17b4: 2401
  MOVEA.l (A1),A1   ;17b6: 2251
  MOVEA.l 50(A1),A2  ;17b8: 24690032
  MOVEQ #0,D3   ;17bc: 7600
  ALibJsr GraphicsBase
  LAB_000C: 
    MOVEA.l A3,A0   ;17c4: 204b
    MOVEQ #1,D0   ;17c6: 7001
    MOVEA.l A2,A1   ;17c8: 224a
    JSR -54(A6)   ;17ca: 4eaeffca
    ADDQ.l #1,D3   ;17ce: 5283
    ADDQ.l #1,A3   ;17d0: 528b
    SUB.l D0,D2   ;17d2: 9480
  BPL.w LAB_000C  ;17d4: 6a00ffee
  MOVE.l D3,D0   ;17d8: 2003
  SUBQ.l #1,D0   ;17da: 5380
RTS    ;17dc: 4e75

.dofontheight:
  MOVEA.l (A1),A1   ;17de: 2251
  MOVEA.l 50(A1),A1  ;17e0: 22690032
  MOVE.w 58(A1),D0  ;17e4: 3029003a
RTS    ;17e8: 4e75

.dorealrawkey:
  MOVEQ #0,D0   ;17ea: 7000
  MOVE.w LAB_017D,D0  ;17ec: 30390000317a
RTS    ;17f2: 4e75

.dodoubleclick:
 CMPI.l #$00000020,LAB_017C ;17f4: 0cb90000002000003176
 BEQ.w LAB_0010  ;17fe: 6700002a
 CMPI.l #$00000040,LAB_017C ;1802: 0cb90000004000003176
 BEQ.w LAB_0010  ;180c: 6700001c
 CMPI.w #$0068,evcode ;1810: 0c7900680000192c
 BNE.w LAB_0011  ;1818: 6600005c
 CMPI.l #$00000008,LAB_017C ;181c: 0cb90000000800003176
 BNE.w LAB_0011  ;1826: 6600004e
LAB_0010:
 MOVEM.l D2-D3/A6,-(A7)  ;182a: 48e73002
 MOVE.l LAB_0026+2(PC),D2 ;182e: 243a0104
 MOVE.l LAB_0027+2(PC),D3 ;1832: 263a0104
 MOVE.l LAB_0179(PC),D0  ;1836: 203a1932
 MOVE.l LAB_017A(PC),D1  ;183a: 223a1932
 MOVE.l D2,LAB_0179  ;183e: 23c20000316a
 MOVE.l D3,LAB_017A  ;1844: 23c30000316e
 MOVE.l D0,-(A7)  ;184a: 2f00
 ALibJsr $3585
 MOVE.l (A7)+,D0  ;1852: 201f
 JSR -102(A6)  ;1854: 4eaeff9a
 MOVEM.l (A7)+,D2-D3/A6  ;1858: 4cdf400c
 RTS    ;185c: 4e75
 MOVE.l evcode(PC),LAB_017B ;185e: 23fa00cc00003172
 MOVE.l LAB_0026+2(PC),LAB_0179 ;1866: 23fa00cc0000316a
 MOVE.l LAB_0027+2(PC),LAB_017A ;186e: 23fa00c80000316e
LAB_0011:
 MOVEQ #0,D0   ;1876: 7000
 RTS    ;1878: 4e75

.dowaiteventmask:
  LEA LAB_00CF(PC),A0  ;187a: 41fa0a7a
  MOVE.l D0,(A0)   ;187e: 2080
RTS    ;1880: 4e75

.doblitzmsgport:
  MOVE.l #LAB_0046+2,D0  ;1882: 203c00001996
RTS    ;1888: 4e75

_showsuper:
 MOVEM.w 16(A1),D2-D3  ;188a: 4ca9000c0010
 MOVEM.w D0-D1,16(A1)  ;1890: 48a900030010
 SUB.w D2,D0   ;1896: 9042
 SUB.w D3,D1   ;1898: 9243
 EXT.l D0   ;189a: 48c0
 EXT.l D1   ;189c: 48c1
 MOVEA.l (A1),A1   ;189e: 2251
 MOVEA.l 50(A1),A1  ;18a0: 22690032
 MOVEA.l (A1),A1   ;18a4: 2251
 JMP -72(A6)   ;18a6: 4eeeffb8
doiAddress:
 MOVE.l LAB_0024+2(PC),D0 ;18aa: 203a0084
 RTS    ;18ae: 4e75
doeventseconds:
 MOVE.l LAB_0026+2(PC),D0 ;18b0: 203a0082
 RTS    ;18b4: 4e75
doeventmicrons:
 MOVE.l LAB_0027+2(PC),D0 ;18b6: 203a0080
 RTS    ;18ba: 4e75
dosetsigbit:
 Dc.w $c0bc   ;18bc
 ORI.b #$ff,D0   ;18be: 000000ff
 MOVE.l LAB_00CF,D2  ;18c2: 2439000022f6
 BSET D0,D2   ;18c8: 01c2
 MOVE.l D2,LAB_00CF  ;18ca: 23c2000022f6
 LEA LAB_00D1(PC),A0  ;18d0: 41fa0a2c
 ASL.l #2,D0   ;18d4: e580
 MOVE.l D1,0(A0,D0.l)  ;18d6: 21810800
 RTS    ;18da: 4e75
doclrsigbit:
 Dc.w $c0bc   ;18dc
 ORI.b #$ff,D0   ;18de: 000000ff
 MOVE.l LAB_00CF,D2  ;18e2: 2439000022f6
 BCLR D0,D2   ;18e8: 0182
 MOVE.l D2,LAB_00CF  ;18ea: 23c2000022f6
 LEA LAB_00D1(PC),A0  ;18f0: 41fa0a0c
 ASL.l #2,D0   ;18f4: e580
 MOVE.l #$00000000,0(A0,D0.l) ;18f6: 21bc000000000800
 RTS    ;18fe: 4e75

_windowtobitmap:
  MOVEA.l (A0),A0   ;1900: 2050
  MOVEA.l 50(A0),A0  ;1902: 20680032
  MOVEA.l (A0),A0   ;1906: 2050
JMP _SyncSBitMap(A6)  ;1908: 4eeefe44

_bitmaptowindow:
  MOVEA.l (A0),A0   ;190c: 2050
  MOVEA.l 50(A0),A0  ;190e: 20680032
  MOVEA.l (A0),A0   ;1912: 2050
JMP _CopySBitMap(A6)  ;1914: 4eeefe3e

LAB_001C: JMP 0 ;seteventfilter for event preprocessing routine
LAB_001E: JMP 0 ;& postprocessing

zero:     Dc.l 0
idcmp:    Dc.l $000c076e
;
evcode:   Dc.w 0
LAB_0024:
 ORI.b #$00,D0   ;192e: 00000000
LAB_0026:
 ORI.b #$00,D0   ;1932: 00000000
LAB_0027:
 ORI.b #$00,D0   ;1936: 00000000
LAB_0028:
 ORI.b #$00,D0   ;193a: 00000000
LAB_0029:
 ORI.b #$00,D0   ;193e: 00000000
LAB_002A:
 ORI.b #$00,D0   ;1942: 00000000
LAB_002C:
 ORI.b #$00,D0   ;1946: 00000000
LAB_002E:
 ORI.b #$00,D0   ;194a: 00000000
prwindow:
 ORI.b #$00,D0   ;194e: 00000000
LAB_0030:
 ORI.b #$00,D0   ;1952: 00000000
LAB_0032:
 ORI.b #$00,D0   ;1956: 00000000
LAB_0033:
 ORI.b #$00,D0   ;195a: 00000000
LAB_0036:
 ORI.b #$00,D0   ;195e: 00000000
 ORI.b #$00,D0   ;1962: 00000000
 ORI.b #$00,D0   ;1966: 00000000
LAB_0037:
 ORI.b #$00,D0   ;196a: 00000000
LAB_0038:
 Dc.l LAB_0037  ;196e: 0000196a
inwindow:
 ORI.b #$00,D0   ;1972: 00000000
LAB_003A:
 Dc.w $ffff   ;1976
LAB_003B: ORI.b #$00,D0   ;1978: 00000000
LAB_003D: ORI.b #$00,D0   ;197c: 00000000
LAB_003F: ORI.b #$00,D0   ;1980: 00000000
LAB_0041: ORI.b #$00,D0   ;1984: 00000000
LAB_0043: ORI.b #$00,D0   ;1988: 00000000
LAB_0044: ORI.b #$00,D0   ;198c: 00000000
LAB_0045: ORI.b #$00,D0   ;1990: 00000000
LAB_0046: ORI.b #$00,D0   ;1994: 00000000
 ORI.b #$00,D0   ;1998: 00000000
 ORI.b #$00,D0   ;199c: 00000000
 ORI.b #$00,D0   ;19a0: 00000000
LAB_0048: ORI.b #$00,D0   ;19a4: 00000000
LAB_004B:
 ORI.b #$00,D0   ;19a8: 00000000
 ORI.b #$00,D0   ;19ac: 00000000
 ORI.b #$00,D0   ;19b0: 00000000
 ORI.b #$00,D0   ;19b4: 00000000
_sizelimits: ORI.l #$00400000,D0  ;19b8: 008000400000
 Dc.w $0000   ;19be
_sizelimitsok: Dc.w $ffff   ;19c0
LAB_004F: ORI.b #$00,D0   ;19c2: 00000000
LAB_0050: ORI.b #$00,D0   ;19c6: 00000000

.dosetevfilter:
  MOVE.l D0,LAB_001C+2  ;19ca: 23c00000191a
  MOVE.l D1,LAB_001E+2  ;19d0: 23c100001920
RTS    ;19d6: 4e75

.dowrport:
  Dc $a000,'f-'s
 's:
  MOVEA.l (A1),A1
  MOVE.l 50(A1),D0
 'f
RTS

.docatchdoserrs:
  MOVEA.l ABSEXECBASE,A0  ;19e4: 207900000004
  MOVEA.l 276(A0),A0  ;19ea: 20680114
  MOVE.l (A1),184(A0)  ;19ee: 215100b8
RTS    ;19f2: 4e75

.doflushevents:
  BSR.w LAB_00AD  ;19f4: 6100064c
  BSR.w LAB_00F2  ;19f8: 61000bfe
  CLR.w LAB_0030  ;19fc: 427900001952
  CLR.w LAB_0041+2  ;1a02: 427900001986
RTS    ;1a08: 4e75

.doflushevents2:
  MOVE.l D0,D7   ;1a0a: 2e00
  BSR.w LAB_00AD  ;1a0c: 61000634
  LEA LAB_0037(PC),A0  ;1a10: 41faff58
LAB_0056:
 MOVE.l (A0),D0   ;1a14: 2010
 BEQ.w LAB_0058  ;1a16: 6700001e
 MOVEA.l D0,A1   ;1a1a: 2240
 Dc.w $bea9   ;1a1c
 Dc.w $0004   ;1a1e
 BNE.w LAB_0057  ;1a20: 6600000e
 MOVE.l A0,-(A7)  ;1a24: 2f08
 BSR.w LAB_00F0  ;1a26: 61000bb6
 MOVEA.l (A7)+,A0  ;1a2a: 205f
 BRA.w LAB_0056  ;1a2c: 6000ffe6
LAB_0057:
 MOVEA.l A1,A0   ;1a30: 2049
 BRA.w LAB_0056  ;1a32: 6000ffe0
LAB_0058:
 CMPI.l #$00000400,D7  ;1a36: 0c8700000400
 BNE.w LAB_0059  ;1a3c: 66000008
 CLR.w LAB_0030  ;1a40: 427900001952
LAB_0059:
 CMPI.l #$00000008,D7  ;1a46: 0c8700000008
 BNE.w LAB_005A  ;1a4c: 66000008
 CLR.w LAB_0041+2  ;1a50: 427900001986
LAB_005A:
RTS    ;1a56: 4e75

.doaddidcmp:
  OR.l D0,idcmp  ;1a58: 81b900001928
RTS    ;1a5e: 4e75

.dosubidcmp:
  NOT.l D0   ;1a60: 4680
  Dc.w $c1b9   ;1a62
  Dc.l idcmp  ;1a64: 00001928
RTS    ;1a68: 4e75

.doslimits:
  LEA _sizelimits(PC),A0  ;1a6a: 41faff4c
  MOVE.w D0,(A0)+  ;1a6e: 30c0
  MOVE.w D1,(A0)+  ;1a70: 30c1
  MOVE.w D2,(A0)+  ;1a72: 30c2
  MOVE.w D3,(A0)   ;1a74: 3083
RTS    ;1a76: 4e75

.doslimits2:
  MOVE.w D0,_sizelimitsok  ;1a78: 33c0000019c0
RTS    ;1a7e: 4e75

.dowtopoff:
  MOVEQ #0,D0   ;1a80: 7000
  MOVEA.l (A1),A0   ;1a82: 2051
  MOVE.b 55(A0),D0  ;1a84: 10280037
RTS    ;1a88: 4e75

.dowleftoff:
  MOVEQ #0,D0   ;1a8a: 7000
  MOVEA.l (A1),A0   ;1a8c: 2051
  MOVE.b 54(A0),D0  ;1a8e: 10280036
RTS    ;1a92: 4e75

.dowindowwidth:
  MOVEA.l (A1),A1   ;1a94: 2251
  MOVE.w 8(A1),D0  ;1a96: 30290008
RTS    ;1a9a: 4e75

.dowindowheight:
  MOVEA.l (A1),A1   ;1a9c: 2251
  MOVE.w 10(A1),D0  ;1a9e: 3029000a
RTS    ;1aa2: 4e75

.dogzzwidth:
  MOVEA.l (A1),A1   ;1aa4: 2251
  MOVE.w 112(A1),D0  ;1aa6: 30290070
RTS    ;1aaa: 4e75

.dogzzheight:
  MOVEA.l (A1),A1   ;1aac: 2251
  MOVE.w 114(A1),D0  ;1aae: 30290072
RTS    ;1ab2: 4e75

.dowbottomsize:
  MOVEQ #0,D0   ;1ab4: 7000
  MOVEA.l (A1),A0   ;1ab6: 2051
  MOVE.b 57(A0),D0  ;1ab8: 10280039
RTS    ;1abc: 4e75

.dowrightsize:
  MOVEQ #0,D0   ;1abe: 7000
  MOVEA.l (A1),A0   ;1ac0: 2051
  MOVE.b 56(A0),D0  ;1ac2: 10280038
RTS    ;1ac6: 4e75

.dobtow1:
  MOVEA.l (A0),A0   ;1ac8: 2050
  MOVEA.l 50(A0),A0  ;1aca: 20680032
  MOVEQ #0,D0   ;1ace: 7000
  MOVEQ #0,D1   ;1ad0: 7200
  MOVEQ #0,D2   ;1ad2: 7400
  MOVEQ #0,D3   ;1ad4: 7600
  MOVEM.w (A1),D4-D5  ;1ad6: 4c910030
  ASL.w #3,D4   ;1ada: e744
  MOVE.w #$00c0,D6  ;1adc: 3c3c00c0
  Dc.w $c149   ;1ae0
  MOVE.w #$00c0,D6  ;1ae2: 3c3c00c0
JMP -606(A6)  ;1ae6: 4eeefda2

.dobtow2:
  MOVEA.l (A0),A0   ;1aea: 2050
  MOVEA.l 50(A0),A0  ;1aec: 20680032
  MOVE.w D2,D0   ;1af0: 3002
  MOVE.w D3,D1   ;1af2: 3203
  MOVE.w D4,D2   ;1af4: 3404
  MOVE.w D5,D3   ;1af6: 3605
  MOVE.w -(A2),D4  ;1af8: 3822
  MOVE.w -(A2),D5  ;1afa: 3a22
  Dc.w $c149   ;1afc
  MOVE.w #$00c0,D6  ;1afe: 3c3c00c0
JMP -606(A6)  ;1b02: 4eeefda2

.dowblit:
  MOVEA.l (A0),A0 : MOVEA.l 50(A0),A0   ; rp
  LEA mybmap(PC),A1                     ; image
  MOVE.w 6(A2),(A1)
  MOVE.w 2(A2),2(A1)
  MOVE.w 4(A2),4(A1)

  MOVEA.l 14(A2),A3
  MOVE.w 22(A2),D6
  LEA 8(A1),A1
  MOVEQ #7,D7
 'loop:
    MOVE.l A3,(A1)+
    ADDA.w D6,A3
  DBF D7,'loop
  MOVEA.l A0,A1
  
  LEA mybmap(PC),A0
  MOVE.w D2,D3
  MOVE.w D1,D2
  SUB.w 10(A2),D2
  SUB.w 12(A2),D3
  MOVEQ #0,D0
  MOVEQ #0,D1
  MOVEM.w (A2),D4-D5
  MOVE.l 18(A2),D7 : BEQ.w 'nocookie
    MOVE.w #$00e0,D6
    MOVEA.l D7,A2
    JMP  _BltMaskBitMapRastPort(A6)
 'nocookie:
  MOVE.w #$00c0,D6
JMP _BltBitMapRastPort(A6)

mybmap:
  Dc.w 0    ; BytesperRow
  Dc.w 0    ; Rows
  Dc.b 0    ; Flags
  Dc.b 0    ; Depth        
  Dc.w 0    ; pad
  Dc.l 0,0,0,0,0,0,0,0  ;bitplanes

.dowprintscroll:
  MOVE.w 6(A1),D1  ;1b92: 32290006
  MOVEA.l (A1),A0   ;1b96: 2051
  MOVEM.w 112(A0),D4-D5  ;1b98: 4ca800300070
  MOVEA.l 50(A0),A2  ;1b9e: 24680032
  SUB.w D5,D1   ;1ba2: 9245
  ADD.w 58(A2),D1  ;1ba4: d26a003a
  BLE.w LAB_006E  ;1ba8: 6f000016
    SUB.w D1,6(A1)  ;1bac: 93690006
    MOVEQ #0,D0   ;1bb0: 7000
    MOVEQ #0,D2   ;1bb2: 7400
    MOVEQ #0,D3   ;1bb4: 7600
    MOVEQ #0,D7   ;1bb6: 7e00
    MOVE.w #$fe74,D6  ;1bb8: 3c3cfe74
    BRA.w LAB_00A5  ;1bbc: 60000338
  LAB_006E:
RTS 

.dowtitle2:
  MOVEQ #-1,D1
.dowtitle:
  MOVEA.l (A1),A0
  MOVE.l D1,D4
  MOVEA.l #$ffffffff,A1

  MOVE.l -(A2),D1
  BEQ.w LAB_0072
    MOVEM.l D0-D3,-(A7)
    MOVE.l 32(A0),D0
    BEQ.w LAB_0071
        ALibJsr $cf02               ; free up window title
    LAB_0071:
    MOVEM.l (A7)+,D0-D3  ;1be6: 4cdf000f
    ALibJsr $cf01:MOVE.l d0,a1
  LAB_0072:
  
  MOVE.l D4,D0 : CMPI.b #-1,d0 : BEQ.w LAB_0074
    MOVE.l 104(A0),D0
    BEQ.w LAB_0073
      ;ALibJsr $cf02               ; free up screen title    
    LAB_0073:
    MOVE.l -(A2),D1:ALibJsr $cf01
  LAB_0074:
  MOVEA.l D0,A2
  JSR _SetWindowTitles(a6)
RTS

.dowmove:
 MOVEA.l (A0),A0   ;1c14: 2050
 MOVEA.l A0,A2   ;1c16: 2448
 MOVE.w D0,D2   ;1c18: 3400
 MOVE.w D1,D3   ;1c1a: 3601
 SUB.w 4(A0),D0  ;1c1c: 90680004
 SUB.w 6(A0),D1  ;1c20: 92680006
 JSR -168(A6)  ;1c24: 4eaeff58
 RTS    ;1c28: 4e75
dowsize:
 MOVEA.l (A0),A0   ;1c2a: 2050
 MOVEA.l A0,A2   ;1c2c: 2448
 MOVE.w D0,D2   ;1c2e: 3400
 MOVE.w D1,D3   ;1c30: 3601
 SUB.w 8(A0),D0  ;1c32: 90680008
 SUB.w 10(A0),D1  ;1c36: 9268000a
 JSR -288(A6)  ;1c3a: 4eaefee0
 RTS    ;1c3e: 4e75
domenusok:
 TST.w D0   ;1c40: 4a40
 BEQ.w domenusoff  ;1c42: 67000032
domenuson:
 MOVEQ #0,D3   ;1c46: 7600
 MOVEQ #0,D4   ;1c48: 7800
LAB_0079:
 SUBQ.w #1,D2   ;1c4a: 5342
LAB_007A:
 MOVE.l (A2),D0   ;1c4c: 2012
 BEQ.w LAB_007B  ;1c4e: 6700001c
 MOVEA.l D0,A0   ;1c52: 2040
 BCLR #0,25(A0)  ;1c54: 08a800000019
 OR.w D4,24(A0)  ;1c5a: 89680018
 MOVE.l 82(A0),D0  ;1c5e: 20280052
 BCLR #13,D0   ;1c62: 0880000d
 OR.w D3,D0   ;1c66: 8043
 JSR -150(A6)  ;1c68: 4eaeff6a
LAB_007B:
 LEA 16(A2),A2  ;1c6c: 45ea0010
 DBF D2,LAB_007A  ;1c70: 51caffda
 RTS    ;1c74: 4e75

.domenusoff:
  MOVE.w #$2000,D3  ;1c76: 363c2000
  MOVEQ #1,D4   ;1c7a: 7801
BRA.w LAB_0079  ;1c7c: 6000ffcc

.dowpointer:
  MOVE.l 8(A3),D0  ;1c80: 202b0008
  BEQ.w LAB_007F  ;1c84: 6700001a
    MOVEA.l (A3),A0   ;1c88: 2053
    JSR -60(A6)   ;1c8a: 4eaeffc4
    MOVEA.l 8(A3),A1  ;1c8e: 226b0008
    CLR.l 8(A3)   ;1c92: 42ab0008
    MOVE.l 12(A3),D0  ;1c96: 202b000c
    ALibJsr $c003
 LAB_007F:

 MOVEQ #0,D0   ;1ca0: 7000
 MOVE.w 2(A2),D0  ;1ca2: 302a0002
 ADDQ.w #2,D0   ;1ca6: 5440
 LSL.w #2,D0   ;1ca8: e548
 MOVE.l D0,12(A3)  ;1caa: 2740000c
 MOVEQ #2,D1   ;1cae: 7202
 ALibJsr $c002
 MOVEA.l D0,A0   ;1cb6: 2040
 MOVE.l A0,8(A3)  ;1cb8: 27480008
 CLR.l (A0)+   ;1cbc: 4298
 MOVEA.l 14(A2),A1  ;1cbe: 226a000e
 MOVE.w 22(A2),D0  ;1cc2: 302a0016
 MOVE.w 2(A2),D1  ;1cc6: 322a0002
 SUBQ.w #1,D1   ;1cca: 5341
LAB_0080:
 MOVE.w (A1)+,(A0)+  ;1ccc: 30d9
 MOVE.w -2(A1,D0.w),(A0)+ ;1cce: 30f100fe
 DBF D1,LAB_0080  ;1cd2: 51c9fff8
 CLR.l (A0)+   ;1cd6: 4298
 MOVEA.l (A3),A0   ;1cd8: 2053
 MOVEA.l 8(A3),A1  ;1cda: 226b0008
 MOVEQ #0,D0   ;1cde: 7000
 MOVEQ #0,D1   ;1ce0: 7200
 MOVE.w 2(A2),D0  ;1ce2: 302a0002
 MOVE.w (A2),D1   ;1ce6: 3212
 MOVE.w 10(A2),D2  ;1ce8: 342a000a
 MOVE.w 12(A2),D3  ;1cec: 362a000c
 JMP -270(A6)  ;1cf0: 4eeefef2
doactivate:
 MOVEA.l (A1),A0   ;1cf4: 2051
 JMP -450(A6)  ;1cf6: 4eeefe3e
dosetpens2:
 MOVE.w D1,LAB_003F+2  ;1cfa: 33c100001982
dosetpens:
 MOVE.w D0,LAB_003F  ;1d00: 33c000001980
 RTS    ;1d06: 4e75
dosetjam:
 MOVE.w D0,LAB_0041  ;1d08: 33c000001984
 RTS    ;1d0e: 4e75
dowindowx:
 MOVEA.l (A1),A0   ;1d10: 2051
 MOVE.w 4(A0),D0  ;1d12: 30280004
 BTST #2,26(A0)  ;1d16: 08280002001a
 BEQ.w LAB_0086  ;1d1c: 6700000a
 MOVEQ #0,D1   ;1d20: 7200
 MOVE.b 54(A0),D1  ;1d22: 12280036
 ADD.w D1,D0   ;1d26: d041
LAB_0086:
 RTS    ;1d28: 4e75
dowmousex:
 MOVEA.l (A1),A0   ;1d2a: 2051
 MOVE.w 14(A0),D0  ;1d2c: 3028000e
 BTST #2,26(A0)  ;1d30: 08280002001a
 BEQ.w LAB_0088  ;1d36: 6700000a
 MOVEQ #0,D1   ;1d3a: 7200
 MOVE.b 54(A0),D1  ;1d3c: 12280036
 SUB.w D1,D0   ;1d40: 9041
LAB_0088:
 RTS    ;1d42: 4e75
dowindowy:
 MOVEA.l (A1),A0   ;1d44: 2051
 MOVE.w 6(A0),D0  ;1d46: 30280006
 BTST #2,26(A0)  ;1d4a: 08280002001a
 BEQ.w LAB_008A  ;1d50: 6700000a
 MOVEQ #0,D1   ;1d54: 7200
 MOVE.b 55(A0),D1  ;1d56: 12280037
 ADD.w D1,D0   ;1d5a: d041
LAB_008A:
 RTS    ;1d5c: 4e75
dowmousey:
 MOVEA.l (A1),A0   ;1d5e: 2051
 MOVE.w 12(A0),D0  ;1d60: 3028000c
 BTST #2,26(A0)  ;1d64: 08280002001a
 BEQ.w LAB_008C  ;1d6a: 6700000a
 MOVEQ #0,D1   ;1d6e: 7200
 MOVE.b 55(A0),D1  ;1d70: 12280037
 SUB.w D1,D0   ;1d74: 9041
LAB_008C:
 RTS    ;1d76: 4e75
doeditat:
 MOVE.w LAB_003B+2(PC),D0 ;1d78: 303afc00
 RTS    ;1d7c: 4e75
doeditfrom:
 CLR.w LAB_003D  ;1d7e: 42790000197c
 CLR.w LAB_003B  ;1d84: 427900001978
 RTS    ;1d8a: 4e75
doeditfrom2:
 MOVE.w #$ffff,LAB_003D  ;1d8c: 33fcffff0000197c
 MOVE.w D0,LAB_003B  ;1d94: 33c000001978
 RTS    ;1d9a: 4e75
doeditexit:
 MOVE.w LAB_003D+2(PC),D0 ;1d9c: 303afbe0
 RTS    ;1da0: 4e75
docursor:
 MOVE.w D0,LAB_003A  ;1da2: 33c000001976
 RTS    ;1da8: 4e75
doqual:
 MOVE.w LAB_0033+2(PC),D0 ;1daa: 303afbb0
 Dc.w $c07c   ;1dae
 Dc.w $00ff   ;1db0
 RTS    ;1db2: 4e75
dorawkey:
  MOVE.w LAB_0036(PC),D0  ;1db4: 303afba8
RTS    ;1db8: 4e75

.dousewindow:
  BSR.w dooutwindow
.doinwindow:
  MOVE.l A3,inwindow 
  LEA windowinp(PC),A0
  ALibJsr #setInputChannel
RTS

.dooutwindow:
  MOVE.l A3,prwindow
  LEA windowprint(PC),A0
  ALibJsr #setOutputChannel
RTS

.dowcursx:
  MOVE.w 4(A1),D0
  MOVEA.l (A1),A0 : MOVE.b 122(A0),D1 : EXT.w D1
  SUB.w D1,D0
RTS

.dowcursy:
  MOVE.w 6(A1),D0
  MOVEA.l (A1),A0 : MOVE.b 123(A0),D1 : EXT.w D1
  SUB.w D1,D0
RTS

.dowlocate:
  MOVEA.l (A1),A0   ;1e02: 2051
  MOVE.b 122(A0),D2  ;1e04: 1428007a
  MOVE.b 123(A0),D3  ;1e08: 1628007b
  EXT.w D2   ;1e0c: 4882
  EXT.w D3   ;1e0e: 4883
  ADD.w D2,D0   ;1e10: d042
  ADD.w D3,D1   ;1e12: d243
  MOVE.w D0,4(A1)  ;1e14: 33400004
  MOVE.w D1,6(A1)  ;1e18: 33410006
RTS    ;1e1c: 4e75

LAB_009A:
 MOVEA.l (A1),A1   ;1e1e: 2251
 MOVEA.l 50(A1),A2  ;1e20: 24690032
 MOVEM.w D0-D1,-(A7)  ;1e24: 48a7c000
 MOVEA.l A2,A1   ;1e28: 224a
 MOVE.w D7,D0   ;1e2a: 3007
 JSR -342(A6)  ;1e2c: 4eaefeaa
 MOVEA.l A2,A1   ;1e30: 224a
 MOVE.w LAB_003F+2(PC),D0 ;1e32: 303afb4e
 JSR -348(A6)  ;1e36: 4eaefea4
 MOVEA.l A2,A1   ;1e3a: 224a
 MOVE.w LAB_0041(PC),D0  ;1e3c: 303afb46
 JSR -354(A6)  ;1e40: 4eaefe9e
 MOVEM.w (A7)+,D0-D1  ;1e44: 4c9f0003
 MOVEA.l A2,A1   ;1e48: 224a
 RTS    ;1e4a: 4e75
dowline:
 MOVE.w D7,D2   ;1e4c: 3407
 MOVEA.l A2,A3   ;1e4e: 264a
 MOVE.w D0,D7   ;1e50: 3e00
 BSR.w LAB_009A  ;1e52: 6100ffca
 MOVEA.l A3,A0   ;1e56: 204b
 MOVE.w D2,D0   ;1e58: 3002
 LSL.w #2,D2   ;1e5a: e54a
 SUBA.w D2,A0   ;1e5c: 90c2
 MOVEA.l A0,A3   ;1e5e: 2648
 MOVE.w D0,D1   ;1e60: 3200
 SUBQ.w #1,D1   ;1e62: 5341
LAB_009C:
 MOVE.w (A3),D2   ;1e64: 3413
 MOVE.w 2(A3),(A3)+  ;1e66: 36eb0002
 MOVE.w D2,(A3)+  ;1e6a: 36c2
 DBF D1,LAB_009C  ;1e6c: 51c9fff6
 MOVEM.l D0/A1,-(A7)  ;1e70: 48e78040
 MOVE.w (A0)+,D0  ;1e74: 3018
 MOVE.w (A0)+,D1  ;1e76: 3218
 MOVE.l A0,-(A7)  ;1e78: 2f08
 JSR -240(A6)  ;1e7a: 4eaeff10
 MOVEA.l (A7)+,A0  ;1e7e: 205f
 MOVEM.l (A7)+,D0/A1  ;1e80: 4cdf0201
 SUBQ.w #1,D0   ;1e84: 5340
 JMP -336(A6)  ;1e86: 4eeefeb0
dowcls:
 MOVEQ #0,D0   ;1e8a: 7000
dowcls2:
 MOVE.w D0,D7   ;1e8c: 3e00
 MOVEA.l (A1),A0   ;1e8e: 2051
 MOVEQ #0,D0   ;1e90: 7000
 MOVEQ #1,D1   ;1e92: 7201
 MOVE.w 8(A0),D2  ;1e94: 34280008
 SUBQ.w #1,D2   ;1e98: 5342
 MOVE.w 10(A0),D3  ;1e9a: 3628000a
 SUBQ.w #1,D3   ;1e9e: 5343
 BRA.w LAB_00A3  ;1ea0: 60000046
doinnercls:
 MOVEQ #0,D0   ;1ea4: 7000
doinnercls2:
 MOVE.w D0,D7   ;1ea6: 3e00
 MOVEA.l (A1),A0   ;1ea8: 2051
 MOVE.b 56(A0),D0  ;1eaa: 10280038
 MOVE.b 57(A0),D1  ;1eae: 12280039
 EXT.w D0   ;1eb2: 4880
 EXT.w D1   ;1eb4: 4881
 MOVE.w 8(A0),D2  ;1eb6: 34280008
 MOVE.w 10(A0),D3  ;1eba: 3628000a
 SUB.w D0,D2   ;1ebe: 9440
 SUB.w D1,D3   ;1ec0: 9641
 SUBQ.w #1,D2   ;1ec2: 5342
 SUBQ.w #1,D3   ;1ec4: 5343
 MOVEQ #0,D0   ;1ec6: 7000
 MOVEQ #0,D1   ;1ec8: 7200
 MOVE.b 54(A0),D0  ;1eca: 10280036
 MOVE.b 55(A0),D1  ;1ece: 12280037
 BRA.w LAB_00A3  ;1ed2: 60000014
dowbox:
 MOVE.w D4,D7   ;1ed6: 3e04
 Dc.w $b042   ;1ed8
 BLS.w LAB_00A2  ;1eda: 63000004
 EXG D0,D2   ;1ede: c142
LAB_00A2:
 Dc.w $b243   ;1ee0
 BLS.w LAB_00A3  ;1ee2: 63000004
 EXG D1,D3   ;1ee6: c343
LAB_00A3:
 MOVE.w #$fece,D6  ;1ee8: 3c3cfece
 BRA.w LAB_00A5  ;1eec: 60000008
dowplot:
 MOVE.w D2,D7   ;1ef0: 3e02
 MOVE.w #$febc,D6  ;1ef2: 3c3cfebc
LAB_00A5:
 BSR.w LAB_009A  ;1ef6: 6100ff26
 JMP 0(A6,D6.w)  ;1efa: 4ef66000
dowcircle:
 MOVE.w D3,D4   ;1efe: 3803
 MOVE.w D2,D3   ;1f00: 3602
dowellipse:
 MOVE.w D4,D7   ;1f02: 3e04
 MOVE.w #$ff4c,D6  ;1f04: 3c3cff4c
 BRA.w LAB_00A5  ;1f08: 6000ffec
dowscroll2:
 MOVE.w LAB_003F+2(PC),-(A7) ;1f0c: 3f3afa74
 MOVE.w D6,LAB_003F+2  ;1f10: 33c600001982
 BSR.w dowscroll  ;1f16: 6100000a
 MOVE.w (A7)+,LAB_003F+2 ;1f1a: 33df00001982
 RTS    ;1f20: 4e75
dowscroll:
 EXG D0,D4   ;1f22: c144
 EXG D1,D5   ;1f24: c345
 EXG D2,D4   ;1f26: c544
 EXG D3,D5   ;1f28: c745
 MOVEQ #0,D7   ;1f2a: 7e00
 MOVE.w #$fe74,D6  ;1f2c: 3c3cfe74
 BRA.w LAB_00A5  ;1f30: 6000ffc4
dowindowidcmp:
 MOVE.l D0,idcmp  ;1f34: 23c000001928
 RTS    ;1f3a: 4e75
codeinit:
 MOVE.l A0,LAB_002E  ;1f3c: 23c80000194a
 MOVE.l A1,LAB_0050  ;1f42: 23c9000019c6
 MOVEA.l ABSEXECBASE,A1  ;1f48: 227900000004
 MOVEA.l 276(A1),A1  ;1f4e: 22690114
 MOVE.l 184(A1),LAB_004F ;1f52: 23e900b8000019c2
 LEA LAB_004B+2(PC),A1 ;1f5a: 43fafa4e
 MOVE.l A1,8(A1)  ;1f5e: 23490008
 ADDQ.w #4,A1   ;1f62: 5849
 MOVE.l A1,-4(A1)  ;1f64: 2349fffc
 CLR.l (A1)   ;1f68: 4291
 MOVEA.l ABSEXECBASE,A6  ;1f6a: 2c7900000004
 SUBA.l A1,A1   ;1f70: 93c9
 JSR -294(A6)  ;1f72: 4eaefeda
 MOVE.l D0,LAB_0048+2  ;1f76: 23c0000019a6
 MOVEQ #-1,D0   ;1f7c: 70ff
 JSR -330(A6)  ;1f7e: 4eaefeb6
 MOVE.b D0,LAB_0048+1  ;1f82: 13c0000019a5
 CLR.b LAB_0048  ;1f88: 4239000019a4
 MOVEQ #0,D1   ;1f8e: 7200
 BSET D0,D1   ;1f90: 01c1
 MOVE.l D1,LAB_00CF  ;1f92: 23c1000022f6
 CLR.l LAB_0037  ;1f98: 42b90000196a
 MOVE.l #LAB_0037,LAB_0038 ;1f9e: 23fc0000196a0000196e
 MOVE.l #$ffffffff,LAB_0028+2 ;1fa8: 23fcffffffff0000193c
 MOVE.l #$ffffffff,LAB_002A ;1fb2: 23fcffffffff00001942
 MOVE.w #$ffff,LAB_002C  ;1fbc: 33fcffff00001946
 CLR.l prwindow  ;1fc4: 42b90000194e
 CLR.w LAB_0030  ;1fca: 427900001952
 CLR.l LAB_0029  ;1fd0: 42b90000193e
 CLR.w LAB_0033+2  ;1fd6: 42790000195c
 MOVE.w #$ffff,LAB_003A  ;1fdc: 33fcffff00001976
 CLR.w LAB_003D  ;1fe4: 42790000197c
 CLR.w LAB_003B  ;1fea: 427900001978
 CLR.w LAB_003D+2  ;1ff0: 42790000197e
 MOVE.w #$0001,LAB_003F  ;1ff6: 33fc000100001980
 MOVE.w #$0000,LAB_003F+2 ;1ffe: 33fc000000001982
 MOVE.w #$0001,LAB_0041  ;2006: 33fc000100001984
 CLR.l LAB_0043  ;200e: 42b900001988
 CLR.l LAB_0044  ;2014: 42b90000198c
 LEA _sizelimits(PC),A0  ;201a: 41faf99c
 MOVE.w #$0080,(A0)+  ;201e: 30fc0080
 MOVE.w #$0040,(A0)+  ;2022: 30fc0040
 MOVE.l #$ffffffff,(A0)  ;2026: 20bcffffffff
 MOVE.w #$ffff,_sizelimitsok  ;202c: 33fcffff000019c0
 CLR.l LAB_0045+2  ;2034: 42b900001992
 MOVE.l #LAB_0046+2,D0  ;203a: 203c00001996
 RTS    ;2040: 4e75
LAB_00AD:
 MOVE.l A6,-(A7)  ;2042: 2f0e
LAB_00AE:
 BSR.w LAB_00AF  ;2044: 6100000a
 BNE.w LAB_00AE  ;2048: 6600fffa
 MOVEA.l (A7)+,A6  ;204c: 2c5f
 RTS    ;204e: 4e75
LAB_00AF:
 MOVEA.l ABSEXECBASE,A6  ;2050: 2c7900000004
LAB_00B0:
 LEA LAB_0046+2(PC),A0 ;2056: 41faf93e
 JSR -372(A6)  ;205a: 4eaefe8c
 MOVE.l D0,LAB_00B9  ;205e: 23c00000213e
 BNE.w LAB_00B1  ;2064: 66000004
 RTS    ;2068: 4e75
LAB_00B1:
 TST.l LAB_001C+2  ;206a: 4ab90000191a
 BEQ.w LAB_00B2  ;2070: 6700000c
 BSR.w LAB_001C  ;2074: 6100f8a2
 TST.l D0   ;2078: 4a80
 BEQ.w LAB_00B5  ;207a: 67000052
LAB_00B2:
 MOVEA.l D0,A2   ;207e: 2440
 CMPI.l #$00002000,20(A2) ;2080: 0caa000020000014
 BNE.w LAB_00B4  ;2088: 6600002a
 TST.l trapaddress  ;208c: 4ab9000017a6
 BEQ.w LAB_00B3  ;2092: 67000016
 MOVEM.l D0-D7/A0-A6,-(A7) ;2096: 48e7fffe
 MOVEA.l trapaddress,A0  ;209a: 2079000017a6
 JSR (A0)   ;20a0: 4e90
 MOVEM.l (A7)+,D0-D7/A0-A6 ;20a2: 4cdf7fff
 BRA.w LAB_00B5  ;20a6: 60000026
LAB_00B3:
 MOVE.w #$0002,24(A2)  ;20aa: 357c00020018
 BRA.w LAB_00B5  ;20b0: 6000001c
LAB_00B4:
 CMPI.l #$00000400,20(A2) ;20b4: 0caa000004000014
 BNE.w LAB_00B7  ;20bc: 6600002a
 BTST #7,25(A2)  ;20c0: 082a00070019
 BEQ.w LAB_00B7  ;20c6: 67000020
 BRA.w LAB_00B7  ;20ca: 6000001c
LAB_00B5:
 TST.l LAB_001E+2  ;20ce: 4ab900001920
 BEQ.w LAB_00B6  ;20d4: 67000006
 BSR.w LAB_001E  ;20d8: 6100f844
LAB_00B6:
 MOVEA.l LAB_00B9(PC),A1  ;20dc: 227a0060
 JSR -378(A6)  ;20e0: 4eaefe86
 BRA.w LAB_00B0  ;20e4: 6000ff70

LAB_00B7:
 MOVEQ #32,D0 : MOVEQ #1,D1 : ALibJsr $c002 : MOVEA.l D0,A0

 MOVEA.l LAB_0038(PC),A1
 MOVE.l A0,(A1)
 MOVE.l A0,LAB_0038  ;20fa: 23c80000196e
 CLR.l (A0)+   ;2100: 4298
 MOVE.l 20(A2),(A0)+  ;2102: 20ea0014
 MOVE.w 24(A2),(A0)+  ;2106: 30ea0018
 MOVE.w 26(A2),(A0)+  ;210a: 30ea001a
 MOVE.l 28(A2),(A0)+  ;210e: 20ea001c
 MOVE.l 32(A2),(A0)+  ;2112: 20ea0020
 MOVE.l 44(A2),(A0)+  ;2116: 20ea002c
 MOVE.l 36(A2),(A0)+  ;211a: 20ea0024
 MOVE.l 40(A2),(A0)+  ;211e: 20ea0028
 MOVE.l A2,D0   ;2122: 200a
 TST.l LAB_001E+2  ;2124: 4ab900001920
 BEQ.w LAB_00B8  ;212a: 67000006
 BSR.w LAB_001E  ;212e: 6100f7ee
LAB_00B8:
 MOVEA.l LAB_00B9(PC),A1  ;2132: 227a000a
 JSR -378(A6)  ;2136: 4eaefe86
 MOVEQ #-1,D0   ;213a: 70ff
 RTS    ;213c: 4e75
LAB_00B9:
 ORI.b #$00,D0   ;213e: 00000000
codefinit:
 MOVEA.l ABSEXECBASE,A6  ;2142: 2c7900000004
 MOVEQ #0,D0   ;2148: 7000
 MOVE.b LAB_0048+1(PC),D0 ;214a: 103af859
 JSR -336(A6)  ;214e: 4eaefeb0
 MOVEA.l ABSEXECBASE,A1  ;2152: 227900000004
 MOVEA.l 276(A1),A1  ;2158: 22690114
 MOVE.l LAB_004F(PC),184(A1) ;215c: 237af86400b8
 RTS    ;2162: 4e75
LAB_00BB:
 MOVE.l 26(A2),D0  ;2164: 202a001a
 BEQ.w LAB_00BF  ;2168: 67000046
 BTST #0,14(A2)  ;216c: 082a0000000e
 BNE.w LAB_00BF  ;2172: 6600003c
 MOVEM.l A4-A5,-(A7)  ;2176: 48e7000c
 MOVEA.l D0,A3   ;217a: 2640
 MOVEA.l 12(A3),A4  ;217c: 286b000c
 MOVEA.l 20(A3),A5  ;2180: 2a6b0014
 MOVE.l A4,D2   ;2184: 240c
 SUB.l A5,D2   ;2186: 948d
 MOVE.l -(A5),D1  ;2188: 2225
 SUB.l D2,D1   ;218a: 9282
LAB_00BC:
 SUBQ.l #1,D1   ;218c: 5381
 BMI.w LAB_00BD  ;218e: 6b000010
 TST.b (A4)+   ;2192: 4a1c
 BNE.w LAB_00BC  ;2194: 6600fff6
 MOVE.l A4,12(A3)  ;2198: 274c000c
 BRA.w LAB_00BE  ;219c: 60000008
LAB_00BD:
 MOVE.l 20(A3),12(A3)  ;21a0: 276b0014000c
LAB_00BE:
 MOVEM.l (A7)+,A4-A5  ;21a6: 4cdf3000
 MOVEA.l A2,A3   ;21aa: 264a
 BRA.w LAB_00C6  ;21ac: 600000c6
LAB_00BF:
 RTS    ;21b0: 4e75
LAB_00C0:
 MOVEA.l 12(A1),A2  ;21b2: 2469000c
 MOVE.w 38(A2),LAB_0028+2 ;21b6: 33ea00260000193c
 CMPI.w #$624c,40(A2)  ;21be: 0c6a624c0028
 BNE.w LAB_00C3  ;21c4: 66000060
 MOVE.w 42(A2),D6  ;21c8: 3c2a002a
 BEQ.w LAB_00BB  ;21cc: 6700ff96
 MOVEA.l 20(A1),A3  ;21d0: 26690014
 LEA 62(A3),A3  ;21d4: 47eb003e
LAB_00C1:
 MOVE.l (A3),D0   ;21d8: 2013
 BEQ.w LAB_00C2  ;21da: 67000034
 MOVEA.l D0,A3   ;21de: 2640
 CMPI.w #$624c,40(A3)  ;21e0: 0c6b624c0028
 BNE.w LAB_00C1  ;21e6: 6600fff0
 Dc.w $bc6b   ;21ea
 Dc.w $002a   ;21ec
 BNE.w LAB_00C1  ;21ee: 6600ffe8
 Dc.w $b5cb   ;21f2
 BEQ.w LAB_00C1  ;21f4: 6700ffe2
 BTST #7,13(A3)  ;21f8: 082b0007000d
 BEQ.w LAB_00C1  ;21fe: 6700ffd8
 BCLR #7,13(A3)  ;2202: 08ab0007000d
 BSR.w LAB_00C4  ;2208: 6100001e
 BRA.w LAB_00C1  ;220c: 6000ffca
LAB_00C2:
 BTST #7,13(A2)  ;2210: 082a0007000d
 BNE.w LAB_00C3  ;2216: 6600000e
 BSET #7,13(A2)  ;221a: 08ea0007000d
 MOVEA.l A2,A3   ;2220: 264a
 BRA.w LAB_00C4  ;2222: 60000004
LAB_00C3:
 RTS    ;2226: 4e75
LAB_00C4:
 MOVE.w 12(A3),D0  ;2228: 302b000c
 Dc.w $c07c   ;222c
 Dc.w $0003   ;222e
 BEQ.w LAB_00C5  ;2230: 6700000a
 CMPI.w #$0001,D0  ;2234: 0c400001
 BNE.w LAB_00C6  ;2238: 6600003a
LAB_00C5:
 MOVE.l 18(A3),-(A7)  ;223c: 2f2b0012
 CLR.l 18(A3)   ;2240: 42ab0012
 MOVE.l 22(A3),-(A7)  ;2244: 2f2b0016
 CLR.l 22(A3)   ;2248: 42ab0016
 MOVE.l 26(A3),-(A7)  ;224c: 2f2b001a
 CLR.l 26(A3)   ;2250: 42ab001a
 MOVE.w 12(A3),-(A7)  ;2254: 3f2b000c
 BSET #7,13(A3)  ;2258: 08eb0007000d
 BSR.w LAB_00C6  ;225e: 61000014
 MOVE.w (A7)+,12(A3)  ;2262: 375f000c
 MOVE.l (A7)+,26(A3)  ;2266: 275f001a
 MOVE.l (A7)+,22(A3)  ;226a: 275f0016
 MOVE.l (A7)+,18(A3)  ;226e: 275f0012
 RTS    ;2272: 4e75
LAB_00C6:
 MOVEM.l A0-A2/A6,-(A7)  ;2274: 48e700e2
 MOVEA.l A3,A0   ;2278: 204b
 MOVEA.l 20(A1),A1  ;227a: 22690014
 SUBA.l A2,A2   ;227e: 95ca
 MOVEQ #1,D0   ;2280: 7001
 MOVEA.l LAB_0050(PC),A6  ;2282: 2c7af742
 JSR -432(A6)  ;2286: 4eaefe50
 MOVEM.l (A7)+,A0-A2/A6  ;228a: 4cdf4700
 RTS    ;228e: 4e75
LAB_00C7:
 Dc.w $0000   ;2290
dowaitevent:
 BSR.w LAB_00AD  ;2292: 6100fdae
LAB_00C9:
 MOVE.l LAB_0037(PC),D0  ;2296: 203af6d2
 BNE.w LAB_00CD  ;229a: 66000042
 MOVE.l A6,-(A7)  ;229e: 2f0e
 MOVEA.l ABSEXECBASE,A6  ;22a0: 2c7900000004
 MOVE.l LAB_00CF(PC),D0  ;22a6: 203a004e
 JSR -318(A6)  ;22aa: 4eaefec2
 MOVEA.l (A7)+,A6  ;22ae: 2c5f
 MOVE.l D0,LAB_00D0  ;22b0: 23c0000022fa
 MOVEQ #0,D1   ;22b6: 7200
LAB_00CA:
 BTST D1,D0   ;22b8: 0300
 BNE.w LAB_00CB  ;22ba: 66000008
 ADDQ.l #1,D1   ;22be: 5281
 BRA.w LAB_00CA  ;22c0: 6000fff6
LAB_00CB:
 Dc.w $b239   ;22c4
 Dc.l LAB_0048+1  ;22c6: 000019a5
 BEQ.w LAB_00CC  ;22ca: 6700000e
 LEA LAB_00D1(PC),A0  ;22ce: 41fa002e
 ASL.l #2,D1   ;22d2: e581
 MOVE.l 0(A0,D1.l),D0  ;22d4: 20301800
 RTS    ;22d8: 4e75
LAB_00CC:
 BSR.w LAB_00AD  ;22da: 6100fd66
LAB_00CD:
 MOVE.b #$00,LAB_00D2  ;22de: 13fc00000000237e
 BSR.w LAB_00D6  ;22e6: 610000b0
 BEQ.w LAB_00C9  ;22ea: 6700ffaa
 RTS    ;22ee: 4e75
dowaitsigbits:
 MOVE.l LAB_00D0(PC),D0  ;22f0: 203a0008
 RTS    ;22f4: 4e75
LAB_00CF:
 ORI.b #$00,D0   ;22f6: 00000000
LAB_00D0:
 ORI.b #$00,D0   ;22fa: 00000000
LAB_00D1:
 ORI.b #$00,D0   ;22fe: 00000000
 ORI.b #$00,D0   ;2302: 00000000
 ORI.b #$00,D0   ;2306: 00000000
 ORI.b #$00,D0   ;230a: 00000000
 ORI.b #$00,D0   ;230e: 00000000
 ORI.b #$00,D0   ;2312: 00000000
 ORI.b #$00,D0   ;2316: 00000000
 ORI.b #$00,D0   ;231a: 00000000
 ORI.b #$00,D0   ;231e: 00000000
 ORI.b #$00,D0   ;2322: 00000000
 ORI.b #$00,D0   ;2326: 00000000
 ORI.b #$00,D0   ;232a: 00000000
 ORI.b #$00,D0   ;232e: 00000000
 ORI.b #$00,D0   ;2332: 00000000
 ORI.b #$00,D0   ;2336: 00000000
 ORI.b #$00,D0   ;233a: 00000000
 ORI.b #$00,D0   ;233e: 00000000
 ORI.b #$00,D0   ;2342: 00000000
 ORI.b #$00,D0   ;2346: 00000000
 ORI.b #$00,D0   ;234a: 00000000
 ORI.b #$00,D0   ;234e: 00000000
 ORI.b #$00,D0   ;2352: 00000000
 ORI.b #$00,D0   ;2356: 00000000
 ORI.b #$00,D0   ;235a: 00000000
 ORI.b #$00,D0   ;235e: 00000000
 ORI.b #$00,D0   ;2362: 00000000
 ORI.b #$00,D0   ;2366: 00000000
 ORI.b #$00,D0   ;236a: 00000000
 ORI.b #$00,D0   ;236e: 00000000
 ORI.b #$00,D0   ;2372: 00000000
 ORI.b #$00,D0   ;2376: 00000000
 ORI.b #$00,D0   ;237a: 00000000

LAB_00D2: Dc.w $0000   ;237e

doeventtest:
 MOVE.b #$01,LAB_00D2  ;2380: 13fc00010000237e
 BRA.w LAB_00D5  ;2388: 6000000a
.doevent:
 MOVE.b #$00,LAB_00D2  ;238c: 13fc00000000237e
LAB_00D5:
 BSR.w LAB_00AD  ;2394: 6100fcac
LAB_00D6:
 LEA LAB_0037(PC),A0  ;2398: 41faf5d0
 MOVE.l (A0),D0   ;239c: 2010
 BEQ.w LAB_00E7  ;239e: 670001ec
 MOVEA.l D0,A1   ;23a2: 2240
 MOVE.l 4(A1),D7  ;23a4: 2e290004
 MOVE.l 8(A1),evcode ;23a8: 23e900080000192c
 MOVE.l 12(A1),LAB_0024+2 ;23b0: 23e9000c00001930
 MOVE.l 24(A1),LAB_0026+2 ;23b8: 23e9001800001934
 MOVE.l 28(A1),LAB_0027+2 ;23c0: 23e9001c00001938
 CMPI.w #$0040,D7  ;23c8: 0c470040
 BNE.w LAB_00D7  ;23cc: 66000010
 CLR.w LAB_00C7  ;23d0: 427900002290
 BSR.w LAB_00C0  ;23d6: 6100fdda
 BRA.w LAB_00E4  ;23da: 6000018a
LAB_00D7:
 MOVE.w LAB_00C7(PC),D0  ;23de: 303afeb0
 BEQ.w LAB_00D8  ;23e2: 6700001a
 MOVE.l 16(A1),LAB_0045+2 ;23e6: 23e9001000001992
 MOVE.w D0,LAB_0028+2  ;23ee: 33c00000193c
 CLR.w LAB_00C7  ;23f4: 427900002290
 MOVEQ #64,D0   ;23fa: 7040
 RTS    ;23fc: 4e75
LAB_00D8:
 CMPI.w #$0020,D7  ;23fe: 0c470020
 BNE.w LAB_00D9  ;2402: 66000024
 MOVEA.l 12(A1),A2  ;2406: 2469000c
 MOVE.w 38(A2),LAB_0028+2 ;240a: 33ea00260000193c
 BTST #2,17(A2)  ;2412: 082a00020011
 BEQ.w LAB_00E4  ;2418: 6700014c
 MOVE.w LAB_0028+2(PC),LAB_00C7 ;241c: 33faf51e00002290
 BRA.w LAB_00E4  ;2424: 60000140
LAB_00D9:
 CMPI.w #$0100,D7  ;2428: 0c470100
 BNE.w LAB_00DF  ;242c: 660000b4
 MOVE.w 8(A1),D1  ;2430: 32290008
 CMPI.w #$ffff,D1  ;2434: 0c41ffff
 BNE.w LAB_00DA  ;2438: 66000008
 MOVEQ #0,D7   ;243c: 7e00
 BRA.w LAB_00E4  ;243e: 60000126
LAB_00DA:
 Dc.w $c27c   ;2442
 Dc.w $001f   ;2444
 CMPI.w #$001f,D1  ;2446: 0c41001f
 BNE.w LAB_00DB  ;244a: 66000004
 MOVEQ #-1,D1   ;244e: 72ff
LAB_00DB:
 MOVE.w D1,LAB_002A  ;2450: 33c100001942
 MOVE.w 8(A1),D1  ;2456: 32290008
 LSR.w #5,D1   ;245a: ea49
 Dc.w $c27c   ;245c
 Dc.w $003f   ;245e
 CMPI.w #$003f,D1  ;2460: 0c41003f
 BNE.w LAB_00DC  ;2464: 66000004
 MOVEQ #-1,D1   ;2468: 72ff
LAB_00DC:
 MOVE.w D1,LAB_002A+2  ;246a: 33c100001944
 MOVE.w 8(A1),D1  ;2470: 32290008
 ROL.w #5,D1   ;2474: eb59
 Dc.w $c27c   ;2476
 Dc.w $001f   ;2478
 CMPI.w #$001f,D1  ;247a: 0c41001f
 BNE.w LAB_00DD  ;247e: 66000004
 MOVEQ #-1,D1   ;2482: 72ff
LAB_00DD:
 MOVE.w D1,LAB_002C  ;2484: 33c100001946
 MOVEA.l 20(A1),A2  ;248a: 24690014
 MOVEA.l 28(A2),A2  ;248e: 246a001c
 MOVE.w 8(A1),D6  ;2492: 3c290008
 BSR.w LAB_00E4  ;2496: 610000ce
 MOVE.l A3,-(A7)  ;249a: 2f0b
 BSR.w LAB_00E8  ;249c: 610000f0
 MOVE.w 32(A3),D6  ;24a0: 3c2b0020
 CMPI.w #$ffff,D6  ;24a4: 0c46ffff
 BEQ.w LAB_00DE  ;24a8: 6700002e
 MOVEQ #32,D0   ;24ac: 7020
 MOVEQ #1,D1   ;24ae: 7201
 ALibJsr $c002
 MOVEA.l D0,A0   ;24b6: 2040
 MOVEA.l LAB_0038(PC),A1  ;24b8: 227af4b4
 MOVE.l A0,(A1)   ;24bc: 2288
 MOVE.l A0,LAB_0038  ;24be: 23c80000196e
 CLR.l (A0)+   ;24c4: 4298
 MOVE.l #$00000100,(A0)+ ;24c6: 20fc00000100
 MOVE.w D6,(A0)   ;24cc: 3086
 ADDQ.w #8,A0   ;24ce: 5048
 MOVE.l LAB_0045+2(PC),(A0)+ ;24d0: 20faf4c0
 MOVE.l LAB_0029(PC),(A0) ;24d4: 20baf468
LAB_00DE:
 MOVEA.l (A7)+,A3  ;24d8: 265f
 MOVE.l #$00000100,D0  ;24da: 203c00000100
 RTS    ;24e0: 4e75
LAB_00DF:
 CMPI.w #$0400,D7  ;24e2: 0c470400
 BNE.w LAB_00E1  ;24e6: 66000058
 MOVE.w 8(A1),D0  ;24ea: 30290008
 BTST #7,D0   ;24ee: 08000007
 BNE.w LAB_00E0  ;24f2: 66000028
 MOVE.l A1,-(A7)  ;24f6: 2f09
 CLR.w LAB_0139+2  ;24f8: 427900002b3c
 MOVE 10(a1),d1 : ALibJsr #rawkeylib LSL 7+1    ; input d0:eventcode, d1:eventqualifier
 MOVEA.l (A7)+,A1  ;2508: 225f
 TST.w D0   ;250a: 4a40
 BEQ.w LAB_00E3  ;250c: 67000052
 MOVE.w D0,LAB_0030  ;2510: 33c000001952
 MOVE.w D0,LAB_0139+2  ;2516: 33c000002b3c
LAB_00E0:
 MOVE.w 8(A1),LAB_0033  ;251c: 33e900080000195a
 MOVE.w 8(A1),LAB_0036  ;2524: 33e900080000195e
 MOVE.w 10(A1),LAB_0032+2 ;252c: 33e9000a00001958
 MOVE.l 20(A1),LAB_0030+2 ;2534: 23e9001400001954
 BRA.w LAB_00E4  ;253c: 60000028
LAB_00E1:
 CMPI.w #$0008,D7  ;2540: 0c470008
 BNE.w LAB_00E2  ;2544: 66000016
 MOVE.w 8(A1),LAB_0041+2 ;2548: 33e9000800001986
 MOVE.l 20(A1),LAB_0043  ;2550: 23e9001400001988
 BRA.w LAB_00E4  ;2558: 6000000c
LAB_00E2:
 BRA.w LAB_00E4  ;255c: 60000008
LAB_00E3:
 MOVEQ #0,D7   ;2560: 7e00
 BRA.w LAB_00E5  ;2562: 60000012
LAB_00E4:
 MOVE.l 20(A1),LAB_0029  ;2566: 23e900140000193e
 MOVE.l 16(A1),LAB_0045+2 ;256e: 23e9001000001992
LAB_00E5:
 TST.b LAB_00D2  ;2576: 4a390000237e
 BNE.w LAB_00E6  ;257c: 66000006
 BSR.w LAB_00F0  ;2580: 6100005c
LAB_00E6:
 MOVE.l D7,D0   ;2584: 2007
 MOVE.l D0,LAB_017C  ;2586: 23c000003176
LAB_00E7:
 RTS    ;258c: 4e75
LAB_00E8:
 MOVEA.l A2,A3   ;258e: 264a
 MOVE.w D6,D0   ;2590: 3006
 Dc.w $c07c   ;2592
 Dc.w $001f   ;2594
 BEQ.w LAB_00EA  ;2596: 6700000a
 SUBQ.w #1,D0   ;259a: 5340
LAB_00E9:
 MOVEA.l (A3),A3   ;259c: 2653
 DBF D0,LAB_00E9  ;259e: 51c8fffc
LAB_00EA:
 MOVEA.l 18(A3),A3  ;25a2: 266b0012
 MOVE.w D6,D0   ;25a6: 3006
 LSR.w #5,D0   ;25a8: ea48
 Dc.w $c07c   ;25aa
 Dc.w $003f   ;25ac
 BEQ.w LAB_00EC  ;25ae: 6700000a
 SUBQ.w #1,D0   ;25b2: 5340
LAB_00EB:
 MOVEA.l (A3),A3   ;25b4: 2653
 DBF D0,LAB_00EB  ;25b6: 51c8fffc
LAB_00EC:
 MOVE.w D6,D0   ;25ba: 3006
 ROL.w #5,D0   ;25bc: eb58
 Dc.w $c07c   ;25be
 Dc.w $001f   ;25c0
 CMPI.w #$001f,D0  ;25c2: 0c40001f
 BEQ.w LAB_00EE  ;25c6: 67000012
 MOVEA.l 28(A3),A3  ;25ca: 266b001c
 SUBQ.w #1,D0   ;25ce: 5340
 BMI.w LAB_00EE  ;25d0: 6b000008
LAB_00ED:
 MOVEA.l (A3),A3   ;25d4: 2653
 DBF D0,LAB_00ED  ;25d6: 51c8fffc
LAB_00EE:
 RTS    ;25da: 4e75
LAB_00EF:
 MOVEA.l A2,A0   ;25dc: 204a
LAB_00F0:
 MOVE.l (A1),(A0)  ;25de: 2091
 Dc.w $b3fa   ;25e0
 Dc.w $f38c   ;25e2
 BNE.w LAB_00F1  ;25e4: 66000008
 MOVE.l A0,LAB_0038  ;25e8: 23c80000196e
LAB_00F1:
 MOVEQ #32,D0   ;25ee: 7020
 ALibJsr $c003
 RTS    ;25f6: 4e75
LAB_00F2:
 LEA LAB_0037(PC),A0  ;25f8: 41faf370
LAB_00F3:
 MOVE.l (A0),D0   ;25fc: 2010
 BEQ.w LAB_00F4  ;25fe: 6700000c
 MOVEA.l D0,A1   ;2602: 2240
 BSR.w LAB_00F0  ;2604: 6100ffd8
 BRA.w LAB_00F3  ;2608: 6000fff2
LAB_00F4:
 RTS    ;260c: 4e75
LAB_00F5:
 LEA LAB_0037(PC),A0  ;260e: 41faf35a
LAB_00F6:
 MOVE.l (A0),D0   ;2612: 2010
 BEQ.w LAB_00F7  ;2614: 67000016
 MOVEA.l D0,A1   ;2618: 2240
 MOVE.l 20(A1),D1  ;261a: 22290014
 Dc.w $b293   ;261e
 BNE.w LAB_00F8  ;2620: 6600000c
 BSR.w LAB_00F0  ;2624: 6100ffb8
 BRA.w LAB_00F6  ;2628: 6000ffe8
LAB_00F7:
 RTS    ;262c: 4e75
LAB_00F8:
 MOVEA.l A1,A0   ;262e: 2049
 BRA.w LAB_00F6  ;2630: 6000ffe0

.doeventwindow:;which window did the event happen in?
  ;
  MOVE.l LAB_0029(PC),D0
  MOVEA.l D0,A0
  BEQ.w 'fail
    MOVE.w 120(A0),D0
    RTS
 'fail:
  MOVEQ #-1,D0
RTS

.doemousex:   MOVE.w LAB_0045+2(PC),D0 : RTS
.doemousey:   MOVE.w LAB_0046(PC),D0 : RTS
.dogadgethit:MOVE.w LAB_0028+2(PC),D0 : RTS
.domenuhit:  MOVE.w LAB_002A(PC),D0 : RTS
.doitemhit:  MOVE.w LAB_002A+2(PC),D0 : RTS
.dosubhit:   MOVE.w LAB_002C(PC),D0 : RTS
.doeventcode:   MOVEQ #0,D0 : MOVE.w evcode(PC),D0 : RTS
.doeventqualifier:   MOVE.w LAB_0024(PC),D0 : RTS

.dowindow3: ;simon was here -- unsued in this version
  MOVE.l A1,bmapbase
  MOVE.w -10(A2),D3
  MOVE.w -12(A2),D4
BRA.w dowindow

.dowindow2:
  LEA zero(PC),A0

.dowindow:                                  ;a3=window item, a1=used screen, a0=gadgetlist
                                            ;d0=window number

MOVE.l A3,0(A5,D6.w) : MOVE.l A3,-(A7)      ;set used window!
;
;
;
LSR.w #5,D0 : MOVE.w D0,-(A7)               ;simon was here

MOVEM.l D1/A0-A1,-(A7)                      ; free possibly opened window with given window number
BSR.w freewindow
MOVEM.l (A7)+,D1/A0-A1

MOVE.l A4,-(A7)

LEA anewwindow(PC),A4
CLR.l 38(A4) : CLR.l 42(A4)

MOVE.l (A0),18(A4)                          ; attach GadgetList to Window

MOVE.w _sizelimitsok(PC),D0 : BEQ.w 'nosl
  MOVE.l _sizelimits(PC),38(A4)                ; MinWidth
  MOVE.l _sizelimits+4(PC),42(A4)              ; MinHeight
'nosl:

MOVE.w -(A2),(A4) : MOVE.w -(A2),2(A4)      ; Window Dimensions
MOVE.w -(A2),4(A4) : MOVE.w -(A2),6(A4)

BTST #4,idcmp+3 : BEQ.w 'nofm
  BSET #9,D1
'nofm:

BTST #7,D1 : BEQ.w notsuper
  MOVE.l bmapbase(PC),34(A4)                ; attach bitmap to window
  BSET #17,D1
notsuper:
OR.l #$40000,d1                             ; set Flag WFLG_NW_EXTENDED

MOVE.l D1,14(A4)                            ; Flags

MOVE.l -(A2),D1
MOVE.l D2,D0
ALibJsr $cf01
MOVE.l D0,26(A4)                            ; Titlestring

MOVE.b D3,8(A4):MOVE.b D4,9(A4)             ; DetailPen,BlockPen

MOVEA.l (A1),A1:MOVE.l A1,30(A4)
MOVE.w 20(A1),D0:AND #15,d0:MOVE.w D0,46(A4); Type
 
MOVEA.l A4,A0
MOVEA.l (A7)+,A4
JSR _OpenWindow(A6)

MOVE.l D0,(A3) : BEQ.w 'done
  MOVEA.l D0,A0
  MOVE.l #LAB_0046+2,86(A0)
  MOVE.w (A7)+,120(A0)
  MOVE.w 54(A0),122(A0)
  BTST #2,24+2(A0)
  BEQ.w 'nogzz
    CLR.w 122(A0)
  'nogzz:
  CLR.l 4(A3) : CLR.l 16(A3)
  MOVE.b 122(A0),5(A3) : MOVE.b 123(A0),7(A3)
  MOVE.l idcmp(PC),D0 : JSR _ModifyIDCMP(A6)
  ;
  MOVEA.l (A7)+,A3
  BSR.w dousewindow
  MOVE.l (A3),D0
  RTS
'done:
  ADDQ.l #6,A7
  MOVEQ #0,D0
RTS

;--------------------------------------------------------------------

.dowindowtags3:
  MOVE.l #$00000002,usertags
  MOVE.l D3,LAB_0118
BRA.w dowindowtags1

.dowindowtags2:
  MOVE.l -(A2),-(A7)
  LEA usertags(PC),A0
  BRA.w gettags
  LAB_010D:
    MOVE.l -(A2),D4
    MOVE.l -(A2),D5
    MOVEM.l D4-D5,(A0)
    ADDQ.w #8,A0
    gettags:
  DBF D7,LAB_010D
  MOVE.l #$00000000,(A0)+
  MOVE.l (A7)+,(A2)+

.dowindowtags1:
 MOVEM.l D0-D1,-(A7)  ;27be: 48e7c000
 MOVE.l D2,D0   ;27c2: 2002
 MOVE.l -(A2),D1  ;27c4: 2222
 ALibJsr $cf01
 MOVE.l D0,D2   ;27cc: 2400
 MOVEM.l (A7)+,D0-D1  ;27ce: 4cdf0003
 MOVE.l A3,0(A5,D6.w)  ;27d2: 2b8b6000
 MOVE.l A3,-(A7)  ;27d6: 2f0b
 LSR.w #5,D0   ;27d8: ea48
 MOVE.w D0,-(A7)  ;27da: 3f00
 MOVEM.l D1/A0-A1,-(A7)  ;27dc: 48e740c0
 BSR.w freewindow  ;27e0: 61000146
 MOVEM.l (A7)+,D1/A0-A1  ;27e4: 4cdf0302
 MOVE.l D1,LAB_0114+2  ;27e8: 23c10000285a
 MOVE.l D2,LAB_0115+2  ;27ee: 23c200002862
 MOVE.l (A1),LAB_0116+2  ;27f4: 23d10000286a
 SUBA.l A0,A0   ;27fa: 91c8
 LEA LAB_0113(PC),A1  ;27fc: 43fa0058
 JSR -606(A6)  ;2800: 4eaefda2
 MOVE.l D0,(A3)   ;2804: 2680
 BEQ.w LAB_0174  ;2806: 6700079c
 MOVEA.l D0,A0   ;280a: 2040
 MOVE.l #LAB_0046+2,86(A0) ;280c: 217c000019960056
 MOVE.w (A7)+,120(A0)  ;2814: 315f0078
 MOVE.w 54(A0),122(A0)  ;2818: 31680036007a
 BTST #2,26(A0)  ;281e: 08280002001a
 BEQ.w LAB_0111  ;2824: 67000006
 CLR.w 122(A0)   ;2828: 4268007a
LAB_0111:
 CLR.l 4(A3)   ;282c: 42ab0004
 CLR.l 16(A3)   ;2830: 42ab0010
 MOVE.b 122(A0),5(A3)  ;2834: 1768007a0005
 MOVE.b 123(A0),7(A3)  ;283a: 1768007b0007
 MOVE.l idcmp(PC),D0  ;2840: 203af0e6
 JSR -150(A6)  ;2844: 4eaeff6a
 MOVEA.l (A7)+,A3  ;2848: 265f
 BSR.w dousewindow  ;284a: 6100f56e
 MOVE.l (A3),D0   ;284e: 2013
 RTS    ;2850: 4e75
textfont:
 ORI.b #$00,D0   ;2852: 00000000
LAB_0113:
 OR.b D0,D0   ;2856: 8000
LAB_0114:
 ORI.w #$0000,0(A3)  ;2858: 006b00000000
 OR.b D0,D0   ;285e: 8000
LAB_0115:
 ORI.w #$0000,0(A6)  ;2860: 006e00000000
 OR.b D0,D0   ;2866: 8000
LAB_0116:
 ORI.w #$0000,0(A0,D0.w) ;2868: 007000000000
 OR.b D0,D0   ;286e: 8000
 ORI.l #$ffffffff,(A3)  ;2870: 0093ffffffff
usertags:
 ORI.b #$00,D0   ;2876: 00000000
LAB_0118:
 ORI.b #$00,D0   ;287a: 00000000
 ORI.b #$00,D0   ;287e: 00000000
 ORI.b #$00,D0   ;2882: 00000000
 ORI.b #$00,D0   ;2886: 00000000
 ORI.b #$00,D0   ;288a: 00000000
 ORI.b #$00,D0   ;288e: 00000000
 ORI.b #$00,D0   ;2892: 00000000
 ORI.b #$00,D0   ;2896: 00000000
 ORI.b #$00,D0   ;289a: 00000000
 ORI.b #$00,D0   ;289e: 00000000
 ORI.b #$00,D0   ;28a2: 00000000
 ORI.b #$00,D0   ;28a6: 00000000
 ORI.b #$00,D0   ;28aa: 00000000
 ORI.b #$00,D0   ;28ae: 00000000
 ORI.b #$00,D0   ;28b2: 00000000
 ORI.b #$00,D0   ;28b6: 00000000
 ORI.b #$00,D0   ;28ba: 00000000
 ORI.b #$00,D0   ;28be: 00000000
 ORI.b #$00,D0   ;28c2: 00000000
 ORI.b #$00,D0   ;28c6: 00000000
 ORI.b #$00,D0   ;28ca: 00000000
 ORI.b #$00,D0   ;28ce: 00000000
 ORI.b #$00,D0   ;28d2: 00000000
 ORI.b #$00,D0   ;28d6: 00000000
 ORI.b #$00,D0   ;28da: 00000000
 ORI.b #$00,D0   ;28de: 00000000
 ORI.b #$00,D0   ;28e2: 00000000
 ORI.b #$00,D0   ;28e6: 00000000
 ORI.b #$00,D0   ;28ea: 00000000
 ORI.b #$00,D0   ;28ee: 00000000
 ORI.b #$00,D0   ;28f2: 00000000

;--------------------------------------------------------------------

bmapbase: ORI.b #$00,D0

.dowfont:
  MOVE.w 6(A0),D1
.dowfont2:
  MOVEA.l (A1),A1
  MOVEA.l 50(A1),A1

  MOVEM.l D1/A1,-(A7)
  MOVEA.l 8(A0),A0
  MOVE.l A0,textfont
  JSR -66(A6)      ; A1=rp, A0=textfont
  MOVEM.l (A7)+,D0/A1

  MOVEQ #-1,D1
  JSR -90(A6)
  MOVE.l textfont,D0
RTS
;old version
;MOVE.l (a1),a1
;MOVE.l 50(a1),a1
;MOVE.l 8(a0),a0
;JMP _SetFont(a6)

.freewindow: ;something screwy is happening here!
;
 MOVE.l (A3),D0   ;2928: 2013
 BEQ.w LAB_0123  ;292a: 67000094
 MOVE.l A6,-(A7)  ;292e: 2f0e
 MOVEA.l (A3),A0   ;2930: 2053
 MOVE.l 32(A0),D0  ;2932: 20280020
 TST.l D0   ;2936: 4a80
 BEQ.w LAB_011D  ;2938: 67000002
LAB_011D:
 MOVEA.l ABSEXECBASE,A6  ;293c: 2c7900000004
 JSR -132(A6)  ;2942: 4eaeff7c
 LEA LAB_0046+2(PC),A0 ;2946: 41faf04e
 MOVE.l 20(A0),D0  ;294a: 20280014
 BEQ.w LAB_0120  ;294e: 67000028
LAB_011E:
 MOVEA.l D0,A1   ;2952: 2240
 MOVE.l (A1),D0   ;2954: 2011
 BEQ.w LAB_0120  ;2956: 67000020
 MOVE.l 44(A1),D1  ;295a: 2229002c
 MOVE.l D0,-(A7)  ;295e: 2f00
 Dc.w $b293   ;2960
 BNE.w LAB_011F  ;2962: 6600000e
 MOVE.l A1,-(A7)  ;2966: 2f09
 JSR -252(A6)  ;2968: 4eaeff04
 MOVEA.l (A7)+,A1  ;296c: 225f
 JSR -378(A6)  ;296e: 4eaefe86
LAB_011F:
 MOVE.l (A7)+,D0  ;2972: 201f
 BRA.w LAB_011E  ;2974: 6000ffdc
LAB_0120:
 MOVEA.l (A7)+,A6  ;2978: 2c5f
 MOVEA.l (A3),A0   ;297a: 2053
 MOVEA.l ABSEXECBASE,A1  ;297c: 227900000004
 MOVEA.l 276(A1),A1  ;2982: 22690114
 Dc.w $b1e9   ;2986
 Dc.w $00b8   ;2988
 BNE.w LAB_0121  ;298a: 66000006
 CLR.l 184(A1)   ;298e: 42a900b8
LAB_0121:
 MOVE.l 28(A0),D0  ;2992: 2028001c
 BEQ.w LAB_0122  ;2996: 67000008
 JSR -54(A6)   ;299a: 4eaeffca
 MOVEA.l (A3),A0   ;299e: 2053
LAB_0122:
 CLR.l 86(A0)   ;29a0: 42a80056
 MOVEM.l A0/A6,-(A7)  ;29a4: 48e70082
 MOVEA.l ABSEXECBASE,A6  ;29a8: 2c7900000004
 JSR -138(A6)  ;29ae: 4eaeff76
 MOVEM.l (A7)+,A0/A6  ;29b2: 4cdf4100
 JSR -72(A6)   ;29b6: 4eaeffb8
 BSR.w LAB_00F5  ;29ba: 6100fc52
 CLR.l (A3)   ;29be: 4293
LAB_0123:
 RTS    ;29c0: 4e75
buttons:
 MOVE.l inwindow(PC),D1  ;29c2: 223aefae
 BEQ.w err6  ;29c6: 670007d6
 MOVEA.l D1,A1   ;29ca: 2241
 MOVE.l (A1),D2   ;29cc: 2411
 BEQ.w err6  ;29ce: 670007ce
 MOVE.l LAB_0043(PC),D1  ;29d2: 223aefb4
 BEQ.w LAB_0126  ;29d6: 6700001c
 Dc.w $b282   ;29da
 BNE.w LAB_0125  ;29dc: 66000010
 MOVE.w LAB_0041+2(PC),D2 ;29e0: 343aefa4
 CLR.l LAB_0041+2  ;29e4: 42b900001986
 BRA.w LAB_012A  ;29ea: 60000042
LAB_0125:
 CLR.l LAB_0043  ;29ee: 42b900001988
LAB_0126:
 BSR.w LAB_00AD  ;29f4: 6100f64c
 LEA LAB_0037(PC),A2  ;29f8: 45faef70
LAB_0127:
 MOVE.l (A2),D0   ;29fc: 2012
 BEQ.w LAB_012D  ;29fe: 67000052
 MOVEA.l D0,A1   ;2a02: 2240
 CMPI.l #$00000008,4(A1) ;2a04: 0ca9000000080004
 BNE.w LAB_0128  ;2a0c: 66000012
 Dc.w $b4a9   ;2a10
 Dc.w $0014   ;2a12
 BEQ.w LAB_0129  ;2a14: 67000010
 BSR.w LAB_00EF  ;2a18: 6100fbc2
 BRA.w LAB_0127  ;2a1c: 6000ffde
LAB_0128:
 MOVEA.l A1,A2   ;2a20: 2449
 BRA.w LAB_0127  ;2a22: 6000ffd8
LAB_0129:
 MOVE.w 8(A1),D2  ;2a26: 34290008
 BSR.w LAB_00EF  ;2a2a: 6100fbb0
LAB_012A:
 MOVEQ #0,D0   ;2a2e: 7000
 BCLR #7,D2   ;2a30: 08820007
 BEQ.w LAB_012B  ;2a34: 67000004
 MOVEQ #4,D0   ;2a38: 7004
LAB_012B:
 CMPI.b #$68,D2   ;2a3a: 0c020068
 BNE.w LAB_012C  ;2a3e: 66000006
 ORI.w #$0001,D0  ;2a42: 00400001
LAB_012C:
 CMPI.b #$69,D2   ;2a46: 0c020069
 BNE.w LAB_012D  ;2a4a: 66000006
 ORI.w #$0002,D0  ;2a4e: 00400002
LAB_012D:
 RTS    ;2a52: 4e75
 BRA.w LAB_013A  ;2a54: 600000ea
windowinp:
 MOVE.l D1,-(A7)  ;2a58: 2f01
 MOVEQ #0,D0   ;2a5a: 7000
 MOVE.w LAB_0030(PC),D0  ;2a5c: 303aeef4
 BEQ.w LAB_012F  ;2a60: 67000036
 MOVEA.l inwindow(PC),A6  ;2a64: 2c7aef0c
 MOVE.l (A6),D1   ;2a68: 2216
 BEQ.w err6  ;2a6a: 67000732
 Dc.w $b2ba   ;2a6e
 Dc.w $eee4   ;2a70
 BNE.w LAB_012F  ;2a72: 66000024
 MOVE.l (A7)+,D1  ;2a76: 221f
 CLR.w LAB_0030  ;2a78: 427900001952
 MOVE.w LAB_0033(PC),LAB_0036 ;2a7e: 33faeeda0000195e
 MOVE.w LAB_0032+2(PC),LAB_0033+2 ;2a86: 33faeed00000195c
 MOVE.l LAB_0030+2(PC),LAB_0029 ;2a8e: 23faeec40000193e
 RTS    ;2a96: 4e75
LAB_012F:
 MOVEM.l D2/A0-A2,-(A7)  ;2a98: 48e720e0
 BSR.w LAB_00AD  ;2a9c: 6100f5a4
 LEA LAB_0037(PC),A0  ;2aa0: 41faeec8
LAB_0130:
 MOVEA.l inwindow(PC),A6  ;2aa4: 2c7aeecc
 MOVE.l (A6),D1   ;2aa8: 2216
LAB_0131:
 MOVE.l (A0),D0   ;2aaa: 2010
 BEQ.w LAB_0135  ;2aac: 6700007e
 MOVEA.l D0,A1   ;2ab0: 2240
 CMPI.l #$00000400,4(A1) ;2ab2: 0ca9000004000004
 BNE.w LAB_0133  ;2aba: 6600001c
 TST.l D1   ;2abe: 4a81
 BEQ.w LAB_0134  ;2ac0: 6700001c
 Dc.w $b2a9   ;2ac4
 Dc.w $0014   ;2ac6
 BEQ.w LAB_0134  ;2ac8: 67000014
LAB_0132:
 MOVE.l A0,-(A7)  ;2acc: 2f08
 BSR.w LAB_00F0  ;2ace: 6100fb0e
 MOVEA.l (A7)+,A0  ;2ad2: 205f
 BRA.w LAB_0130  ;2ad4: 6000ffce
LAB_0133:
 MOVEA.l A1,A0   ;2ad8: 2049
 BRA.w LAB_0131  ;2ada: 6000ffce
LAB_0134:
 MOVE.w 8(A1),D0  ;2ade: 30290008
 MOVE.w 10(A1),D1  ;2ae2: 3229000a
 BTST #7,D0   ;2ae6: 08000007
 BNE.w LAB_0132  ;2aea: 6600ffe0
 CLR.w LAB_0139+2  ;2aee: 427900002b3c
 MOVE.l A1,-(A7)  ;2af4: 2f09
 ALibJsr $4101
 MOVEA.l (A7)+,A1  ;2afc: 225f
 MOVE.w D0,D2   ;2afe: 3400
 BEQ.w LAB_0132  ;2b00: 6700ffca
 MOVE.l 20(A1),LAB_0029  ;2b04: 23e900140000193e
 MOVE.w D0,LAB_0139+2  ;2b0c: 33c000002b3c
 MOVE.w 8(A1),LAB_0036  ;2b12: 33e900080000195e
 MOVE.w 10(A1),LAB_0033+2 ;2b1a: 33e9000a0000195c
 BSR.w LAB_00F0  ;2b22: 6100faba
 MOVE.w D2,D0   ;2b26: 3002
 BRA.w LAB_0136  ;2b28: 60000004
LAB_0135:
 MOVEQ #-1,D0   ;2b2c: 70ff
LAB_0136:
 MOVEM.l (A7)+,D2/A0-A2  ;2b2e: 4cdf0704
 MOVE.l (A7)+,D1  ;2b32: 221f
 RTS    ;2b34: 4e75
LAB_0137:
 ORI.b #$00,D0   ;2b36: 00000000
LAB_0139:
 ORI.b #$00,D0   ;2b3a: 00000000
 Dc.w $0000   ;2b3e
LAB_013A:
 MOVEM.l D1-D7/A1-A5,-(A7) ;2b40: 48e77f7c
 SUBQ.w #1,A3   ;2b44: 534b
 MOVEA.l A0,A5   ;2b46: 2a48
 MOVE.w D0,LAB_0137  ;2b48: 33c000002b36
 MOVE.l prwindow(PC),D7  ;2b4e: 2e3aedfe
 BEQ.w err7  ;2b52: 67000652
 MOVEA.l D7,A3   ;2b56: 2647
 TST.l (A3)   ;2b58: 4a93
 BEQ.w err7  ;2b5a: 6700064a
 MOVE.l 4(A3),LAB_0137+2 ;2b5e: 23eb000400002b38
 MOVEA.l (A3),A4   ;2b66: 2853
 MOVEA.l 50(A4),A4  ;2b68: 286c0032
 MOVEA.l 52(A4),A4  ;2b6c: 286c0034
 MOVEA.l LAB_002E(PC),A6  ;2b70: 2c7aedd8
 MOVEQ #0,D7   ;2b74: 7e00
 BSR.w LAB_0160  ;2b76: 61000236
 MOVE.w LAB_003B(PC),D7  ;2b7a: 3e3aedfc
 Dc.w $be7a   ;2b7e
 Dc.w $ffb6   ;2b80
 BCS.w LAB_013B  ;2b82: 65000008
 MOVE.w LAB_0137(PC),D7  ;2b86: 3e3affae
 SUBQ.w #1,D7   ;2b8a: 5347
LAB_013B:
 MOVE.w D7,D6   ;2b8c: 3c07
 SUBQ.w #1,D6   ;2b8e: 5346
 BMI.w LAB_013E  ;2b90: 6b00001a
 MOVEA.l A5,A1   ;2b94: 224d
LAB_013C:
 MOVE.b (A1)+,D0  ;2b96: 1019
 BSR.w LAB_0161  ;2b98: 61000234
 ADD.w D2,4(A3)  ;2b9c: d56b0004
 DBF D6,LAB_013C  ;2ba0: 51cefff4
 BRA.w LAB_013E  ;2ba4: 60000006
LAB_013D:
 BSR.w LAB_0160  ;2ba8: 61000204
LAB_013E:
 BSR.w LAB_0163  ;2bac: 6100025c
LAB_013F:
 BSR.w windowinp  ;2bb0: 6100fea6
 TST.w D0   ;2bb4: 4a40
 BPL.w LAB_0141  ;2bb6: 6a000038
LAB_0140:
 LEA LAB_0046+2(PC),A0 ;2bba: 41faedda
 MOVEA.l ABSEXECBASE,A6  ;2bbe: 2c7900000004
 JSR -384(A6)  ;2bc4: 4eaefe80
 BSR.w windowinp  ;2bc8: 6100fe8e
 TST.w D0   ;2bcc: 4a40
 BPL.w LAB_0141  ;2bce: 6a000020
 MOVE.l LAB_0037(PC),D0  ;2bd2: 203aed96
 BEQ.w LAB_013F  ;2bd6: 6700ffd8
 MOVE.w LAB_003D(PC),D0  ;2bda: 303aeda0
 BEQ.w LAB_0140  ;2bde: 6700ffda
 MOVEA.l LAB_002E(PC),A6  ;2be2: 2c7aed66
 BSR.w LAB_0163  ;2be6: 61000222
 MOVEQ #-1,D6   ;2bea: 7cff
 BRA.w LAB_0152  ;2bec: 60000112
LAB_0141:
 MOVEA.l LAB_002E(PC),A6  ;2bf0: 2c7aed58
 MOVE.w D0,D6   ;2bf4: 3c00
 BSR.w LAB_0163  ;2bf6: 61000212
 CMPI.w #$0020,D6  ;2bfa: 0c460020
 BCS.w LAB_014F  ;2bfe: 650000c4
 CMPI.w #$007e,D6  ;2c02: 0c46007e
 BHI.w LAB_0150  ;2c06: 620000e8
 BTST #7,LAB_0033+3  ;2c0a: 083900070000195d
 BEQ.w LAB_0142  ;2c12: 67000012
 CMPI.w #$0064,D6  ;2c16: 0c460064
 BEQ.w LAB_0145  ;2c1a: 6700002c
 CMPI.w #$0079,D6  ;2c1e: 0c460079
 BEQ.w LAB_0147  ;2c22: 67000040
LAB_0142:
 MOVE.w LAB_0137(PC),D0  ;2c26: 303aff0e
LAB_0143:
 SUBQ.w #1,D0   ;2c2a: 5340
 Dc.w $be40   ;2c2c
 BCC.w LAB_0144  ;2c2e: 6400000c
 MOVE.b -1(A5,D0.w),0(A5,D0.w) ;2c32: 1bb500ff0000
 BRA.w LAB_0143  ;2c38: 6000fff0
LAB_0144:
 MOVE.b D6,0(A5,D7.w)  ;2c3c: 1b867000
 BSR.w LAB_0160  ;2c40: 6100016c
 BRA.w LAB_015E  ;2c44: 60000148
LAB_0145:
 MOVEA.l A5,A0   ;2c48: 204d
 MOVE.w LAB_0137(PC),D0  ;2c4a: 303afeea
 SUBQ.w #1,D0   ;2c4e: 5340
LAB_0146:
 MOVE.b #$20,(A0)+  ;2c50: 10fc0020
 DBF D0,LAB_0146  ;2c54: 51c8fffa
 MOVE.l LAB_0137+2(PC),4(A3) ;2c58: 277afede0004
 MOVEQ #0,D7   ;2c5e: 7e00
 BRA.w LAB_013D  ;2c60: 6000ff46
LAB_0147:
 LEA 0(A5,D7.w),A0  ;2c64: 41f57000
 MOVE.w LAB_0137(PC),D0  ;2c68: 303afecc
 SUB.w D7,D0   ;2c6c: 9047
 SUBQ.w #1,D0   ;2c6e: 5340
LAB_0148:
 MOVE.b #$20,(A0)+  ;2c70: 10fc0020
 DBF D0,LAB_0148  ;2c74: 51c8fffa
 BRA.w LAB_013D  ;2c78: 6000ff2e
LAB_0149:
 BSR.w LAB_014D  ;2c7c: 61000032
 Dc.w $b07a   ;2c80
 Dc.w $feb4   ;2c82
 BCS.w LAB_014A  ;2c84: 65000004
 SUBQ.w #1,D0   ;2c88: 5340
LAB_014A:
 MOVEQ #0,D7   ;2c8a: 7e00
 MOVE.w LAB_0137+2(PC),D4 ;2c8c: 383afeaa
 SUBQ.w #1,D0   ;2c90: 5340
 BMI.w LAB_014C  ;2c92: 6b000014
 MOVE.w D0,D3   ;2c96: 3600
LAB_014B:
 MOVE.b 0(A5,D7.w),D0  ;2c98: 10357000
 BSR.w LAB_0161  ;2c9c: 61000130
 ADD.w D2,D4   ;2ca0: d842
 ADDQ.w #1,D7   ;2ca2: 5247
 DBF D3,LAB_014B  ;2ca4: 51cbfff2
LAB_014C:
 MOVE.w D4,4(A3)  ;2ca8: 37440004
 BRA.w LAB_013E  ;2cac: 6000fefe
LAB_014D:
 MOVE.w LAB_0137(PC),D0  ;2cb0: 303afe84
 SUBQ.w #1,D0   ;2cb4: 5340
LAB_014E:
 CMPI.b #$20,0(A5,D0.w)  ;2cb6: 0c3500200000
 DBNE D0,LAB_014E  ;2cbc: 56c8fff8
 ADDQ.w #1,D0   ;2cc0: 5240
 RTS    ;2cc2: 4e75
LAB_014F:
 CMPI.w #$001f,D6  ;2cc4: 0c46001f
 BEQ.w LAB_0158  ;2cc8: 67000084
 CMPI.w #$001e,D6  ;2ccc: 0c46001e
 BEQ.w LAB_015D  ;2cd0: 670000b0
 CMPI.w #$0008,D6  ;2cd4: 0c460008
 BEQ.w LAB_0153  ;2cd8: 67000044
 CMPI.w #$000d,D6  ;2cdc: 0c46000d
 BEQ.w LAB_0152  ;2ce0: 6700001e
 CMPI.w #$000a,D6  ;2ce4: 0c46000a
 BEQ.w LAB_0152  ;2ce8: 67000016
 BRA.w LAB_0151  ;2cec: 6000000a
LAB_0150:
 CMPI.w #$007f,D6  ;2cf0: 0c46007f
 BEQ.w LAB_0154  ;2cf4: 67000032
LAB_0151:
 MOVE.w LAB_003D(PC),D0  ;2cf8: 303aec82
 BEQ.w LAB_013E  ;2cfc: 6700feae
LAB_0152:
 MOVE.w D6,LAB_003D+2  ;2d00: 33c60000197e
 MOVE.w D7,LAB_003B+2  ;2d06: 33c70000197a
 MOVEQ #10,D0   ;2d0c: 700a
 BSR.w windowprint  ;2d0e: 61000150
 MOVEQ #0,D0   ;2d12: 7000
 BSR.w LAB_014D  ;2d14: 6100ff9a
 MOVEM.l (A7)+,D1-D7/A1-A5 ;2d18: 4cdf3efe
 RTS    ;2d1c: 4e75
LAB_0153:
 TST.w D7   ;2d1e: 4a47
 BEQ.w LAB_013E  ;2d20: 6700fe8a
 BSR.w LAB_015A  ;2d24: 61000042
LAB_0154:
 BSR.w LAB_0155  ;2d28: 61000006
 BRA.w LAB_013D  ;2d2c: 6000fe7a
LAB_0155:
 MOVE.w D7,D0   ;2d30: 3007
LAB_0156:
 ADDQ.w #1,D0   ;2d32: 5240
 Dc.w $b07a   ;2d34
 Dc.w $fe00   ;2d36
 BCC.w LAB_0157  ;2d38: 6400000c
 MOVE.b 0(A5,D0.w),-1(A5,D0.w) ;2d3c: 1bb5000000ff
 BRA.w LAB_0156  ;2d42: 6000ffee
LAB_0157:
 MOVE.b #$20,-1(A5,D0.w) ;2d46: 1bbc002000ff
 RTS    ;2d4c: 4e75
LAB_0158:
 BSR.w LAB_0159  ;2d4e: 61000006
 BRA.w LAB_013E  ;2d52: 6000fe58
LAB_0159:
 TST.w D7   ;2d56: 4a47
 BEQ.w LAB_015B  ;2d58: 6700001c
 MOVE.w LAB_0033+2(PC),D0 ;2d5c: 303aebfe
 Dc.w $c07c   ;2d60
 Dc.w $0003   ;2d62
 BNE.w LAB_015C  ;2d64: 66000012
LAB_015A:
 SUBQ.w #1,D7   ;2d68: 5347
 MOVE.b 0(A5,D7.w),D0  ;2d6a: 10357000
 BSR.w LAB_0161  ;2d6e: 6100005e
 SUB.w D2,4(A3)  ;2d72: 956b0004
LAB_015B:
 RTS    ;2d76: 4e75
LAB_015C:
 MOVE.l LAB_0137+2(PC),4(A3) ;2d78: 277afdbe0004
 MOVEQ #0,D7   ;2d7e: 7e00
 RTS    ;2d80: 4e75
LAB_015D:
 MOVE.w LAB_0033+2(PC),D0 ;2d82: 303aebd8
 Dc.w $c07c   ;2d86
 Dc.w $0003   ;2d88
 BNE.w LAB_0149  ;2d8a: 6600fef0
LAB_015E:
 ADDQ.w #1,D7   ;2d8e: 5247
 Dc.w $be7a   ;2d90
 Dc.w $fda4   ;2d92
 BCC.w LAB_015F  ;2d94: 64000012
 MOVE.b -1(A5,D7.w),D0  ;2d98: 103570ff
 BSR.w LAB_0161  ;2d9c: 61000030
 ADD.w D2,4(A3)  ;2da0: d56b0004
 BRA.w LAB_013E  ;2da4: 6000fe06
LAB_015F:
 SUBQ.w #1,D7   ;2da8: 5347
 BRA.w LAB_013E  ;2daa: 6000fe00
LAB_0160:
 LEA 0(A5,D7.w),A0  ;2dae: 41f57000
 MOVEQ #0,D0   ;2db2: 7000
 MOVE.w LAB_0137(PC),D0  ;2db4: 303afd80
 SUB.w D7,D0   ;2db8: 9047
 MOVE.l 4(A3),-(A7)  ;2dba: 2f2b0004
 BSR.w LAB_0168  ;2dbe: 610000fe
 MOVEQ #32,D0   ;2dc2: 7020
 BSR.w windowprint  ;2dc4: 6100009a
 MOVE.l (A7)+,4(A3)  ;2dc8: 275f0004
 RTS    ;2dcc: 4e75
LAB_0161:
 MOVE.w 24(A4),D2  ;2dce: 342c0018
 BTST #5,23(A4)  ;2dd2: 082c00050017
 BEQ.w LAB_0162  ;2dd8: 6700002e
 Dc.w $b02c   ;2ddc
 Dc.w $0021   ;2dde
 BHI.w LAB_0162  ;2de0: 62000026
 SUB.b 32(A4),D0  ;2de4: 902c0020
 BMI.w LAB_0162  ;2de8: 6b00001e
 Dc.w $c07c   ;2dec
 Dc.w $00ff   ;2dee
 LSL.w #1,D0   ;2df0: e348
 MOVEA.l 44(A4),A0  ;2df2: 206c002c
 MOVE.w 0(A0,D0.w),D2  ;2df6: 34300000
 MOVE.l 48(A4),D1  ;2dfa: 222c0030
 BEQ.w LAB_0162  ;2dfe: 67000008
 MOVEA.l D1,A0   ;2e02: 2041
 ADD.w 0(A0,D0.w),D2  ;2e04: d4700000
LAB_0162:
 RTS    ;2e08: 4e75
LAB_0163:
 MOVEA.l (A3),A1   ;2e0a: 2253
 MOVEA.l 50(A1),A1  ;2e0c: 22690032
 MOVEQ #0,D0   ;2e10: 7000
 MOVE.b 28(A1),D0  ;2e12: 1029001c
 MOVE.w D0,-(A7)  ;2e16: 3f00
 MOVE.l A1,-(A7)  ;2e18: 2f09
 MOVEQ #3,D0   ;2e1a: 7003
 JSR -354(A6)  ;2e1c: 4eaefe9e
 MOVE.b 0(A5,D7.w),D0  ;2e20: 10357000
 BSR.w LAB_0161  ;2e24: 6100ffa8
 MOVE.w 20(A4),D3  ;2e28: 362c0014
 MOVE.w 4(A3),D0  ;2e2c: 302b0004
 MOVE.w 6(A3),D1  ;2e30: 322b0006
 SUBQ.w #1,D2   ;2e34: 5342
 SUBQ.w #1,D3   ;2e36: 5343
 ADD.w D0,D2   ;2e38: d440
 ADD.w D1,D3   ;2e3a: d641
 MOVE.w LAB_003A(PC),D4  ;2e3c: 383aeb38
 BMI.w LAB_0164  ;2e40: 6b000006
 MOVE.w D3,D1   ;2e44: 3203
 SUB.w D4,D1   ;2e46: 9244
LAB_0164:
 MOVEA.l (A7),A1   ;2e48: 2257
 JSR -306(A6)  ;2e4a: 4eaefece
 MOVEA.l (A7)+,A1  ;2e4e: 225f
 MOVEQ #0,D0   ;2e50: 7000
 MOVE.w (A7)+,D0  ;2e52: 301f
 JMP -354(A6)  ;2e54: 4eeefe9e
 BRA.w LAB_016C  ;2e58: 60000084
 BRA.w LAB_0168  ;2e5c: 60000060
windowprint:
 CMPI.b #$0d,D0   ;2e60: 0c00000d
 BEQ.w LAB_0166  ;2e64: 6700000a
 CMPI.b #$0a,D0   ;2e68: 0c00000a
 BNE.w LAB_0167  ;2e6c: 66000032
LAB_0166:
 MOVEM.l A0-A2,-(A7)  ;2e70: 48e700e0
 MOVEA.l prwindow(PC),A0  ;2e74: 207aead8
 MOVE.l (A0),D0   ;2e78: 2010
 BEQ.w err7  ;2e7a: 6700032a
 MOVEA.l D0,A1   ;2e7e: 2240
 MOVEA.l 50(A1),A2  ;2e80: 24690032
 MOVE.w 6(A0),D0  ;2e84: 30280006
 ADD.w 58(A2),D0  ;2e88: d06a003a
 MOVE.w D0,6(A0)  ;2e8c: 31400006
 CLR.w 4(A0)   ;2e90: 42680004
 MOVE.b 122(A1),5(A0)  ;2e94: 1169007a0005
 MOVEM.l (A7)+,A0-A2  ;2e9a: 4cdf0700
 RTS    ;2e9e: 4e75
LAB_0167:
 MOVEM.l D1/A1-A3,-(A7)  ;2ea0: 48e74070
 MOVE.w D0,-(A7)  ;2ea4: 3f00
 BSR.w LAB_016E  ;2ea6: 61000050
 LEA LAB_002C+2(PC),A0 ;2eaa: 41faea9c
 MOVE.w (A7)+,D0  ;2eae: 301f
 MOVE.b D0,(A0)   ;2eb0: 1080
 MOVEQ #1,D0   ;2eb2: 7001
 BSR.w LAB_016F  ;2eb4: 6100008e
 MOVEM.l (A7)+,D1/A1-A3  ;2eb8: 4cdf0e02
 RTS    ;2ebc: 4e75
LAB_0168:
 TST.l D0   ;2ebe: 4a80
 BEQ.w LAB_016B  ;2ec0: 6700001a
 MOVEM.l D1/A1-A3,-(A7)  ;2ec4: 48e74070
LAB_0169:
 MOVEM.l D0/A0,-(A7)  ;2ec8: 48e78080
 BSR.w LAB_016E  ;2ecc: 6100002a
 MOVEM.l (A7)+,D0/A0  ;2ed0: 4cdf0101
 BSR.w LAB_016F  ;2ed4: 6100006e
LAB_016A:
 MOVEM.l (A7)+,D1/A1-A3  ;2ed8: 4cdf0e02
LAB_016B:
 RTS    ;2edc: 4e75
LAB_016C:
 MOVEM.l D1/A1-A3,-(A7)  ;2ede: 48e74070
 MOVEQ #-1,D0   ;2ee2: 70ff
 MOVEA.l A0,A1   ;2ee4: 2248
LAB_016D:
 ADDQ.l #1,D0   ;2ee6: 5280
 TST.b (A1)+   ;2ee8: 4a19
 BNE.w LAB_016D  ;2eea: 6600fffa
 TST.l D0   ;2eee: 4a80
 BEQ.w LAB_016A  ;2ef0: 6700ffe6
 BRA.w LAB_0169  ;2ef4: 6000ffd2
LAB_016E:
 MOVEA.l prwindow(PC),A3  ;2ef8: 267aea54
 MOVE.l (A3),D0   ;2efc: 2013
 BEQ.w err7  ;2efe: 670002a6
 MOVEA.l D0,A0   ;2f02: 2040
 MOVEA.l 50(A0),A1  ;2f04: 22680032
 MOVEQ #0,D0   ;2f08: 7000
 MOVEQ #0,D1   ;2f0a: 7200
 MOVE.w 4(A3),D0  ;2f0c: 302b0004
 MOVE.w 6(A3),D1  ;2f10: 322b0006
 ADD.w 62(A1),D1  ;2f14: d269003e
 MOVEA.l LAB_002E(PC),A6  ;2f18: 2c7aea30
 MOVE.l A1,-(A7)  ;2f1c: 2f09
 JSR -240(A6)  ;2f1e: 4eaeff10
 MOVEA.l (A7),A1   ;2f22: 2257
 MOVE.w LAB_003F(PC),D0  ;2f24: 303aea5a
 JSR -342(A6)  ;2f28: 4eaefeaa
 MOVEA.l (A7),A1   ;2f2c: 2257
 MOVE.w LAB_003F+2(PC),D0 ;2f2e: 303aea52
 JSR -348(A6)  ;2f32: 4eaefea4
 MOVEA.l (A7),A1   ;2f36: 2257
 MOVE.w LAB_0041(PC),D0  ;2f38: 303aea4a
 JSR -354(A6)  ;2f3c: 4eaefe9e
 MOVEA.l (A7)+,A1  ;2f40: 225f
 RTS    ;2f42: 4e75
LAB_016F:
 MOVEM.l D0/A0-A1,-(A7)  ;2f44: 48e780c0
 JSR -54(A6)   ;2f48: 4eaeffca
 ADD.w D0,4(A3)  ;2f4c: d16b0004
 MOVEM.l (A7)+,D0/A0-A1  ;2f50: 4cdf0301
 JMP -60(A6)   ;2f54: 4eeeffc4
anewwindow:
 ORI.b #$00,D0   ;2f58: 00000000
 ORI.b #$00,D0   ;2f5c: 00000000
 ORI.b #$00,D0   ;2f60: 00000000
 ORI.b #$00,D0   ;2f64: 00000000
 ORI.b #$00,D0   ;2f68: 00000000
 ORI.b #$00,D0   ;2f6c: 00000000
 ORI.b #$00,D0   ;2f70: 00000000
 ORI.b #$00,D0   ;2f74: 00000000
 ORI.b #$00,D0   ;2f78: 00000000
 ORI.b #$20,D0   ;2f7c: 00000020
 ORI.w #$ffff,D0  ;2f80: 0040ffff
 Dc.w $ffff   ;2f84
 Dc.w $0000   ;2f86
 Dc.l LAB_0171  ;2f88: 00002f8c
LAB_0171:
 OR.b D0,D0   ;2f8c: 8000
 ORI.l #$ffffffff,(A0)  ;2f8e: 0090ffffffff
LAB_0172:
 ORI.b #$00,D0   ;2f94: 00000000
LAB_0173:
 ORI.b #$00,D0   ;2f98: 00000000
 ORI.b #$00,D0   ;2f9c: 00000000
 ORI.b #$00,D0   ;2fa0: 00000000
LAB_0174:
 MOVEQ #0,D0   ;2fa4: 7000
 RTS    ;2fa6: 4e75
dobackfillhook0:
 MOVEQ #0,D1   ;2fa8: 7200
dobackfillhook:
 TST.l D0   ;2faa: 4a80
 BEQ.w LAB_0177  ;2fac: 67000024
 LEA LAB_0178,A0  ;2fb0: 41f900002fda
 Dc.w $c3fc   ;2fb6
 Dc.w $0014   ;2fb8
 ADDA.l D1,A0   ;2fba: d1c1
 MOVE.l #$8000007f,LAB_0172 ;2fbc: 23fc8000007f00002f94
 MOVE.l D0,8(A0)  ;2fc6: 21400008
 MOVE.l A0,LAB_0173  ;2fca: 23c800002f98
 RTS    ;2fd0: 4e75
LAB_0177:
 CLR.l LAB_0172  ;2fd2: 42b900002f94
 RTS    ;2fd8: 4e75
LAB_0178:
 ORI.b #$00,D0   ;2fda: 00000000
 ORI.b #$00,D0   ;2fde: 00000000
 ORI.b #$00,D0   ;2fe2: 00000000
 ORI.b #$00,D0   ;2fe6: 00000000
 ORI.b #$00,D0   ;2fea: 00000000
 ORI.b #$00,D0   ;2fee: 00000000
 ORI.b #$00,D0   ;2ff2: 00000000
 ORI.b #$00,D0   ;2ff6: 00000000
 ORI.b #$00,D0   ;2ffa: 00000000
 ORI.b #$00,D0   ;2ffe: 00000000
 ORI.b #$00,D0   ;3002: 00000000
 ORI.b #$00,D0   ;3006: 00000000
 ORI.b #$00,D0   ;300a: 00000000
 ORI.b #$00,D0   ;300e: 00000000
 ORI.b #$00,D0   ;3012: 00000000
 ORI.b #$00,D0   ;3016: 00000000
 ORI.b #$00,D0   ;301a: 00000000
 ORI.b #$00,D0   ;301e: 00000000
 ORI.b #$00,D0   ;3022: 00000000
 ORI.b #$00,D0   ;3026: 00000000
 ORI.b #$00,D0   ;302a: 00000000
 ORI.b #$00,D0   ;302e: 00000000
 ORI.b #$00,D0   ;3032: 00000000
 ORI.b #$00,D0   ;3036: 00000000
 ORI.b #$00,D0   ;303a: 00000000
 ORI.b #$00,D0   ;303e: 00000000
 ORI.b #$00,D0   ;3042: 00000000
 ORI.b #$00,D0   ;3046: 00000000
 ORI.b #$00,D0   ;304a: 00000000
 ORI.b #$00,D0   ;304e: 00000000
 ORI.b #$00,D0   ;3052: 00000000
 ORI.b #$00,D0   ;3056: 00000000
 ORI.b #$00,D0   ;305a: 00000000
 ORI.b #$00,D0   ;305e: 00000000
 ORI.b #$00,D0   ;3062: 00000000
 ORI.b #$00,D0   ;3066: 00000000
 ORI.b #$00,D0   ;306a: 00000000
 ORI.b #$00,D0   ;306e: 00000000
 ORI.b #$00,D0   ;3072: 00000000
 ORI.b #$00,D0   ;3076: 00000000
 ORI.b #$00,D0   ;307a: 00000000
 ORI.b #$00,D0   ;307e: 00000000
 ORI.b #$00,D0   ;3082: 00000000
 ORI.b #$00,D0   ;3086: 00000000
 ORI.b #$00,D0   ;308a: 00000000
 ORI.b #$00,D0   ;308e: 00000000
 ORI.b #$00,D0   ;3092: 00000000
 ORI.b #$00,D0   ;3096: 00000000
 ORI.b #$00,D0   ;309a: 00000000
 ORI.b #$00,D0   ;309e: 00000000
 ORI.b #$00,D0   ;30a2: 00000000
 ORI.b #$00,D0   ;30a6: 00000000
 ORI.b #$00,D0   ;30aa: 00000000
 ORI.b #$00,D0   ;30ae: 00000000
 ORI.b #$00,D0   ;30b2: 00000000
 ORI.b #$00,D0   ;30b6: 00000000
 ORI.b #$00,D0   ;30ba: 00000000
 ORI.b #$00,D0   ;30be: 00000000
 ORI.b #$00,D0   ;30c2: 00000000
 ORI.b #$00,D0   ;30c6: 00000000
 ORI.b #$00,D0   ;30ca: 00000000
 ORI.b #$00,D0   ;30ce: 00000000
 ORI.b #$00,D0   ;30d2: 00000000
 ORI.b #$00,D0   ;30d6: 00000000
 ORI.b #$00,D0   ;30da: 00000000
 ORI.b #$00,D0   ;30de: 00000000
 ORI.b #$00,D0   ;30e2: 00000000
 ORI.b #$00,D0   ;30e6: 00000000
 ORI.b #$00,D0   ;30ea: 00000000
 ORI.b #$00,D0   ;30ee: 00000000
 ORI.b #$00,D0   ;30f2: 00000000
 ORI.b #$00,D0   ;30f6: 00000000
 ORI.b #$00,D0   ;30fa: 00000000
 ORI.b #$00,D0   ;30fe: 00000000
 ORI.b #$00,D0   ;3102: 00000000
 ORI.b #$00,D0   ;3106: 00000000
 ORI.b #$00,D0   ;310a: 00000000
 ORI.b #$00,D0   ;310e: 00000000
 ORI.b #$00,D0   ;3112: 00000000
 ORI.b #$00,D0   ;3116: 00000000
 ORI.b #$00,D0   ;311a: 00000000
 ORI.b #$00,D0   ;311e: 00000000
 ORI.b #$00,D0   ;3122: 00000000
 ORI.b #$00,D0   ;3126: 00000000
 ORI.b #$00,D0   ;312a: 00000000
 ORI.b #$00,D0   ;312e: 00000000
 ORI.b #$00,D0   ;3132: 00000000
 ORI.b #$00,D0   ;3136: 00000000
 ORI.b #$00,D0   ;313a: 00000000
 ORI.b #$00,D0   ;313e: 00000000
 ORI.b #$00,D0   ;3142: 00000000
 ORI.b #$00,D0   ;3146: 00000000
 ORI.b #$00,D0   ;314a: 00000000
 ORI.b #$00,D0   ;314e: 00000000
 ORI.b #$00,D0   ;3152: 00000000
 ORI.b #$00,D0   ;3156: 00000000
 ORI.b #$00,D0   ;315a: 00000000
 ORI.b #$00,D0   ;315e: 00000000
 ORI.b #$00,D0   ;3162: 00000000
 ORI.b #$00,D0   ;3166: 00000000
LAB_0179: ORI.b #$00,D0   ;316a: 00000000
LAB_017A: ORI.b #$00,D0   ;316e: 00000000
LAB_017B: ORI.b #$00,D0   ;3172: 00000000
LAB_017C: ORI.b #$00,D0   ;3176: 00000000
LAB_017D: ORI.b #$00,D0   ;317a: 00000000

errors:
;err1:    MOVE.l	#mess1,D0 : TRAP #0			
err2:    MOVE.l	#mess2,D0 : TRAP #0			
err3:    MOVE.l	#mess3,D0 : TRAP #0			
err4:    MOVE.l	#mess4,D0 : TRAP #0			
err5:    MOVE.l	#mess5,D0 : TRAP #0			
err6:    MOVE.l	#mess6,D0 : TRAP #0			
err7:    MOVE.l	#mess7,D0 : TRAP #0			
err8:    MOVE.l	#mess8,D0 : TRAP #0			
err9:    MOVE.l	#mess9,D0 : TRAP #0			
err10:	 MOVE.l	#mess10,D0 : TRAP #0			
err11:	 MOVE.l	#mess11,D0 : TRAP #0			
err12:	 MOVE.l	#mess12,D0 : TRAP #0			
err13:	 MOVE.l	#mess12,D0 : TRAP #0			
idcmperr: MOVE.l #idcmpmess,D0 : TRAP #0

mess1: 	   Dc.b	"Couldn't Open Window",0
mess2: 	   Dc.b	"Uninitialized Screen",0
mess3: 	   Dc.b	"Uninitialized Window",0
mess4: 	   Dc.b	"Uninitialized IntuiFont",0
mess5: 	   Dc.b	"Not Enough Coordinates",0
mess6: 	   Dc.b	"Invalid Input Window",0
mess7: 	   Dc.b	"Invalid Output Window",0
mess8: 	   Dc.b	"Uninitialized Shape",0
mess9: 	   Dc.b	"Can't use Shape as Pointer",0
mess10:    Dc.b	"Can't move Window",0
mess11:    Dc.b	"Can't Size Window",0
mess12:    Dc.b	"Ininitialised Shape",0
mess13:    Dc.b	"Ininitialised BitMap",0
idcmpmess: Dc.b	"IDCMP must not be 0",0,0

;********* error checking routines ************************
.windowchk:
  TST.l (A1) : BEQ.w err2 : RTS

.wfontchk:
  BSR.w wchk
  TST.l 8(A0) : BEQ.w err4 : RTS

.wlinechk:
  CMPI.w #$0002,D7 : BCS.w err5
.wchk:
  TST.l (A1) : BEQ.w err3 : RTS

.wpointerchk:
  TST.w (A2) : BEQ.w err8
  TST.l (A3) : BEQ.w err3
RTS

.wmovechk:
RTS

  MOVE.l (A0),D7 : BEQ.w err3 : MOVEA.l D7,A1
  MOVE.w D0,D6 : BMI.w err10
  MOVE.w D1,D7 : BMI.w err10
  ;
  MOVEA.l 46(A1),A2
  ADD.w  8(A1),D6 : CMP 12(a2),d6 : BHI.w err10
  ADD.w 10(A1),D7 : CMP 14(a2),d7 : BHI.w err10
RTS

.wsizechk:
RTS

 MOVE.l (A0),D7 : BEQ.w err3

 MOVEA.l D7,A1
 MOVE.w D0,D6 : BEQ.w err11 : BMI.w err11
 MOVE.w D1,D7 : BEQ.w err11 : BMI.w err11
 MOVEA.l 46(A1),A2
 ADD.w 4(A1),D6 : CMP 12(a2),d6 : BHI.w err11
 ADD.w 6(A1),D7 : CMP 14(a2),d7 : BHI.w err11
RTS

.idcmpchk:
  TST.l D0 : BEQ.w idcmperr : RTS

.wblitchk:
  TST.l (A0) : BEQ.w err3
  TST.w (A2) : BEQ.w err12
RTS

.wbtowchk:
  TST.l (A0) : BEQ.w err3
  TST.w 62(A1) : BEQ.w err13
RTS
RTS