FindScreen0:WBStartup

*sc._Screen=LockPubScreen_(0)
If *sc
 *dra.DrawInfo=GetScreenDrawInfo_ (*sc)
  If *dra

Dim propmap.TagItem(3)
 propmap(0)\ti_Tag=#PGA_Top,#STRINGA_LongVal
 propmap(1)\ti_Tag=#STRINGA_LongVal,#PGA_Top
 propmap(2)\ti_Tag=#TAG_END,0

Dim prop.TagItem(11)
 prop(0)\ti_Tag =#GA_ID,1
 prop(1)\ti_Tag =#GA_Top,35
 prop(2)\ti_Tag =#GA_Left,30
 prop(3)\ti_Tag =#GA_Width,10
 prop(4)\ti_Tag =#GA_Height,80
 prop(5)\ti_Tag =#ICA_MAP,&propmap(0)
 prop(6)\ti_Tag =#PGA_Total,70
 prop(7)\ti_Tag =#PGA_NewLook,1
 prop(8)\ti_Tag =#PGA_Top,25
 prop(9)\ti_Tag =#PGA_Visible,1
 prop(10)\ti_Tag=#TAG_END,0

*pgad.Gadget=NewObjectA_(0,"propgclass",&prop(0))
If *pgad

Dim str.TagItem(11)
 str(0)\ti_Tag =#GA_ID,2
 str(1)\ti_Tag =#GA_Top,35
 str(2)\ti_Tag =#GA_Left,60
 str(3)\ti_Tag =#GA_Width,80
 str(4)\ti_Tag =#GA_Height,15
 str(5)\ti_Tag =#ICA_MAP,&propmap(0)
 str(6)\ti_Tag =#ICA_TARGET,*pgad
 str(7)\ti_Tag =#GA_Previous,*pgad
 str(8)\ti_Tag =#STRINGA_LongVal,25
 str(9)\ti_Tag =#STRINGA_MaxChars,5
 str(10)\ti_Tag=#TAG_END,0

*strgad.Gadget=NewObjectA_(0,"strgclass",&str(0))
If *strgad

Dim wintags.TagItem(16)
 wintags(0)\ti_Tag = #WA_Left,(*sc\Width/2)-100
 wintags(1)\ti_Tag = #WA_Top,(*sc\Height/2)-75
 wintags(2)\ti_Tag = #WA_Width,200
 wintags(3)\ti_Tag = #WA_Height,150
 wintags(4)\ti_Tag = #WA_Width,200
 wintags(5)\ti_Tag = #WA_CustomScreen,*sc
 wintags(6)\ti_Tag = #WA_Activate,1
 wintags(7)\ti_Tag = #WA_AutoAdjust,1
 wintags(8)\ti_Tag = #WA_CloseGadget,1
 wintags(9)\ti_Tag = #WA_DepthGadget,1
 wintags(10)\ti_Tag= #WA_DragBar,1
 wintags(11)\ti_Tag= #WA_Title,Null("BoobsiTalk")
 wintags(12)\ti_Tag= #WA_IDCMP,#IDCMP_CLOSEWINDOW|#IDCMP_INTUITICKS|#IDCMP_GADGETUP|#IDCMP_REFRESHWINDOW
 wintags(13)\ti_Tag= #WA_MinWidth,100
 wintags(14)\ti_Tag= #WA_MinHeight,100
 wintags(15)\ti_Tag= #TAG_END,0

*win._Window = OpenWindowTagList_(0,&wintags(0))

Dim temptag.TagItem(2)
 temptag(0)\ti_Tag=#ICA_TARGET,*strgad
 temptag(1)\ti_Tag=#TAG_END,0
 SetGadgetAttrsA_*pgad,*win,0,&temptag(0)

 AddGList_ *win,*pgad,-1,-1,0
 RefreshGList_ *pgad,*win,0,-1

loop=1
 While loop
  WaitPort_ *win\UserPort
   *imsg.IntuiMessage = GT_GetIMsg_(*win\UserPort)
    *class = *imsg\Class
     *code = *imsg\Code
    GT_ReplyIMsg_ *imsg
  Select *class
   Case #IDCMP_CLOSEWINDOW
   loop=0
  End Select
Wend

RemoveGList_ *win,*pgad,-1
DisposeObject_ *strgad
DisposeObject_ *pgad
CloseWindow_ *win
FreeScreenDrawInfo_ *sc,*dra
UnlockPubScreen_ 0,*sc
EndIf:EndIf:EndIf:EndIf
End

