WBStartup

XINCLUDE "blitz2:includes/cybergraphics.bb2"

*lib.Library = OpenLibrary_("cybergraphics.library",0)

If *lib = 0
 Request "Error","Cybergraphics.library not found !","Ok"
 End
EndIf

Dim bestmod.TagItem(4)
 bestmod(0)\ti_Tag = #CYBRBIDTG_Depth        , 24
 bestmod(1)\ti_Tag = #CYBRBIDTG_NominalWidth ,800
 bestmod(2)\ti_Tag = #CYBRBIDTG_NominalHeight,600
 bestmod(3)\ti_Tag = #TAG_END                ,0

*modeid = BestCModeIDTagList_(&bestmod(0))

Dim tagscreen.TagItem(7)

 tagscreen(0)\ti_Tag=#SA_Width       ,800
 tagscreen(1)\ti_Tag=#SA_Height      ,600
 tagscreen(2)\ti_Tag=#SA_Depth       ,24
 tagscreen(3)\ti_Tag=#SA_FullPalette ,1
 tagscreen(4)\ti_Tag=#SA_Title       ,"CyberDemo"
 tagscreen(5)\ti_Tag=#SA_DisplayID   ,*modeid
 tagscreen(6)\ti_Tag=#TAG_END        ,0

  *Scrn._Screen = OpenScreenTagList_(0,&tagscreen(0))

Dim wintags.TagItem(13)
 wintags(0)\ti_Tag  = #WA_CustomScreen ,*Scrn
 wintags(1)\ti_Tag  = #WA_Top          ,(*Scrn\Height/2)-256
 wintags(2)\ti_Tag  = #WA_Left         ,(*Scrn\Width/2)-256
 wintags(3)\ti_Tag  = #WA_InnerWidth   ,512
 wintags(4)\ti_Tag  = #WA_InnerHeight  ,512
 wintags(5)\ti_Tag  = #WA_GimmeZeroZero,1
 wintags(6)\ti_Tag  = #WA_CloseGadget  ,1
 wintags(7)\ti_Tag  = #WA_DragBar      ,1
 wintags(8)\ti_Tag  = #WA_SmartRefresh ,1
 wintags(9)\ti_Tag  = #WA_Activate     ,1
 wintags(10)\ti_Tag = #WA_Title        ,"CyberDemo"
 wintags(11)\ti_Tag = #WA_IDCMP        ,#IDCMP_CLOSEWINDOW|#IDCMP_VANILLAKEY
 wintags(12)\ti_Tag = #TAG_END         ,0

  *win._Window=OpenWindowTagList_(0,&wintags(0))
   For y=0 To 255
   x=0
   For x=0 To 255
     argb-0.25
     junk = WriteRGBPixel_(*win\RPort, x, y, argb)
   Next x

    For x = 256 To 511
     argb-0.25
     junk = WriteRGBPixel_(*win\RPort, x, y, argb)
    Next x
   Next y

   For y=255 To 511
   For x = 511 To 256 Step -1
     argb+0.25
     junk = WriteRGBPixel_(*win\RPort, x, y, argb)
    Next x

    For x = 255 To 0 Step -1
     argb+0.25
     junk = WriteRGBPixel_(*win\RPort, x, y, argb)
    Next x
   Next y
   SetAPen_ *win\RPort,1
   SetDrMd_ *win\RPort,-2
   Move_ *win\RPort,30,100
   Text_ *win\RPort,"press mouse",11
   MouseWait

CloseWindow_ *win
CloseScreen_ *Scrn
CloseLibrary_ *lib
End
